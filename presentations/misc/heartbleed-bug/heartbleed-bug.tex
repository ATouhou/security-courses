\documentclass[20pt,landscape,a4paper,footrule]{foils}
\usepackage{solido-network-slides}
%\usepackage{ulem}

% Basic things that we need are below
\selectlanguage{danish}

%\externaldocument{unix-audit-security-oevelser}
\externaldocument{\jobname-exercises}

\begin{document}



\mytitlepage
{Heartbleed bug}{Netværket om Procesorienteret IT-sikkerhed}

In part based on\\ 
{\small\link{http://www.version2.dk/blog/openssl-er-doed-laenge-leve-libressl-57640}\\
\link{http://www.version2.dk/blog/opdater-openssl-og-dit-os-nu-57202}}


\slide{Planen idag}
\vskip 2 cm

\hlkimage{5cm}{dont-panic.png}
\centerline{\color{titlecolor}\LARGE Don't Panic!}

\begin{list1}
\item Kl 13:00-14:45 - med pause
\item Mindre enetale, mere foredrag 2.0 med sociale medier, informationsdeling og interaktion
\end{list1}
\centerline{Send gerne spørgsmål senere}



\slide{The current situation}

\hlkimage{10cm}{homer-end-is-near.jpg}
\begin{list1}
\item Internet security sucks
\item We depend on cloud services and underfunded infrastructure - OpenSSL
\item We depend on others and the whole internet - DDoS
\item Personal computers like laptops suck at security
\item Mobile devices suck even more at security - less CPU/MEM/storage
\end{list1}


\slide{Heartbleed CVE-2014-0160}

\hlkimage{22cm}{heartbleed-com.png}

Source: \link{http://heartbleed.com/}

\slide{Heartbleed is yet another bug in SSL products}

\begin{alltt}
What versions of the OpenSSL are affected?
Status of different versions:

* OpenSSL 1.0.1 through 1.0.1f (inclusive) are vulnerable
* OpenSSL 1.0.1g is NOT vulnerable
* OpenSSL 1.0.0 branch is NOT vulnerable
* OpenSSL 0.9.8 branch is NOT vulnerable

Bug was introduced to OpenSSL in December 2011 and has been out
in the wild since OpenSSL release 1.0.1 on 14th of March 
2012. OpenSSL 1.0.1g released on 7th of April 2014 fixes the bug.
\end{alltt}

\vskip 1cm
\centerline{It's just a bug - but a serious one}

\slide{Why is heartbleed different?}

\hlkimage{3cm}{heartbleed.png}
\begin{list1}
\item Great PR, name, web site, logo 
\item OpenSSL is very widespread
\item OpenSSL has been criticized before
\item The spotlight is now on a lot of products, infrastructure
\item BOTH Open Source products and Proprietary products hurt by this
\item TL;DR\\ OpenSSL is everywhere and an example of our dependency on weak components
\end{list1}

\slide{Key points after heartbleed}

\hlkimage{16cm}{ssl-tls-breaks-timeline.png}
Source: picture source\\ {\footnotesize\link{https://www.duosecurity.com/blog/heartbleed-defense-in-depth-part-2}}
\begin{list2}
\item Writing SSL software and other secure crypto software is hard
\item Configuring SSL is hard\\
check you own site \link{https://www.ssllabs.com/ssltest/}
\item SSL is hard, finding bugs "all the time"
\link{http://armoredbarista.blogspot.dk/2013/01/a-brief-chronology-of-ssltls-attacks.html}
\item Rekeying is hard - slow, error prone, manual proces - Automate!
\item Proof of concept programs exist - god or bad?
\end{list2}

\slide{Proof of concept programs exist - god or bad?}

\centerline{Some of the tools released shortly after Heartbleed announcement}
\begin{list2}
\item \link{https://github.com/FiloSottile/Heartbleed} tool i Go\\
site \link{http://filippo.io/Heartbleed/}
\item \link{https://github.com/titanous/heartbleeder} tool i Go
\item \link{http://s3.jspenguin.org/ssltest.py} PoC
\item \link{https://gist.github.com/takeshixx/10107280} test tool med STARTTLS support
\item \link{http://possible.lv/tools/hb/} test site
\item \link{https://twitter.com/richinseattle/status/453717235379355649} Practical Heartbleed attack against session keys links til, \link{https://www.mattslifebytes.com/?p=533} og "Fully automated here "\\ \link{https://www.michael-p-davis.com/using-heartbleed-for-hijacking-user-sessions/}

\item Metasploit er også opdateret på master repo\\ \link{https://twitter.com/firefart/status/453758091658792960}\\
\link{https://github.com/rapid7/metasploit-framework/blob/master/modules/auxiliary/scanner/ssl/openssl_heartbleed.rb}
\end{list2}


\slide{Security is magic}

%\vskip 2cm

\hlkimage{4cm}{wizard_in_blue_hat.png}

\hlkrightimage{5cm}{003scawebgoshindomanicon.png}
.
%{\large Superheltegerninger}

\begin{list1}
\item Think security always appropriate paranoia
\item Follow news about software security
\item Support communties, join and learn
\end{list1}



\slide{Hackerværktøjer er også til dig!}
% måske til reference afsnit?
\hlkimage{2cm}{hackers_JOLIE+1995.jpg}


\begin{list2}
\item Hackers work all the time to break stuff, Use hackertools:
\item Nmap, Nping \link{http://nmap.org}
\item Wireshark - \link{http://http://www.wireshark.org/} 
\item Aircrack-ng \link{http://www.aircrack-ng.org/}
\item Metasploit Framework \link{http://www.metasploit.com/}
%\item Paros proxy \link{http://www.parosproxy.org}
\item Burpsuite \link{http://portswigger.net/burp/}
\item Skipfish \link{http://code.google.com/p/skipfish/}
\item Kali Linux \link{http://www.kali.org} 
\end{list2}

\vskip 5mm
\centerline{Most popular hacker tools \link{http://sectools.org/}}

\slide{Kali Linux the new backtrack}

\hlkimage{\linewidth-8cm}{kali-linux.png}

\begin{list1}
\item BackTrack \link{http://www.backtrack-linux.org}
\item  Kali \link{http://www.kali.org/}
\item 100.000s of videos on youtube: "kali hack" ~60.000, "backtrack hack" ~125.000
\end{list1}

\slide{it's a Unix system, I know this}

\hlkimage{24cm}{twitter-unix-security.png}

\begin{list1}
\item Skal du igang med sikkerhed?
\item Installer et netværk, evt. bare en VMware, Virtualbox, Parallels, Xen, GNS3, ...
\item Brug BackTrack, se evt. youtube videoer om programmerne
\end{list1}

Quote fra Jurassic Park
\link{http://www.youtube.com/watch?v=dFUlAQZB9Ng}


\slide{Metasploit and Armitage Still rocking the internet}


\hlkimage{20cm}{metasploit-about.png}

\begin{list1}
\item \link{http://www.metasploit.com/}
\item Armitage GUI fast and easy hacking for Metasploit\\
\link{http://www.fastandeasyhacking.com/}
\item Kursus Metasploit Unleashed\\
\link{http://www.offensive-security.com/metasploit-unleashed/Main_Page}
\item Bog: Metasploit: The Penetration Tester's Guide, No Starch Press\\
ISBN-10: 159327288X
\end{list1}



\slide{Fri adgang til hackerværktøjer}

\begin{list1}
\item I 1993 skrev Dan Farmer og Wietse Venema artiklen\\
\emph{Improving the Security of Your Site by Breaking Into it}
\item I 1995 udgav de softwarepakken SATAN\\
\emph{Security Administrator Tool for Analyzing Networks}
\begin{quote}\large
We realize that SATAN is a two-edged sword - like many tools,\\
it can be used for good and for evil purposes. We also \\
realize that intruders (including wannabees) have much \\
more capable (read intrusive) tools than offered with SATAN. 
\end{quote}
\item Se \link{http://sectools.org} og \link{http://www.packetstormsecurity.org/}

\end{list1}
Kilde:
\link{http://www.fish2.com/security/admin-guide-to-cracking.html}

\slide{Heartbleed hacking}

\begin{alltt}\footnotesize
  06b0: 2D 63 61 63 68 65 0D 0A 43 61 63 68 65 2D 43 6F  -cache..Cache-Co
  06c0: 6E 74 72 6F 6C 3A 20 6E 6F 2D 63 61 63 68 65 0D  ntrol: no-cache.
  06d0: 0A 0D 0A 61 63 74 69 6F 6E 3D 67 63 5F 69 6E 73  ...action=gc_ins
  06e0: 65 72 74 5F 6F 72 64 65 72 26 62 69 6C 6C 6E 6F  ert_order&billno
  06f0: 3D 50 5A 4B 31 31 30 31 26 70 61 79 6D 65 6E 74  =PZK1101&payment
  0700: 5F 69 64 3D 31 26 63 61 72 64 5F 6E 75 6D 62 65  _id=1&{\bf card_numbe}
  0710: XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX  {\bf r=4060xxxx413xxx}
  0720: 39 36 26 63 61 72 64 5F 65 78 70 5F 6D 6F 6E 74  {\bf 96&card_exp_mont}
  0730: 68 3D 30 32 26 63 61 72 64 5F 65 78 70 5F 79 65  {\bf h=02&card_exp_ye}
  0740: 61 72 3D 31 37 26 63 61 72 64 5F 63 76 6E 3D 31  {\bf ar=17&card_cvn=1}
  0750: 30 39 F8 6C 1B E5 72 CA 61 4D 06 4E B3 54 BC DA  {\bf 09}.l..r.aM.N.T..
\end{alltt}

\begin{list2}
\item Obtained using Heartbleed proof of concepts - Gave full credit card details
\item "can XXX be exploited" - yes, clearly! PoCs ARE needed\\
without PoCs even Akamai wouldn't have repaired completely!
\item The internet was ALMOST fooled into thinking getting private keys\\
 from Heartbleed was not possible - scary indeed.
\end{list2}


\slide{Analysis of the heartbleed bug}

\begin{list2}
\item analyse af problemet i koden\\
{\small\link{http://blog.existentialize.com/diagnosis-of-the-openssl-heartbleed-bug.html}} 
\item IDS regler Detecting OpenSSL Heartbleed with Suricata\\
{\small\link{http://blog.inliniac.net/2014/04/08/detecting-openssl-heartbleed-with-suricata/}} 
\item god beskrivelse af hvordan man kan fixe hurtigere hvis man har automatiseret infrastruktur\\\link{https://www.getpantheon.com/heartbleed-fix}

\item Mange blogindlæg om emnet - eksempelvis\\
{\small\link{http://blog.fox-it.com/2014/04/08/openssl-heartbleed-bug-live-blog/} }
 
\item "nse script ssl-heartbleed.nse committed to nmap as rev 32798. " 
\item You can now use Masscan to scan the whole internet for the Hearbleed vulnerability in under 6 minutes \link{https://twitter.com/jedisct1/status/453679529710460928}\\ og {\small\link{https://github.com/robertdavidgraham/masscan/commit/23497c448b0a1c7058e8443e5202e7bffcab4795}}
\end{list2}

\slide{Moloch}

\hlkimage{20cm}{moloch-sessions.png}

Picture from \link{https://github.com/aol/moloch}

% Suricata, Logstash, Elasticsearch, D3JShttp://d3js.org/
\slide{Suricata with Dashboards}

\hlkimage{12cm}{kibana-suricata.png}

Picture from Twitter\\
\link{https://twitter.com/nullthreat/status/445969209840128000}\\

New link March 2014: 10Gbits\\
{\small\link{http://pevma.blogspot.se/2014/03/suricata-prepearing-10gbps-network.html}}

\link{http://suricata-ids.org/2014/03/25/suricata-2-0-available/}


\slide{Security devops}

\begin{list1}
\item We need devops skillz in security
\item automate, security is also big data
\item integrate tools, transfer, sort, search, pattern matching, statistics, ...
\item tools, languages, databases, protocols, data formats
\item Example introductions:
\begin{list2}
\item Seven languages/database/web frameworks in Seven Weeks
\item Elasticsearch the definitive guide\\
\link{http://www.elasticsearch.org/guide/en/elasticsearch/guide/current/index.html}
\item \link{http://www.elasticsearch.org/overview/kibana/}
\item \link{http://www.elasticsearch.org/overview/logstash/}
\end{list2}
\end{list1}

\centerline{We are all Devops now, even security people!}



\slide{Network Security Through Data Analysis}

\hlkimage{8cm}{network-security-through-data-analysis.png}

Low page count, but high value! Recommended.

Network Security Through Data Analysis: Building Situational Awareness\\
By Michael Collins\\
Publisher: O'Reilly Media
Released: February 2014 Pages: 348


\slide{Security Onion}

\hlkimage{12cm}{security-onion.png}
\begin{list2}
\item Security Onion is a Linux distro for IDS, NSM, and log management
\item \link{securityonion.blogspot.dk}
\item \link{http://blog.securityonion.net/p/securityonion.html}
\end{list2}


\slide{Afbalanceret sikkerhed}

\hlkimage{21cm}{afbalanceret-sikkerhed.pdf}

\begin{list1}
\item Det er bedre at have et ensartet niveau
\item Hvor rammer angreb hvis du har Fort Knox et sted og kaos andre steder
\item Hackere vælger ikke med vilje den sværeste vej ind
\end{list1}


\slide{Defense in depth - multiple layers of security}

\hlkimage{23cm}{network-layers-1.pdf}

\slide{Quick conclusions}

\begin{list2}
\item 100.000vis af servere er sårbare overfor dette, se blandt andet listerne på\\ \link{https://github.com/musalbas/heartbleed-masstest}
\item Store sites som Yahoo.com, Flickr, FBI osv. er ramt
\item Har du haft en server som var sårbar bør du skifte private key på SSL og få et nyt certifikat\\
NB: reklame konkurrencedygtige priser på https://www.digitaltcertifikat.dk/ potentielt sparer du 10.000vis af kroner! 
\item NB: med DNSSEC/DANE implementeret ville det kun koste dine egne ressourcer at skifte certs!
\item I Norge er der aktiv scanning igang og både HTTPS sites og mail servere har været ramt, dagens stat siger (tweet ca kl 8) "I've now completed checking STARTTLS mail servers: 11\% still vulnerable." https://twitter.com/einaros/status/453773598172663808 
\item Yes, OpenSSL has lots of problems
\end{list2}

\slide{Heartbleed Conclusions}

\begin{list1}
\item Nothing new, but more focus on problems?\\
Really is there something new in this?
\item Software has bugs - stay vigilant, implement defense in depth
\item Software need funding - especially software used in our critical systems
\item Security needs proof of concepts and open communication\\
Akamai fix that wasn't good enough!
\end{list1}

\vskip 2cm

\centerline{TL;DR Fund more security audits, stop using untested/unaudited software}

\slide{Audits}

\hlkimage{10cm}{crypto-cat.png}
\begin{list1}
\item Truecrypt audit\\
{\footnotesize\link{https://isecpartners.github.io/news/2014/04/14/iSEC-Completes-Truecrypt-Audit.html}}
\item Cryptocat audit\\
{\footnotesize\link{https://blog.crypto.cat/2013/02/cryptocat-passes-security-audit-with-flying-colors/}}
\end{list1}

\slide{Compare SSL}

\begin{alltt}
  /* Read type and payload length first */
    if (1 + 2 + 16 > s->s3->rrec.length)
        return 0; /* silently discard */
    hbtype = *p++;
    n2s(p, payload);
    if (1 + 2 + payload + 16 > s->s3->rrec.length)
        return 0; /* silently discard per RFC 6520 sec. 4 */
    pl = p;
\end{alltt}

\begin{list1}
\item Ditch OpenSSL - write our own?
\item SSL implementations compared - above code from OpenSSL copied from this:\\
\link{http://tstarling.com/blog/2014/04/ssl-implementations-compared/}
\item LibreSSL announced, OpenBSD people\\
 \link{http://www.libressl.org/} and \link{http://opensslrampage.org/}
\end{list1}

\slide{Udviklingsstandarder}

\begin{list1}
\item Hvad gør I for at undgå problemer som de her nævnte?
- kan man gøre mere?
\item Man børe være klar over hvilke teknologier man bruger
\item Standardiser på et mindre antal produkter, biblioteker, sprog
\item Regler og procedurer skal hele tiden opdateres:
\begin{list2}
\item Kvalitetssikring - høj kvalitet er generelt mere sikker
\end{list2}

\item Ved at fokusere på antallet af produkter kan man måske
  indskrænke mulighederne for fejl, høj kvalitet er ofte mere sikkert

\item {\bf nye produkter kan være farlige til man lærer dem at kende!}
\end{list1}


\slide{Deadly sins bogen}

\hlkimage{8cm}{24-deadly.jpg}

\begin{list1}
\item \emph{24 Deadly Sins of Software Security} 
Michael Howard, David LeBlanc, John Viega 2. udgave, første hed 19 Deadly Sins
\end{list1}

\slide{OWASP top ten}

\hlkimage{16cm}{owasp.jpg}

\begin{quote}
The OWASP Top Ten provides a minimum standard for web application
security. The OWASP Top Ten represents a broad consensus about what
the most critical web application security flaws are.  
\end{quote}

\begin{list1}
\item The Open Web Application Security Project (OWASP) 
\item OWASP har gennem flere år udgivet en liste over de 10 vigtigste
  sikkerhedsproblemer for webapplikationer  
\item \link{http://www.owasp.org}
\end{list1}

\slide{OWASP WebGoat}

\hlkimage{14cm}{WebGoat.png}

\begin{list1}
\item WebGoat fra OWASP, \link{http://www.owasp.org}
\item Træningsmiljø til webhacking
\item Downloades som Zipfil og kan afvikles direkte på en Windows laptop
\end{list1}

\link{https://www.owasp.org}

\slide{WebGoat overview}

\hlkimage{17cm}{WebGoat-overview.png}

\centerline{Perfect for learning web hacking/protection}

\slide{Følg med Twitter news}

%\hlkimage{18cm}{twitter-security-feed.png}
\hlkimage{10cm}{twitter-safety.png}

\begin{list1}
\item Twitter has become an important new resource for lots of stuff
\item Twitter has replaced RSS for me 
\end{list1}


\slide{Be careful - spørgsmål?}

\hlkimage{5cm}{michael-conrad.jpg}
\centerline{\Large Hey, Lets be careful out there!}
\vskip 2 cm

\begin{center}
\myname

%\myweb
\end{center}

\vskip 2cm
Billede: Michael Conrad \link{http://www.hillstreetblues.tv/}

\slide{VikingScan.org - free portscanning}

\hlkimage{18cm}{vikingscan.png}
%\vskip 1cm 
%\centerline{\link{http://www.vikingscan.org}}


\end{document}
\input{references.tex}

