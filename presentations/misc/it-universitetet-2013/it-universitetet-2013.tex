\documentclass[20pt,landscape,a4paper,footrule]{foils}
\usepackage{solido-network-slides}
\usepackage{pdf14}
%\usepackage{ulem}

% Basic things that we need are below
\selectlanguage{danish}

%\externaldocument{unix-audit-security-oevelser}
\externaldocument{\jobname-exercises}


%\slide{Pause}
%Er det tid til en lille pause?
%\hlkimage{15cm}{300px-Fozziecurtain.JPG}

% Der fokuseres på hacking/kompromittering i statsskala. 
% Først gennemgås teknik og baggrund, inden der demonstreres små hands on-eksempler. 
% Stikord er: kryptering, bagdøre, hackerangreb og 0-days. Så kom og få praktiske eksempler på, hvordan du bedre beskytter dig og værktøjer til at teste IT-sikkerheden hos dig selv. 

\begin{document}

\mytitlepage
{Paranoia and government hacking}{ IT-Universitetet 2013}
\vskip 1 cm


%\hlkprofil




\slide{Agenda and goal - workshop}

\begin{list1}
\item Kl 16:00-18:00
\item Paranoia defined
\item Hacker tools
\item Attacks tools
%\item Cryptographic protection
\end{list1}

Key words: crypto, back doors, hacker attacks, and hacker tools, \\
what are 0-days - and how to protect yourself


\slide{Bjarne Jess Hansen - Vi voksne kan også være bange}

\hlkimage{17cm}{voksne-bange.png}

\link{https://www.youtube.com/watch?v=ApRPz9FzkQM}

Kilde: teksten fundet på\\
\link{http://www.fredsakademiet.dk/abase/sange/sang29.htm}


\slide{Syria: Protest singer Ibrahim Kashoush had his throat cut}

\begin{quote}
Four days later, his body was found dumped in the Assi River (also spelled: Isa River), with a big, open and bloody wound in his neck where his adam's apple and voice chord had been removed. A clear message to those who dare to raise their voice against the Syrian President Bashar al-Assad.
\end{quote}

'Yalla Erhal Ya Bashar' (It's time to leave, Bashar), demanding an end to President Bashar al-Assads regime.

\link{https://www.youtube.com/watch?v=nox6sVyhBYk}\\
\link{http://freemuse.org/archives/5054}


\slide{Formål: Hvorfor gør vi det her?}

\hlkimage{22cm}{jacob-appelbaum.png}

Et demokrati fordrer borgere med frihed som har evnen til at tage beslutninger uden konstant at være overvåget.

Et demokrati fordrer borgere som aktivt vælger hvornår de afgiver personlige data om deres liv og færden og
{\bf kryptografi er en fredelig protest mod indsamling at data.}

\slide{Indsamlede data vil altid blive misbrugt}

\hlkimage{10cm}{homer-end-is-near.jpg}

Data som indsamles {\bf bliver misbrugt} enten til kriminelle formål, kommercielle formål uanset oprindelige formål med indsamlingen - under dække af beskyttelse mod terror, ekstremisme, nazisme, misbrug af børn, ... Le mal du jour / dagens onde.

Derudover stalking, ekskærester, arbejdsgivere, forældre, ...

\vskip 1 cm
\centerline{\Large Du bestemmer - det er demokrati}




\slide{Rejsen starter}

Hvor skal vi nu starte denne rejse?

\hlkimage{4cm}{network-security-book-perlman9780137155880_s.jpeg}
\centerline{Private Communications in an Public World}

Anbefalelsesværdig bog som gennemgår grundlaget for kryptering, teknikker og protokollerne der bruges på internet idag, herunder: IPsec, SSL/TLS, PGP, PKI, AES m.fl.

\vskip 1cm
\centerline{Vi troede krypto kunne hjælpe os med næsten alle problemer ...}






\slide{Why think of security?}

\hlkimage{8cm}{1984-not-instruction-manual.jpg}


\begin{quote}
	Privacy is necessary for an open society in the electronic age. Privacy is not secrecy. A private matter is something one doesn't want the whole world to know, but a secret matter is something one doesn't want anybody to know. Privacy is the power to selectively reveal oneself to the world. ~A Cypherpunk's Manifesto by Eric Hughes, 1993
\end{quote}

Copied from \link{https://cryptoparty.org/wiki/CryptoParty}


\slide{Security is not magic}

%\vskip 2cm

\hlkimage{4cm}{wizard_in_blue_hat.png}

\hlkrightimage{5cm}{003scawebgoshindomanicon.png}
.
%{\large Superheltegerninger}

\begin{list1}
\item Think security, it may seem like magic - but it is not
\item Follow news about security
\item Support communities, join and learn
\end{list1}


\slide{Part I: Paranoia defined}

\hlkimage{15cm}{paranoia-definition.png}

Source: google paranoia definition

\slide{Face reality}

From the definition:
\begin{quote}
suspicion and mistrust of people or their actions {\bf without evidence or justification}.
{\bf "the global paranoia about hackers and viruses"}
\end{quote}

\begin{list1}
\item It is not paranoia when:
\begin{list2}
\item Criminals sell your credit card information and identity theft
\item Trade infected computers like a commodity
\item Governments write laws that allows them to introduce back-doors - and use these
\item Governments do blanket surveillance of their population
\item Governments implement censorship, threaten citizens and journalist
\end{list2}
\end{list1}

\vskip 1cm
\centerline{You are not paranoid when there are people actively attacking you!}


\slide{Government back-doors}

What if I told you:

{\Large \bf Governments will introduce back-doors}


\begin{list1}
\item Intercepting encrypted communications with fake certificates - check
\item May 5, 2011 A Syrian Man-In-The-Middle Attack against Facebook\\
"Yesterday we learned of reports that the Syrian Telecom Ministry had launched a man-in-the-middle attack against the HTTPS version of the Facebook site."\\
{\small Source:\\
\link{https://www.eff.org/deeplinks/2011/05/syrian-man-middle-against-facebook}}
\item Mapping out social media and finding connections - check
\item Creating fake certificates and intercepting social media sites - check
\item Checking porno preferences, for later intimidation - check
\item Too many things to list them here! \link{http://cryptome.org/}
\end{list1}



\slide{Infecting activist machines}
\begin{list1}
\item Infecting activist machines - check
\item Tibet activists are repeatedly being targeted with virus and malware, such as malicious apps for Android like KakaoTalk
% http://www.scmagazine.com/android-malware-targeting-tibetans-has-state-sponsored-fingerprints/article/287219/#
% http://www.scmagazine.com//trojan-targets-tibetan-activist-groups-that-use-macs/article/234132/
\item Tor-users infected with malicious code to reveal their real IPs\\
{\footnotesize\link{https://blog.torproject.org/blog/hidden-services-current-events-and-freedom-hosting}}
\item Copying journalist data in airports - check
\end{list1}

\vskip 2cm
\centerline{\Large Do you believe in democracy - you are the enemy of the state}



\slide{Government backdoors is not news}

\hlkimage{12cm}{nation-of-sheep.jpg}

\begin{list1}
\item Nothing new really, see for example D.I.R.T and Magic Lantern
\item D.I.R.T - Data Interception by Remote Transmission since the late 1990s\\
\link{http://cryptome.org/fbi-dirt.htm}\\
\link{http://cryptome.org/dirty-secrets2.htm}

\item They will always use \emph{Le mal du jour} to increase monitoring
\end{list1}

\slide{Government monitoring is not news}

\begin{list1}
\item FBI Carnivore\\
"... that was designed to monitor email and electronic communications. It used a customizable packet sniffer that can monitor all of a target user's Internet traffic."
\link{http://en.wikipedia.org/wiki/Carnivore_(software)}

\item NarusInsight
"Narus provided Egypt Telecom with Deep Packet Inspection equipment, a content-filtering technology that allows network managers to inspect, track and target content from users of the Internet and mobile phones, as it passes through routers on the information superhighway. Other Narus global customers include the national telecommunications authorities in Pakistan and Saudi Arabia, ..."\\
\link{http://en.wikipedia.org/wiki/NarusInsight}

\end{list1}

\slide{Denmark}

\begin{list1}
\item Even Denmark which is considered a peaceful democracy has allowed this to go TO FAR
\item Danish police and TAX authorities have the legals means, even for small tax-avoidance cases, see \emph{Rockerloven}
\item Danish TAX authorities have legal means to go into your property to catch builders working for cash and not reporting tax income
\item In both criminal and piracy cases we see a lot of extraneous equipment seized 
\item Danish prime minister Helle Thorning-Schmidt does NOT criticize the USA
\item In fact the party Social Democrats are often pushing further surveillance 
\end{list1}


\slide{Use protection - always}

\hlkimage{14cm}{protect-from-governments.jpg}
%{\LARGE Protecting yourself against criminals or the government is the same thing!}

\slide{A vulnerability can and will be abused}

What if I told you:

{\Large \bf Criminals will be happy to leverage backdoors created by government}

It does not matter if the crypto product has a weakness to allow investigations or the software has a backdoor to help law enforcement. Data and vulnerabilities WILL be abused and exploited.



\slide{Hacker types anno 1995}

\hlkimage{10cm}{hackers_JOLIE+1995.jpg}

\centerline{Lets go back to hacking}

\slide{Hacker types anno 2008}
\hlkimage{10cm}{lisbeth-salander.jpeg}

\begin{list1}
\item Lisbeth Salander from the Stieg Larsson's award-winning Millennium series
does research about people using hacking as a method to gain access
\item How can you find information about people?
\end{list1}

\slide{From search patterns to persons}

\begin{list1}
\item First identify some basic information
\item Use search patterns like from email to full name
\item Some will give direct information about target
\item Others will point to intermediary information, domain names
\item Pivot and redo searching when new information bits are found
\item What information is public? (googledorks!)
\end{list1}

\slide{Example patterns - for a Dane}

\begin{list1}
\item Name, fullname, aliases
\item IDs and membership information, CPR (kind a like social security number)
\item Computerrelated information: IP, Whois, Handles, IRC nicks
\item Nick names
\item Writing style, specific use of words, common speling mistakes
\item Be creative
\end{list1}


\slide{Google for it}

\hlkimage{16cm}{images/googledorks-1.pdf}

\begin{list1}
\item Google as a hacker tools?
\item Concept named googledorks when google indexes information not supposed to be public
\link{http://johnny.ihackstuff.com/}
\end{list1}

\slide{Lisbeth in a box?}

\hlkimage{17cm}{maltego-1.png}

%\hlkimage{17cm}{Paterva_network_small.png}
Maltego can automate the mining and gathering of information\\
uses the concept of transformations\\ \link{http://www.paterva.com/maltego/}

\slide{Hvordan bliver du sikker} 

\begin{list1}
\item Lad være med at bruge computere
\item Lad være med at bruge een computer til alt\\
- en privat bærbar ER mere privat end en firmacomputer

\item Brug en sikker konfiguration, minimumskonfiguration
\item Brug sikre protokoller, kryptering: SSH, IMAPS, POP3S, OpenPGP, HTTPS, Tor
\item Opsætning af netværk, hvordan? Security Configuration Guides + paranoia
\begin{list2}
\item \link{http://csrc.nist.gov/publications/PubsSPs.html}
\item \link{http://www.nsa.gov/research/publications/index.shtml}
\item \link{http://www.nsa.gov/ia/guidance/security_configuration_guides/index.shtml}
\end{list2}
\end{list1}



\slide{Ånden til at hacke}

\hlkimage{4cm}{dont-panic.png}
\centerline{\color{titlecolor}\LARGE Don't Panic!}


Hacking betyder idag indbrud, kriminalitet, hærværk m.v.

Oprindeligt betød hacking at man udforskede, undersøgte, involverede sig

Vi skal bruge ånden fra hacking til forskning, udvikling

Mange regler om at man ikke må noget er imod hacking.

\vskip 1cm
\centerline{Lad være med at bryde love, men bøj gerne regler \smiley }




\slide{Hackerværktøjer}
% måske til reference afsnit?
\hlkimage{3cm}{hackers_JOLIE+1995.jpg}

\begin{list2}
\item Nmap, Nping - tester porte, godt til firewall admins \link{http://nmap.org}
\item Metasploit Framework gratis på \link{http://www.metasploit.com/}
\item Wireshark avanceret netværkssniffer - \link{http://http://www.wireshark.org/} 
%\item Paros proxy \link{http://www.parosproxy.org}
\item Burpsuite \link{http://portswigger.net/burp/}
\item Skipfish \link{http://code.google.com/p/skipfish/}
\item OpenBSD operativsystem med fokus
  på sikkerhed  \link{http://www.openbsd.org} 
\end{list2}

Kilde: Angelina Jolie fra Hackers 1995

\slide{Kali Linux the new backtrack}

\hlkimage{20cm}{kali-linux.png}

\begin{list1}
\item BackTrack \link{http://www.backtrack-linux.org}
\item Kali \link{http://www.kali.org/}
\item Wireshark - \link{http://www.wireshark.org} avanceret netværkssniffer
\end{list1}


\slide{Wireshark - grafisk pakkesniffer}

\hlkimage{20cm}{images/wireshark-website.png} 

\centerline{\link{http://www.wireshark.org}}
\centerline{både til Windows og UNIX, tidligere kendt som Ethereal}


\slide{Brug af Wireshark}

\hlkimage{13cm}{images/ethereal-capture-options.png}

\centerline{Man starter med Capture - Options}

\slide{Brug af Wireshark}

\hlkimage{24cm}{images/ethereal-main-window.png}

\centerline{Læg mærke til filtermulighederne}



\slide{Wall of sheep}

\hlkimage{16cm}{wall-of-sheep-defcon.jpg}

\begin{center}
Defcon Wall of Sheep - play nice!\\
Husk nu at vi er venner her! - idag er det kun teknikken
\end{center}


\exercise{ex:wireshark}

\exercise{ex:wireshark-sniff}



\slide{Cain \& Abel}

%\hlkimage{10cm}{cain_brute_attack.jpg}
\hlkimage{20cm}{cain-win.png}

\centerline{sniff, crack and hack \link{http://www.oxid.it}}


\slide{John the ripper}

\begin{quote}
John the Ripper is a fast password cracker, currently available for
many flavors of Unix (11 are officially supported, not counting
different architectures), Windows, DOS, BeOS, and OpenVMS. Its primary
purpose is to detect weak Unix passwords. Besides several crypt(3)
password hash types most commonly found on various Unix flavors,
supported out of the box are Kerberos AFS and Windows NT/2000/XP/2003
LM hashes, plus several more with contributed patches.   
\end{quote}

\begin{list1}
\item UNIX passwords kan knækkes med alec Muffets kendte Crack program
  eller eksempelvis John The Ripper \link{http://www.openwall.com/john/}  
\item Jeg bruger selv John The Ripper
\end{list1}




\slide{Suricata IDS/IPS/NSM}
\hlkimage{8cm}{suricata.png}

\begin{quote}
Suricata is a high performance Network IDS, IPS and Network Security Monitoring engine. Open Source and owned by a community run non-profit foundation, the Open Information Security Foundation (OISF). Suricata is developed by the OISF and its supporting vendors.
\end{quote}

\begin{list2}
\item \link{http://suricata-ids.org/}
\item \link{http://openinfosecfoundation.org}
\end{list2}

\slide{Netflow}

\begin{slidelist}
\item Netflow is getting more important, more data share the same links
\item Accounting is important
\item Detecting DoS/DDoS and problems is essential
\item Netflow sampling is vital information - 123Mbit, but what kind of traffic 
\item We use mostly NFSen, but are looking at various software packages
\link{http://nfsen.sourceforge.net/}
\item Currently also investigating sFlow - hopefully more fine grained
\end{slidelist}

\slide{Netflow using NFSen}

\hlkimage{16cm}{images/nfsen-overview.png}



\slide{Netflow processing from the web interface}

\hlkimage{16cm}{images/nfsen-processing-1.png}

\centerline{Bringing the power of the command line forward}




\slide{Part II: threats and crypto tools}

Hackers do not discriminate

\begin{list1}
\item We have seen lots of hacker stories, and we learn:
\item We are all targets of hacking
\item Social Engineering rockz! Phishing works.
\item Anyone can be hacked - resources used to protect vs attackers resources
\end{list1}

\vskip 2cm
\centerline{\LARGE \bf Hacking is not cool}


\slide{Good security}

\hlkimage{15cm}{god-sikkerhed.pdf}

\begin{list1}
\item You always have limited resources for protection - use them as best as possible
\end{list1}


\slide{First advice}

\begin{list1}
\item Use technology
\item Learn the technology - read the freaking manual
\item Think about the data you have, upload, facebook license?! WTF!
\item Think about the data you create - nude pictures taken, where will they show up?
\begin{list2}
\item Turn off features you don't use
\item Turn off network connections when not in use
\item Update software and applications
\item Turn on encryption: IMAP{\bf S}, POP3{\bf S},
  HTTP{\bf S} also for data at rest, full disk encryption, tablet encryption
\item Lock devices automatically when not used for 10 minutes
\item Dont trust fancy logins like fingerprint scanner or face recognition on cheap devices
\end{list2}
\end{list1}


\slide{First advice use the modern operating systems}

\begin{list1}
\item Newer versions of Microsoft Windows, Mac OS X and Linux
\begin{list2}
\item Buffer overflow protection
\item Stack protection, non-executable stack
\item Heap protection, non-executable heap
\item \emph{Randomization of parameters} stack gap m.v.
\end{list2}
\item Note: these still have errors and bugs, but are better than older versions
\item OpenBSD has shown the way in many cases\\ \link{http://www.openbsd.org/papers/}
\end{list1}

\vskip 1cm

\centerline{Always try to make life worse and more costly for attackers}

\slide{Defense in depth}

\hlkimage{8cm}{security-layers-1-uk.pdf}

\centerline{\hlkbig\color{solido-orange} Defense using multiple layers is stronger!}


\slide{Kryptografi}

\hlkimage{18cm}{images/crypto-rot13.pdf}

\begin{list1}
\item Kryptografi er læren om, hvordan man kan kryptere data
\item Kryptografi benytter algoritmer som sammen med nøgler giver en
  ciffertekst - der kun kan læses ved hjælp af den tilhørende nøgle
\end{list1}

\slide{Public key kryptografi - 1}

\hlkimage{18cm}{images/crypto-public-key.pdf}

\begin{list1}
\item privat-nøgle kryptografi (eksempelvis AES) benyttes den samme
  nøgle til kryptering og dekryptering 
\item offentlig-nøgle kryptografi (eksempelvis RSA) benytter to
  separate nøgler til kryptering og dekryptering
\end{list1}

\slide{Public key kryptografi - 2}

\hlkimage{18cm}{images/crypto-public-key-2.pdf}

\begin{list1}
\item offentlig-nøgle kryptografi (eksempelvis RSA) bruger den private
  nøgle til at dekryptere
\item man kan ligeledes bruge offentlig-nøgle kryptografi til at
  signere dokumenter - som så verificeres med den offentlige nøgle
\end{list1}



\slide{Kryptografiske principper}

\begin{list1}
\item Algoritmerne er kendte
\item Nøglerne er hemmelige
\item Nøgler har en vis levetid - de skal skiftes ofte
\item Et successfuldt angreb på en krypto-algoritme er enhver genvej
  som kræver mindre arbejde end en gennemgang af alle nøglerne 
\item Nye algoritmer, programmer, protokoller m.v. skal gennemgås nøje!
\item Se evt. Snake Oil Warning Signs:
Encryption Software to Avoid\\ 
\link{http://www.interhack.net/people/cmcurtin/snake-oil-faq.html}
\end{list1}

\slide{Kryptering}

Formålet med kryptering

\vskip 3 cm
\centerline{\hlkbig kryptering er den eneste måde at sikre:}
\vskip 3 cm
\centerline{\hlkbig fortrolighed}
\vskip 3 cm
\centerline{\hlkbig autenticitet / integritet}




\slide{DES, Triple DES og AES}

\hlkimage{15cm}{images/AES_head.png}

\begin{list1}
\item DES kryptering baseret på den IBM udviklede Lucifer algoritme
  har været benyttet gennem mange år. 
\item Der er vedtaget en ny standard algoritme Advanced Encryption
  Standard (AES) som afløser Data Encryption Standard (DES)
\item Algoritmen hedder Rijndael og er udviklet
af Joan Daemen og Vincent Rijmen.
%\item \emph{Rijndael is available for free. You can use it for
%whatever purposes  you want, irrespective of whether
%it is accepted as AES or not.}

\item \link{http://www.cs.bc.edu/~straubin/cs381-05/blockciphers/rijndael_ingles2004.swf?utm_content=bufferfabef&utm_source=buffer&utm_medium=twitter&utm_campaign=Buffer}
%\link{http://en.wikipedia.org/wiki/Advanced_Encryption_Standard}\\
%\link{http://csrc.nist.gov/encryption/aes/}
\end{list1}


\slide{hashing algoritmer}

\begin{quote}
NIST announced a public competition in a Federal Register Notice on November 2, 2007 to develop a new cryptographic hash algorithm called SHA-3. The competition is NIST's response to advances made in the cryptanalysis of hash algorithms.

...

Based on the public comments and internal review of the candidates, NIST announced {\bf Keccak} as the winner of the SHA-3 Cryptographic Hash Algorithm Competition on October 2, 2012, and ended the five-year competition.
\end{quote}

\link{http://csrc.nist.gov/groups/ST/hash/sha-3/index.html}

\slide{Cryptography Engineering}

\hlkimage{8cm}{book-ce-150w.jpg}

\emph{Cryptography Engineering} by
Niels Ferguson, Bruce Schneier, and Tadayoshi Kohno

\link{https://www.schneier.com/book-ce.html}


\slide{Sikre protokoller som bruger crypto}

\begin{list1}
\item Kryptering af e-mail
\begin{list2}
\item Pretty Good Privacy - Phil Zimmermann
\item PGP = mail sikkerhed
\end{list2}
\item Kryptering af sessioner SSL/TLS
\begin{list2}
\item Secure Sockets Layer SSL / Transport Layer Services TLS
\item krypterer data der sendes mellem webservere og klienter
\item SSL kan bruges generelt til mange typer sessioner, eksempelvis
  POP3S, IMAPS, SSH m.fl.
\end{list2}
\item Kryptering af netværkstrafik - Virtual Private Networks VPN
\begin{list2}
\item VPN {\color{green}IPsec IP Security Framework, se også L2TP}
\item VPN {\color{red} PPTP Point to Point Tunneling Protocol - dårlig og usikker, brug den ikke mere!}
\item SSL VPN, OpenVPN m.fl.
\end{list2}
\end{list1}

\slide{SSL og TLS}

\hlkimage{14cm}{ehandel-https.pdf}

\begin{list1}
\item Oprindeligt udviklet af Netscape Communications Inc.
\item Secure Sockets Layer SSL er idag blevet adopteret af IETF og kaldes
derfor også for Transport Layer Security TLS
TLS er baseret på SSL Version 3.0
\item RFC-2246 The TLS Protocol Version 1.0 fra Januar 1999
\end{list1}

\slide{SSL/TLS udgaver af protokoller}
\hlkimage{16cm}{imap-ssl.png}

\begin{list1}
\item Mange protokoller findes i udgaver hvor der benyttes SSL
\item HTTPS vs HTTP
\item IMAPS, POP3S, osv.
\item Bemærk: nogle protokoller benytter to porte IMAP 143/tcp vs IMAPS 993/tcp
\item Andre benytter den samme port men en kommando som starter:
\item SMTP STARTTLS RFC-3207
\end{list1}



\slide{Secure Shell - SSH og SCP}

%\begin{center}
%\colorbox{white}{\includegraphics[width=12cm]{images/tshirt-9b.jpg}}  
%\end{center}

\hlkimage{16cm}{images/openssh-banner.png}

\begin{list1}
\item Hvad er Secure Shell SSH?  
\item Oprindeligt udviklet af Tatu YlÃ¶nen i Finland,\\
se \link{http://www.ssh.com}
\item SSH afløser en række protokoller som er usikre:
  \begin{list2}
  \item Telnet til terminal adgang
  \item r* programmerne, rsh, rcp, rlogin, ...
  \item FTP med brugerid/password
  \end{list2}
\end{list1}


\slide{Do NOT USE FTP}
\begin{list1}
\item File Transfer Protocol - filoverførsler
\item FTP bruges især til:
  \begin{list2}
    \item FTP - drivere, dokumenter, rettelser - Windows Update? er
    enten HTTP eller FTP
\item Opdatering af websites
\item Overførsel af data mellem virksomheder
\item Serveren er indbygget i de fleste serveroperativsystemer
  \end{list2}
\item FTP sender i klartekst\\ 
{\bfseries USER brugernavn} og \\
{\bfseries PASS hemmeligt-kodeord} 
\end{list1}


\slide{FileZilla - understøtter SFTP}

\hlkimage{22cm}{filezilla.png}
\centerline{\link{http://filezilla-project.org/}}

\slide{VPN}

\hlkimage{12cm}{openvpn-gui-systray.png}

\begin{list1}
\item Virtual Private Networks are useful - or even required when travelling
\item VPN \link{http://en.wikipedia.org/wiki/Virtual_private_network}
\item SSL/TLS VPN - Multiple incompatible vendors: OpenVPN, Cisco, Juniper, F5 Big IP
\item IETF IPsec does work cross-vendors - sometimes, and is also increasingly becoming blocked or unusable due to NAT :-(
\end{list1}


\slide{Internet sniffing by government}

\begin{list1}
\item Ægypten, Sudan, Tunesien, ...
\item Den der kontrollerer ISPerne kontrollerer trafikken
\item Facebook revolutionerne
\item Blokering er umulig, men det forsøges
\item Spredning af falsk information
\item Diginotar Dutch Certificate Authority
\end{list1}

Kilde:
{\footnotesize\link{http://irevolution.net/2011/02/10/facebook-for-repressive-regimes/}}

\slide{HTTPS Everywhere}

\hlkimage{5cm}{HTTPS_Everywhere_new_logo.jpg}
\begin{quote}
HTTPS Everywhere is a Firefox extension produced as a collaboration between The Tor Project and the Electronic Frontier Foundation. It encrypts your communications with a number of major websites.
\end{quote}

\centerline{\link{http://www.eff.org/https-everywhere}}



\slide{CertPatrol - which site uses which certificate}


\hlkimage{13cm}{certificate-patrol-400x300.jpg}

\begin{quote}
An add-on formerly considered paranoid: CertPatrol implements ''pinning'' for Firefox/Mozilla/SeaMonkey roughly as now recommended in the User Interface Guidelines of the World Wide Web Consortium (W3C).
\end{quote}

\centerline{\link{http://patrol.psyced.org/}}


\slide{Convergence - who do you trust}

\hlkimage{21cm}{convergence.png}


\centerline{\link{http://convergence.io/}}
\vskip 1cm
\centerline{Warning: radical change to how certificates work}

\slide{DANE}

\begin{quote}
Objective:

Specify mechanisms and techniques that allow Internet applications to
establish cryptographically secured communications by using information
distributed through DNSSEC for discovering and authenticating public 
keys which are associated with a service located at a domain name.
\end{quote}

DNS-based Authentication of Named Entities (dane)\\
\link{https://datatracker.ietf.org/wg/dane/charter/}\\
{\footnotesize \link{http://googleonlinesecurity.blogspot.dk/2011/04/improving-ssl-certificate-security.html}}

\vskip 2cm

\centerline{\Large DNSSEC er ved at være godt udbredt - undtagen i DK}
(findes på .dk zonen, men næsten ingen resolvere)

\slide{Censurfridns.dk uncensoredDNS}

\link{http://www.censurfridns.dk}

\begin{alltt}
Velkommen til www.censurfridns.dk. 

Du er velkommen til at benytte:

ns1.censurfridns.dk / 89.233.43.71 / 2002:d596:2a92:1:71:53::
ns2.censurfridns.dk / 89.104.194.142 / 2002:5968:c28e::53
som DNS server for at undgå DNS censur.
Se venligst \link{blog.censurfridns.dk} for mere info.
\end{alltt}

\vskip 2cm

\centerline{\Large Det er uacceptabelt at pille ved DNS - punktum!}

PS nu også med DNS på port 5353

\slide{DNSSEC trigger}

\hlkimage{7cm}{dnssec-trigger.png}

Der findes mange DNSSEC programmer, blandt andet DNSSEC-trigger som er en navneserver til din lokale PC

\begin{list2}
\item DNSSEC Validator for firefox\\ \link{https://addons.mozilla.org/en-us/firefox/addon/dnssec-validator/}
\item OARC tools \link{https://www.dns-oarc.net/oarc/services/odvr}
\item \link{http://www.nlnetlabs.nl/projects/dnssec-trigger/}
\end{list2}



\slide{Tor project}

\hlkimage{21cm}{tor-project.png}

\centerline{\link{https://www.torproject.org/}}

Der findes alternativer, men Tor er mest kendt

\slide{Tor project - how it works 1}

\hlkimage{21cm}{how-tor-works-1.png}

\centerline{pictures from \link{https://www.torproject.org/about/overview.html.en}}

\slide{Tor project - how it works 2}

\hlkimage{21cm}{how-tor-works-2.png}

\centerline{pictures from \link{https://www.torproject.org/about/overview.html.en}}

\slide{Tor project - how it works 3}

\hlkimage{21cm}{how-tor-works-3.png}

\centerline{pictures from \link{https://www.torproject.org/about/overview.html.en}}

\slide{Tor project install}

\hlkimage{12cm}{tor-project.png}

Der findes diverse tools til Tor, Torbutton on/off knap til Firefox osv.

Det anbefales at bruge bundles fra \link{https://www.torproject.org/}

\slide{Whonix}

\hlkimage{17cm}{400px-Whonix.jpg}

\begin{quote}
Whonix is an operating system focused on anonymity, privacy and security. It's based on the Tor anonymity network[5], Debian GNU/Linux[6] and security by isolation. DNS leaks are impossible, and not even malware with root privileges can find out the user's real IP.
\end{quote}

\link{https://www.whonix.org/}

\slide{Bonus: brug Bitcoins?}


\hlkimage{17cm}{bitcoinnordic.png}


\slide{Part III: Mere Hacking, Hackerværktøjer}

\hlkimage{10cm}{buffer-overflow-3.pdf}
\centerline{Teknisk hvad er hacking - og værktøjer}

\centerline{Mere frit - vi undersøger diverse emner som hackere}



\slide{Målet for denne del}
\vskip 2 cm

\hlkimage{5cm}{dont-panic.png}
\centerline{\color{titlecolor}\LARGE Don't Panic!}

\begin{list1}
\item Introduce hacking and a couple of hacker tools
\item List some tools that can be used to protect your computer and data
\item PS Sorry about the many TLAs ... og danglish
\end{list1}

præsentationen er meget teknisk, men foredraget behøver ikke at blive det \smiley

\slide{Introduktion til hacking}

\hlkimage{10cm}{hackers_JOLIE+1995.jpg}

\centerline{\link{http://www.imdb.com/title/tt0113243/} Hackers (1995)}

\slide{Internet today}


\hlkimage{14cm}{images/server-client.pdf}

\begin{list1}
\item Clients and servers
\item Rooted in academic networks
\item Protocols which are more than 20 years old, moved to TCP/IP in 1981
\item Trying to migrate to IPv6 - a lot of hacking opportunities here
\end{list1}

\slide{Internet - Here be dragons}

\vskip 2cm
\hlkimage{24cm}{dragon-drawing-6.jpg}

\slide{Hacker - cracker}

{\bfseries Det korte svar - drop diskussionen}

%Det lidt længere svar:\\
Det havde oprindeligt en anden betydning, men medierne har taget
udtrykket til sig - og idag har det begge betydninger. 

{\color{red}\hlkbig Idag er en hacker stadig en der bryder ind i systemer!}

ref. Spafford, Cheswick, Garfinkel, Stoll, ...
- alle kendte navne indenfor sikkerhed


\begin{list2}
\item \emph{Cuckoo's Egg: Tracking a Spy Through the Maze of Computer
 Espionage},  Clifford Stoll  
\item \emph{Hackers: Heroes of the Computer Revolution},
Steven Levy
\item \emph{Practical Unix and Internet Security},
Simson Garfinkel, Gene Spafford, Alan Schwartz 
\end{list2}

\slide{Definition af hacking, oprindeligt}

\begin{quote}
Eric Raymond, der vedligeholder en ordbog over computer-slang (The Jargon File) har blandt andet følgende forklaringer på ordet hacker:
\begin{list2}
\item En person, der nyder at undersøge detaljer i programmerbare systemer og hvordan man udvider deres anvendelsesmuligheder i modsætning til de fleste brugere, der bare lærer det mest nødvendige
\item En som programmerer lidenskabligt (eller enddog fanatisk) eller en der foretrækker at programmere fremfor at teoretiserer om det
\item En ekspert i et bestemt program eller en der ofter arbejder med eller på det; som i "en Unixhacker".
\end{list2}
\end{quote}

\begin{list1}
\item Kilde: Peter Makholm, \link{http://hacking.dk}
\item Benyttes stadig i visse sammenhænge se \link{http://labitat.dk}
\end{list1}

\slide{Internet er åbne standarder!}

{\hlkbig 
We reject kings, presidents, and voting.\\
We believe in rough consensus and running code.\\
-- The IETF credo Dave Clark, 1992.}

\begin{list1}
\item Request for comments - RFC - er en serie af dokumenter
\item RFC, BCP, FYI, informational\\
de første stammer tilbage fra 1969
\item Ændres ikke, men får status Obsoleted når der udkommer en nyere
  version af en standard
\item Standards track:\\
Proposed Standard $\rightarrow$ Draft Standard $\rightarrow$ Standard
\item  Åbne standarder = åbenhed, ikke garanti for sikkerhed
\end{list1}

\slide{The Internet Worm 2. nov 1988}

\begin{list1}
\item Udnyttede følgende sårbarheder
\begin{list2}
\item buffer overflow i fingerd - VAX kode
\item  Sendmail - DEBUG
\item Tillid mellem systemer: rsh, rexec, ...
\item dårlige passwords
\end{list2}
\item Avanceret + camouflage!
\begin{list2}
\item Programnavnet sat til 'sh'
\item Brugte fork() til at skifte PID jævnligt
\item password cracking med intern liste med 432 ord og /usr/dict/words
\item Fandt systemer i /etc/hosts.equiv, .rhosts, .forward, netstat ...
\end{list2}
\item Lavet af Robert T. Morris, Jr. 
\item Medførte dannelsen af CERT, \link{http://www.cert.org}
\end{list1}






\slide{Aftale om test af netværk}

{\bfseries Straffelovens paragraf 263 Stk. 2. Med bøde eller fængsel
  indtil 6 måneder 
straffes den, som uberettiget skaffer sig adgang til en andens
oplysninger eller programmer, der er bestemt til at bruges i et anlæg
til elektronisk databehandling.}

Hacking kan betyde:
\begin{list2}
\item At man skal betale erstatning til personer eller virksomheder
\item At man får konfiskeret sit udstyr af politiet
\item At man, hvis man er over 15 år og bliver dømt for hacking, kan
  få en bøde - eller fængselsstraf i alvorlige tilfælde 
\item At man, hvis man er over 15 år og bliver dømt for hacking, får
en plettet straffeattest. Det kan give problemer, hvis man skal finde
et job eller hvis man skal rejse til visse lande, fx USA og
Australien
\item Frit efter: \link{http://www.stophacking.dk} lavet af Det
  Kriminalpræventive Råd 
\item Frygten for terror har forstærket ovenstående - så lad være!
\end{list2}





\slide{Hacking er magi}

\hlkimage{7cm}{wizard_in_blue_hat.png}

\vskip 1 cm

\centerline{Hacking ligner indimellem  magi}


\slide{Hacking er ikke magi}

\hlkimage{17cm}{ninjas.png}

\vskip 1 cm
\centerline{Hacking kræver blot lidt ninja-træning}





\slide{Hacking eksempel - det er ikke magi}

\begin{list1}
\item MAC filtrering på trådløse netværk
\item Alle netkort har en MAC adresse - BRÆNDT ind i kortet fra fabrikken
\item Mange trådløse Access Points kan filtrere MAC adresser
\item Kun kort som er på listen over godkendte adresser tillades adgang til netværket
\pause
\item Det virker dog ikke \smiley
\item De fleste netkort tillader at man overskriver denne adresse midlertidigt
%\item Derudover har der ofte været fejl i implementeringen af MAC filtrering
\end{list1}

\slide{Myten om MAC filtrering}

\begin{list1}
\item Eksemplet med MAC filtrering er en af de mange myter 
\item Hvorfor sker det?
\item Marketing - producenterne sætter store mærkater på æskerne
\item Manglende indsigt - forbrugerne kender reelt ikke koncepterne
\item Hvad \emph{er} en MAC adresse egentlig
\item Relativt få har forudsætningerne for at gennemskue dårlig sikkerhed
\item Løsninger?
\pause
\item Udbrede viden om usikre metoder til at sikre data og computere
\item Udbrede viden om sikre metoder til at sikre data og computere
\end{list1}

\slide{MAC filtrering}

\hlkimage{15cm}{stupid-security.jpg}





\slide{buffer overflows is a C problem}

\begin{list1}
\item {\bfseries Et buffer overflow}
is what happens if some internal structure in programs are modified by an attacker for the purpose 
of taking control of the application and system. Often a program will crash, but if the attacker can input specific data it might be possible to point to their own {\bf shell code} containing instructions to be executed.
\item {\bfseries Stack protection} today both a specific technique and generic term for 
adding protection to operating systems and programs to reduce the likelihood of buffer overflows succeeding. The main features are protecting areas in memory by making them non-writeable and non-executable. StackGuard
and Propolice are some popular choices
\end{list1}


\slide{Buffer og stacks}

\hlkimage{20cm}{buffer-overflow-1.pdf}

\begin{alltt}
main(int argc, char **argv)
\{      char buf[200];
        strcpy(buf, argv[1]); 
        printf("%s\textbackslash{}n",buf);
\}
\end{alltt}


\slide{Overflow - segmentation fault }

\hlkimage{20cm}{buffer-overflow-2.pdf}


\begin{list1}
\item Bad function overwrites return value!
\item Control return address
\item Run shellcode from buffer, or from other place
\end{list1}


\slide{Exploits - exploiting vulnerabilities}

\begin{list1}
\item an exploit is a program designed to abuse some weakness or vulnerability
\begin{list2}
\item Usually the expliot will demonstrate the weakness found, proof-of-concept (PoC)
\item Usually the exploit will only include one vulnerability and is targeted at specific versions of the vulnerable program
\item Exploits can be a few lines of code or multiple pages
\item Used to be written using Perl and C, but today popular choices include Ruby and Python
\item Can often be plugged into the Metasploit framework for direct execution
\end{list2}
\end{list1}


\slide{Exploit sample}

\vskip 1 cm

\begin{alltt}
$buffer = ""; 
$null = "\textbackslash{}x00"; \pause
$nop = "\textbackslash{}x90"; 
$nopsize = 1; \pause
$len = 201; // what is needed to overflow, maybe 201, maybe more!
$the_shell_pointer = 0xdeadbeef; // address where shellcode is 
# Fill buffer
for ($i = 1; $i < $len;$i += $nopsize) \{
    $buffer .= $nop;
\}\pause
$address = pack('l', $the_shell_pointer);
$buffer .= $address;\pause
exec "$program", "$buffer";
\end{alltt}
\vskip 1 cm
\centerline{Demo exploit in Perl}
%Eksempel på webserver buffer overflow, nosejob?


\slide{Matrix style hacking anno 2003}

\hlkimage{17cm}{trinity-hacking-hd-cropscale-302x250.jpg}

\slide{Trinity breaking in}

\hlkimage{20cm}{trinity-nmapscreen-hd-cropscale-418x250.jpg}
\link{http://nmap.org/movies.html}\\
Meget realistisk \link{http://www.youtube.com/watch?v=51lGCTgqE_w}



\slide{Principle of least privilege}

\begin{list1}
\item Why execute applications with administrative rights - if they only need to read from a database
\item {\bfseries principle of least privilege} 
execute code only with the most restrictive set of permissions required to perform a task
\end{list1}

\slide{Privilege escalation}
\begin{list1}
\item {\bfseries privilege escalation} is what an attacker aims to perform
\item Trying to get from an authenticated user to a higher privileged administrative user id
\item Some functions in operating systems require higher privileges, and they can sometimes be persuaded to fail in spectacular ways
\item When an attacker can execute commands they can often find a way to exploit software and escalate privileges
\end{list1}


\slide{local vs. remote exploits}

\begin{list1} 
\item {\bfseries local vs. remote}
signifies if the specific attack exploited is done from the operating system using a local command/feature or if this is done remotely across some network connection
\item {\bfseries remote root exploit} 
- feared because it would grant administrative rights across a network connection
\item More often an attacker will combine a remote exploit with a privilege escalation exploit
\item {\bfseries zero-day exploits} 0-days are not made public, but kept in small groups and suddenly can be found in use on the internet, or in specific use for a targeted attack
\item Since nobody is aware of the problem, there is no fix readily available from the vendors/programmers
\end{list1}




\slide{The Exploit Database - dagens buffer overflow}

\hlkimage{20cm}{exploit-db.png}

\centerline{\link{http://www.exploit-db.com/}}


\slide{Create your own exploits and spearphishing?}


\begin{list1}
\item Metasploit 
 Still rocking the internet\\
\link{http://www.metasploit.com/}
\item Armitage GUI fast and easy hacking for Metasploit\\
\link{http://www.fastandeasyhacking.com/}
\item Metasploit Unleashed\\
\link{http://www.offensive-security.com/metasploit-unleashed/Main_Page}
\item Social-Engineer Toolkit\\
\link{https://www.trustedsec.com/downloads/social-engineer-toolkit/}
\vskip 1cm
\item You can get these easily on \link{http://www.kali.org}
\end{list1}

\slide{Buffer overflows}

\hlkimage{3cm}{images/shellcoders-handbook.jpg}

\begin{list1}
\item Hvis man vil lære at lave buffer overflows og exploit programmer
  er følgende dokumenter et godt sted at starte
\item \emph{Smashing The Stack For Fun And Profit} Aleph One
\item \emph{Writing Buffer Overflow Exploits with Perl - anno 2000}
\item Følgende bog kan ligeledes anbefales:
\emph{The Shellcoder's Handbook : Discovering and Exploiting Security Holes} 
af Jack Koziol, David Litchfield, Dave Aitel, Chris Anley, Sinan
"noir" Eren, Neel Mehta, Riley Hassell, John Wiley \& Sons, 2004 
\item NB: bogen er avanceret og således IKKE for begyndere! 
\end{list1}


\slide{Code quality}

\begin{list1}
\item Why are programs still insecure?
\item {\bf Programs are complex!}
\item Try implementing tools to improve quality
\item Hudson Extensible continuous integration server \link{http://hudson-ci.org/}
\item Sonar \link{http://www.sonarsource.org/}
\item Yasca can scan source code written in Java, C/C++, HTML, JavaScript, ASP, ColdFusion, PHP, COBOL, .NET, and other languages. Yasca can integrate easily with other tools\\
\link{http://www.scovetta.com/yasca.html}

\item Software analysis can help\\
\link{http://samate.nist.gov/index.php/Source_Code_Security_Analyzers.html}
\end{list1}

NB: you still have to think \smiley

\slide{Stack protection}

\begin{list1}
\item Stack protection er mere almindeligt\\
- med i OpenBSD current fra 2. dec 2002

\item Buffer overflows er almindeligt kendte
\begin{list2}    
\item Selv OpenSSH har haft buffer overflows
\item Stack protection prøver at modvirke/fjerne
  muligheden for buffer overflows. arbitrary code execution
  bliver til ude af drift for berørte services
\end{list2}

\item Propolice\\
\link{http://www.openbsd.org}\\
\link{http://www.trl.ibm.com/projects/security/ssp/}

\item StackGuard\\
\link{http://www.immunix.org/stackguard.html}
\end{list1}


\slide{We must allow open hacker tools}

\begin{list1}
\item I 1993 skrev Dan Farmer og Wietse Venema artiklen\\
\emph{Improving the Security of Your Site by Breaking Into it}
\item I 1995 udgav de softwarepakken SATAN\\
\emph{Security Administrator Tool for Analyzing Networks}
\begin{quote}\large
We realize that SATAN is a two-edged sword - like many tools,\\
it can be used for good and for evil purposes. We also \\
realize that intruders (including wannabees) have much \\
more capable (read intrusive) tools than offered with SATAN. 
\end{quote}
\item Se \link{http://sectools.org} og \link{http://www.packetstormsecurity.org/}

\end{list1}
Kilde:
\link{http://www.fish2.com/security/admin-guide-to-cracking.html}


\slide{OWASP top ten}

\hlkimage{16cm}{owasp.jpg}

\begin{quote}
The OWASP Top Ten provides a minimum standard for web application
security. The OWASP Top Ten represents a broad consensus about what
the most critical web application security flaws are.  
\end{quote}

\begin{list1}
\item The Open Web Application Security Project (OWASP) 
\item OWASP har gennem flere år udgivet en liste over de 10 vigtigste
  sikkerhedsproblemer for webapplikationer  
\item \link{http://www.owasp.org}
\end{list1}



\slide{Deadly sins bogen}

\hlkimage{8cm}{24-deadly.jpg}

\begin{list1}
\item \emph{24 Deadly Sins of Software Security} 
Michael Howard, David LeBlanc, John Viega 2. udgave, første hed 19 Deadly Sins
\end{list1}

\slide{Deadly sins bogen - close up}

\hlkimage{16cm}{24-deadly-sins-close-up.png}

\slide{Deadly Sins 1/2}

\begin{list1}
\item Part I Web Application Sins 1-4
\begin{list2}
\item 1) SQL Injection
\item 2) Web Server-Related Vulnerabilities
\item 3) Web Client-Related Vulnerabilities (XSS)
\item 4) Use of Magic URLs, Predictable Cookies, and Hidden Form Fields
\end{list2}
\item Part II Implementation Sins 5-18\\
5) Buffer Overruns, 6) Format String, 7) Integer Overflows, 8) C++ Catastrophes, 9) Catching Exceptions, 10) Command Injection
11) Failure to Handle Errors Correctly
12) Information Leakage
13) Race Conditions
14) Poor Usability
15) Not Updating Easily
16) Executing Code with Too Much Privilege
17) Failure to Protect Stored Data
18) The Sins of Mobile Code
\end{list1}

\vskip 2cm
\centerline{\Large Still want to program in C?}

\slide{Deadly Sins 2/2}

\begin{list1}
\item Part III Cryptographic Sins 19-21
\begin{list2}
\item 19) Use of Weak Password-Based System
\item 20) Weak Random Numbers
\item 21) Using Cryptography Incorrectly
\end{list2}
\item Part IV Networking Sins 22-24
\begin{list2}
\item 22) Failing to Protect Network Traffic, 
\item 23) Improper use of PKI, Especially SSL, 
\item 24) Trusting Network Name Resolution
\end{list2}
\end{list1}




\slide{Use cases for BackTrack and Kali}

\begin{list1}
\item Det anbefales at afvikle BackTrack i en virtuel maskine, på klient med VMware Player, Virtualbox eller tilsvarende
\item BackTrack kan også benyttes som pentest server i netværket, med eller uden virtualisering
\item BackTrack Linux \link{http://www.backtrack-linux.org/}\\
\item Kali Linux \link{http://www.kali.org/}\\
\end{list1}



\slide{Damn Vulnerable Linux boot CD'er}

\hlkimage{15cm}{dvl-exploitme.png}

\begin{list1}
\item Damn Vulnerable Linux \link{http://www.damnvulnerablelinux.org/}\\
DVL er baseret på Linux og må kopieres frit :-)
\item Brug DVD'en eller VMware player til den
\end{list1}

\slide{OWASP WebGoat}

\hlkimage{14cm}{WebGoat.png}

\begin{list1}
\item WebGoat fra OWASP, \link{http://www.owasp.org}
\item Træningsmiljø til webhacking
\item Downloades som Zipfil og kan afvikles direkte på en Windows laptop
\end{list1}

\link{https://www.owasp.org}

\slide{WebGoat og Kali}

\hlkimage{16cm}{WebGoat-overview.png}

\centerline{Hvor er den der ged?}

\slide{OSI og Internet modellerne}

\hlkimage{14cm,angle=90}{images/compare-osi-ip.pdf}


\slide{IPv4 pakken - header - RFC-791}

\begin{alltt}
\small  
    0                   1                   2                   3   
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |Version|  IHL  |Type of Service|          Total Length         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |         Identification        |Flags|      Fragment Offset    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Time to Live |    Protocol   |         Header Checksum       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       Source Address                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    Destination Address                        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    Options                    |    Padding    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                    Example Internet Datagram Header
\end{alltt}


\slide{Basal Portscanning}

\begin{list1}
  \item Hvad er portscanning
\item afprøvning af alle porte fra 0/1 og op til 65535
\item målet er at identificere åbne porte - sårbare services
\item typisk TCP og UDP scanning
\item TCP scanning er ofte mere pålidelig end UDP scanning
\end{list1}

{\hlkbig TCP handshake er nemmere at identificere

UDP applikationer svarer forskelligt - hvis overhovedet}

\slide{TCP three way handshake}

\hlkimage{7cm}{images/tcp-three-way.pdf}

\begin{list2}
\item {\bfseries TCP SYN half-open} scans
\item Tidligere loggede systemer kun når der var etableret en fuld TCP
  forbindelse - dette kan/kunne udnyttes til \emph{stealth}-scans
\item Hvis en maskine modtager mange SYN pakker kan dette fylde
  tabellen over connections op - og derved afholde nye forbindelser
  fra at blive oprette - {\bfseries SYN-flooding}
\end{list2}


\slide{Ping og port sweep}

\begin{list1}
\item scanninger på tværs af netværk kaldes for sweeps 
\item Scan et netværk efter aktive systemer med PING
\item Scan et netværk efter systemer med en bestemt port åben
\item Er som regel nemt at opdage:
  \begin{list2}
    \item konfigurer en maskine med to IP-adresser som ikke er i brug
\item hvis der kommer trafik til den ene eller anden er det portscan
\item hvis der kommer trafik til begge IP-adresser er der nok
  foretaget et sweep - bedre hvis de to adresser ligger et stykke fra hinanden
  \end{list2}

\end{list1}

\slide{nmap port sweep efter port 80/TCP}

\begin{list1}
  \item Port 80 TCP er webservere
\end{list1}

\begin{alltt}
\small # {\bfseries nmap  -p 80 217.157.20.130/28}

Starting nmap V. 3.00 ( www.insecure.org/nmap/ )
Interesting ports on router.kramse.dk (217.157.20.129):
Port       State       Service
80/tcp     filtered    http                    

Interesting ports on www.kramse.dk (217.157.20.131):
Port       State       Service
80/tcp     open        http                    

Interesting ports on  (217.157.20.139):
Port       State       Service
80/tcp     open        http                    

\end{alltt}

\slide{nmap port sweep efter port 161/UDP}

\begin{list1}
  \item Port 161 UDP er SNMP
\end{list1}

\begin{alltt}  
\small # {\bfseries nmap -sU -p 161 217.157.20.130/28}

Starting nmap V. 3.00 ( www.insecure.org/nmap/ )
Interesting ports on router.kramse.dk (217.157.20.129):
Port       State       Service
161/udp    open        snmp                    

The 1 scanned port on mail.kramse.dk (217.157.20.130) is: closed

Interesting ports on www.kramse.dk (217.157.20.131):
Port       State       Service
161/udp    open        snmp                    

The 1 scanned port on  (217.157.20.132) is: closed
\end{alltt}

\slide{OS detection}
\begin{alltt}
\footnotesize
# nmap -O ip.adresse.slet.tet \emph{scan af en gateway}
Starting nmap 3.48 ( http://www.insecure.org/nmap/ ) at 2003-12-03 11:31 CET
Interesting ports on gw-int.security6.net (ip.adresse.slet.tet):
(The 1653 ports scanned but not shown below are in state: closed)
PORT     STATE SERVICE
22/tcp   open  ssh
80/tcp   open  http
1080/tcp open  socks
5000/tcp open  UPnP
Device type: general purpose
Running: FreeBSD 4.X
OS details: FreeBSD 4.8-STABLE
Uptime 21.178 days (since Wed Nov 12 07:14:49 2003)
Nmap run completed -- 1 IP address (1 host up) scanned in 7.540 seconds
\end{alltt}

\begin{list2}
  \item lavniveau måde at identificere operativsystemer på
\item send pakker med \emph{anderledes} indhold
\item Reference: \emph{ICMP Usage In Scanning} Version 3.0,
  Ofir Arkin\\ \link{http://www.sys-security.com/html/projects/icmp.html}
\end{list2}

\slide{Zenmap}

\hlkimage{22cm}{nmap-zenmap.png}

\centerline{Vi bruger Zenmap til at scanne med, GUI til Nmap}

% opgaver session 1-6 

\exercise{ex:nmap-pingsweep}
\exercise{ex:nmap-synscan}
\exercise{ex:nmap-os}
\exercise{ex:nmap-service}


\slide{Mere Web application hacking}

\hlkimage{5cm}{images/web-app-hackers-handbook.jpeg}

\begin{list1}
\item \emph{The Web Application Hacker's Handbook: Discovering and Exploiting Security Flaws}
Dafydd Stuttard, Marcus Pinto, Wiley 2007 ISBN: 978-0470170779
\end{list1}


\slide{WebScarab eller Firefox plugins} 

\begin{list1}
\item Form validation kan omgås med proxyprogrammer
\item Nogle af de mest kendte er:
\begin{list2}
\item Burp proxy
\item Tamper Data plugin til Firefox
\item OWASP WebScarab
\end{list2}
\end{list1}


\slide{Burp Suite}

\hlkimage{19cm}{burp-suite-1.png}

\begin{list1}
\item Burp Suite af Dafydd Stuttard \link{http://portswigger.net/burp/}
\item Twitter @PortSwigger
\end{list1}


\slide{Burpsuite}

\begin{quote}
Burp Suite is an integrated platform for performing security testing of web applications. Its various tools work seamlessly together to support the entire testing process, from initial mapping and analysis of an application's attack surface, through to finding and exploiting security vulnerabilities.

Burp gives you full control, letting you combine advanced manual techniques with state-of-the-art automation, to make your work faster, more effective, and more fun.
\end{quote}

Burp suite indeholder både proxy, spider, scanner og andre værktøjer i samme pakke - NB: EUR 249 per user per year.

\link{http://portswigger.net/burp/}

\slide{Nikto og W3af}

\hlkimage{15cm}{w3af-logo.png}

\begin{list1}
\item Nikto web server scanner \link{http://cirt.net/nikto2}
\item W3af Web Application Attack and Audit Framework \link{http://w3af.sourceforge.net/}
\item Begge findes på BackTrack/Kali
\end{list1}

\slide{Skipfish}

\hlkimage{16cm}{skipfish-screen.png}

\begin{list1}
\item Skipfish fully automated, active web application security reconnaissance tool.
\item Af Michal Zalewski \link{http://code.google.com/p/skipfish/}
\end{list1}


\slide{Simple Network Management Protocol}

\begin{list1}
\item SNMP er en protokol der supporteres af de fleste professionelle
  netværksenheder, såsom switche, routere
\item hosts - skal slås til men følger som regel med
\item SNMP bruges til: 
  \begin{list2}
    \item \emph{network management}
    \item statistik
    \item rapportering af fejl - SNMP traps
  \end{list2}
\item {\bfseries sikkerheden baseres på community strings der sendes
    som klartekst ...}
\item det er nemmere at brute-force en community string end en
  brugerid/kodeord kombination
\end{list1}


\slide{brute force}

\begin{list1}
\item hvad betyder bruteforcing?\\
afprøvning af alle mulighederne
\end{list1}

\begin{alltt}
\small
Hydra v2.5 (c) 2003 by van Hauser / THC <vh@thc.org>
Syntax: hydra [[[-l LOGIN|-L FILE] [-p PASS|-P FILE]] | [-C FILE]] 
[-o FILE] [-t TASKS] [-g TASKS] [-T SERVERS] [-M FILE] [-w TIME] 
[-f] [-e ns] [-s PORT] [-S] [-vV] server service [OPT]

Options:
  -S        connect via SSL
  -s PORT   if the service is on a different default port, define it here
  -l LOGIN  or -L FILE login with LOGIN name, or load several logins from FILE
  -p PASS   or -P FILE try password PASS, or load several passwords from FILE
  -e ns     additional checks, "n" for null password, "s" try login as pass
  -C FILE   colon seperated "login:pass" format, instead of -L/-P option
  -M FILE   file containing server list (parallizes attacks, see -T)
  -o FILE   write found login/password pairs to FILE instead of stdout
...  
\end{alltt}


\exercise{ex:find-snmp}
\exercise{ex:hydra-brute}
\exercise{ex:cain-brute}





\slide{Følg med Twitter news}

%\hlkimage{18cm}{twitter-security-feed.png}
\hlkimage{10cm}{twitter-safety.png}

\begin{list1}
\item Twitter has become an important new resource for lots of stuff
\item Twitter has replaced RSS for me 
\end{list1}


\slide{Checklisten}

\begin{list2}
\item BIOS kodeord, pin-kode til telefon 
\item Firewall - specielt på laptops
\item Installer anti-virus og anti-spyware hvis det er på Windows
\item Brug to browsere med forskellige indstillinger
\item Brug evt. PGP til mailkryptering
\item Brug Password Safe, Keychain Access (OSX) eller tilsvarende
\item Overvej at bruge harddisk eller filkryptering
\item Opdatere alle programmer jævnligt 
\item {\bf Backup af vigtige data - harddiske i bærbare kan også dø}
\item Husk: sikker sletning af harddiske, medier osv.
\end{list2}

\slide{Balanced security}

\hlkimage{21cm}{afbalanceret-sikkerhed.pdf}

\begin{list1}
\item Better to have the same level of security
\item If you have bad security in some part - guess where attackers will end up
\item Hackers are not required to take the hardest path into the network
\item Realize there is no such thing as 100\% security 
\end{list1}

\slide{Work together}

\hlkimage{14cm}{Shaking-hands_web.jpg}

\begin{list1}
\item Team up!
\item We need to share security information freely
\item We often face the same threats, so we can work on solving these together
\end{list1}



\slide{PROSA CTF}

\hlkimage{10cm}{DSCF3910s.jpg}

\begin{list1}
\item PROSA afholdte CTF konkurrence 2013 29. - 30. november
\item Capture the Flag er en mulighed for at afprøve sine hackerskillz
\item Distribueret CTF med hold  Sjovt og lærerigt 
\end{list1}
Kilde: \link{http://ctf2013.the-playground.dk/}

\centerline{Get ready! Lær debuggere, perl, java at kende, start på at hacke}


\slide{Fri adgang til hackerværktøjer}

\begin{list1}
\item I 1993 skrev Dan Farmer og Wietse Venema artiklen\\
\emph{Improving the Security of Your Site by Breaking Into it}
\item I 1995 udgav de softwarepakken SATAN\\
\emph{Security Administrator Tool for Analyzing Networks}
\begin{quote}\large
We realize that SATAN is a two-edged sword - like many tools,\\
it can be used for good and for evil purposes. We also \\
realize that intruders (including wannabees) have much \\
more capable (read intrusive) tools than offered with SATAN. 
\end{quote}
\item Se \link{http://sectools.org} og \link{http://www.packetstormsecurity.org/}

\end{list1}
Kilde:
\link{http://www.fish2.com/security/admin-guide-to-cracking.html}


\slide{Be careful - questions?}

\hlkimage{5cm}{michael-conrad.jpg}
\centerline{\Large Hey, Lets be careful out there!}
\vskip 2 cm

\begin{center}
\myname

%\myweb
\end{center}

\vskip 2cm
Source: Michael Conrad \link{http://www.hillstreetblues.tv/}

\slide{VikingScan.org - free portscanning}

\hlkimage{18cm}{vikingscan.png}
%\vskip 1cm 
%\centerline{\link{http://www.vikingscan.org}}


\end{document}
\input{references.tex}

