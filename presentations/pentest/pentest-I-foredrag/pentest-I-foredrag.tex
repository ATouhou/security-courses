\documentclass[20pt,landscape,a4paper,footrule]{foils}
\usepackage{solido-network-slides}


% 
% Arrangement:	Penetration testing I - basale pentest metoder og introduktion
% Mål:	Introduktion til penetrationstest.
% Forudsætninger:	Der forventes kendskab til TCP/IP på brugerniveau.
% Beskrivelse:	Denne foredragsrække består af tre uafhængige dele.

% Denne del introducerer emnet penetrationstest, hvad er det og hvad
% er værdien for dig. Emner der gennemgås er blandt andet: 

% * Regler og etik for penetrationstest (ISC)² Code of Ethics
% * Informationsindsamling - aktiv og passiv
% * Portscan med nmap - TCP og UDP portscanning
% * Servicescanning - identifikation af porte og protokoller
% * Sårbarheder 
% * Exploits og introduktion til buffer overflows
% * Bruteforcing online og offline værktøjer
% * Opsamling og præsentation af data

% Der vil være demonstrationer af sårbarheder på alle foredragene -
% typisk med open source programmer, således at deltagerne kan afprøve
% de selvsamme demoer hjemme. 

% Note: der tages udgangspunkt i open source og Unix, men resultater og principper kan overføres til ASP og .NET teknologierne.

\begin{document}

%\slide{}

\mytitlepage
{Penetration testing I\\basale pentest metoder}

%\begin{alltt}
%\tiny 
%\centerline{$Id: pentest-I-foredrag.tex,v 1.2 2007/10/04 12:17:42 hlk Exp $}
%\end{alltt}

\vskip 2cm
\centerline{\footnotesize Slides are available as PDF, kramshoej@Github}

\LogoOn

%\dagsplan


\slide{Formålet i dag}
\vskip 2 cm

%{\hlkbig En 3 dages workshop, hvor du lærer at angribe dit netværk!}
\hlkimage{3cm}{dont-panic.png}
\centerline{\color{titlecolor}\LARGE Don't Panic!}


\begin{list1}
\item Introducere begrebet penetration testing og basale penetrationstestmetoder
\item Introducere basale værktøjer indenfor genren af hackerværktøjer
\item Give indblik i processen omkring sikkerhedstest
\item Skabe en grundig forståelse for hackerværktøjer
  samt penetrationstest metoder
\item Vise et hackerlab og kravene til de følgende workshops
\end{list1}


\slide{Hackerværktøjer}

\begin{list1}
\item \emph{Improving the Security of Your Site by Breaking Into it} af
Dan Farmer og Wietse Venema i 1993 
\item De udgav i 1995 så en softwarepakke med navnet SATAN
\emph{Security Administrator Tool for Analyzing Networks}
\item De forårsagede en del panik og furore, alle kan hacke, verden bryder sammen

\vskip 1cm
\begin{quote}
We realize that SATAN is a two-edged sword -- like
many tools, it can be used for good and for evil
purposes. We also realize that intruders (including
wannabees) have much more capable (read intrusive)
tools than offered with SATAN. 
\end{quote}
\end{list1}

\vskip 1cm
Kilde:
\link{http://www.fish2.com/security/admin-guide-to-cracking.html}


\slide{Brug hackerværktøjer!}

\begin{list1}
\item Hackerværktøjer -- bruger I dem? -- efter dette kursus gør I 
\item Portscannere kan afsløre huller i forsvaret
\item Webtestværktøjer som crawler igennem et website og finder alle
  forms kan hjælpe
\item I vil kunne finde mange potentielle problemer proaktivt ved
  regelmæssig brug af disse værktøjer -- også potentielle driftsproblemer
\item Husk dog penetrationstest er ikke en sølvkugle
\item Honeypots kan måske være med til at afsløre angreb og
  kompromitterede systemer hurtigere
\end{list1}


\slide{Hacker -- cracker}

{\bfseries Det korte svar -- drop diskussionen}

%Det lidt længere svar:\\
Det havde oprindeligt en anden betydning, men medierne har taget
udtrykket til sig -- og i dag har det begge betydninger. 

{\color{red}\hlkbig I dag er en hacker stadig en der bryder ind i systemer!}

Ref. Spafford, Cheswick, Garfinkel, Stoll, \ldots
- alle kendte navne indenfor sikkerhed

Hvis man vil vide mere kan man starte med:
\begin{list2}
\item \emph{Cuckoo's Egg: Tracking a Spy Through the Maze of Computer
 Espionage},  Clifford Stoll  
\item \emph{Hackers: Heroes of the Computer Revolution},
Steven Levy
\item \emph{Practical Unix and Internet Security},
Simson Garfinkel, Gene Spafford, Alan Schwartz 
\end{list2}

\slide{Aftale om test af netværk}

{\bfseries Straffelovens paragraf 263 Stk. 2. Med bøde eller fængsel indtil 1 år og 6 måneder straffes den, der uberettiget skaffer sig adgang til en andens oplysninger eller programmer, der er bestemt til at bruges i et informationssystem. }

Hacking kan betyde:
\begin{list2}
\item At man skal betale erstatning til personer eller virksomheder
\item At man får konfiskeret sit udstyr af politiet
\item At man, hvis man er over 15 år og bliver dømt for hacking, kan
  få en bøde -- eller fængselsstraf i alvorlige tilfælde 
\item At man, hvis man er over 15 år og bliver dømt for hacking, får
en plettet straffeattest. Det kan give problemer, hvis man skal finde
et job eller hvis man skal rejse til visse lande, fx USA og
Australien
\item Frygten for terror har forstærket ovenstående -- så lad være!
\end{list2}

\slide{ISC2 code of ethics}

\hlkimage{20cm}{isc2-code-of-ethics.png}

\link{https://www.isc2.org/ethics/default.aspx}


\slide{Er sikkerhedstest interessant?}

\begin{list1}
\item Sikkerhedsproblemer i netværk er mange
\item Kan være et krav fra eksterne -- eksempelvis VISA PCI krav
\end{list1}

\begin{list1}
\item Chefen: skal vi ikke have en sikkerhedstest udført?
\item IT-chefen: hmm, det kan vi da godt
\item IT-medarbejderen: *gisp* -- jeg ved sikkerheden halter flere steder!  
\item Husk at det ikke er jeres systemer -- tag ikke kritik personligt,
men som hjælp til at forbedre
\end{list1}

\slide{Pentest in the news}

\hlkimage{20cm}{version2-dong-hackerkursus.png}


\slide{ Introduktion -- begreber og teknologierne}

\begin{list1}
\item Sikkerhedstest / penetrationstest\\
Afprøvning af sikkerhedsforanstaltninger og evaluering af
sikkerhedsniveau ved hjælp af IT systemer og \emph{hackerværktøjer}  
\item Kaldes tillige sårbarhedstest, sårbarhedsanalyse m.v.
\item Ekstern -- udføres fra internet, typisk over WAN
\item Intern, inside, on-site -- udføres hos kunden, typisk over LAN og
  bag firewall
\end{list1}

\link{https://www.google.com/search?q=sikkerhedstest}

\slide{Blackbox, greybox og whitebox}

\begin{list1}
\item Forudsætninger og forudgående kendskab til miljøet
\item 
Afhængig af de informationer der er tilgængelige om opbygningen af det
scannede netværk forud for NetSikkerhedsanalysen taler man om
henholdsvis White, Grey og Black Box testning. 
\begin{list2}
\item Black Box testen involverer en sikkerhedstestning af et netværk uden
nogen form for insider viden om systemet udover den IP-adresse, der
ønskes testet. Dette svarer til den situation en fjendtlig hacker vil
stå i og giver derfor det mest realistiske billede af netværkets
sårbarhed overfor angreb udefra. Men er dårlig ressourceudnyttelse.  

\item I den anden ende  af skalaen har vi White Box testen. I dette tilfælde
har sikkerhedsspecialisten både før og under testen fuld adgang til
alle informationer om det scannede netværk. Analysen vil derfor kunne
afsløre sårbarheder, der ikke umiddelbart er synlige for en almindelig
angriber. En White Box test er typisk mere omfattende end en Black Box
test og forudsætter en højere grad af deltagelse fra kundens side, men
giver en meget detaljeret og tilbundsgående undersøgelse.  

\item En Grey Box test er som navnet siger et kompromis mellem en White Box
og en Black Box test. Typisk vil sikkerhedsspecialisten udover en
IP-adresse være i besiddelse af de mest grundlæggende
systemoplysninger: Hvilken type af server der er tale om (mail-,
webserver eller andet), operativsystemet og eventuelt om der er
opstillet en firewall foran serveren. 
\end{list2}
\end{list1}


\slide{Fordele ved at få udført planlagt sikkerhedstest}

\begin{quote}
Formålet med en sikkerhedstest er at nedbringe risici for systemerne
og sikre organisationen mod uventede tab af data, tab af omdømme,
forøgede omkostninger. Formålet er ikke at udpege en syndebuk eller
identificere dårlige medarbejdere.  
\end{quote}

\begin{list1}
\item Målgrupper:
\begin{list2}
\item IT-afdeling og teknisk personale
\item Ledelse, koncernledelse    
\end{list2}
\item Afleveringer:
\begin{list2}
\item Rapport med tekniske anbefalinger og opsummering/checklister
\item Executive summary    
\end{list2}
\end{list1}


\slide{Persongalleri, Godkendelse og tilladelse}


\begin{list1}
\item Sikkerhedskonsulent -- den konsulent der kommer ud til kunden 
\item Inden en test kan udføres skal der indhentes tilladelser fra:
\begin{list2}
\item Kontaktperson -- kundens ansatte som kan hjælpe med praktiske
  spørgsmål og skabe kontakt til de rette personer i kundens organisation 
\item Systemejer -- den ansvarlige for et bestemt system 
\item Netværksejer -- den ansvarlige for netværk hos kunden
\item Driftorganisation -- dem der driver systemerne
\item Sikkerhedsansvarlig -- den ansvarlige for sikkerheden hos kunden 
\end{list2}
\end{list1}

\slide{Planlægning af sikkerhedstest}

\begin{list1}
\item Sårbarhedsanalysens omfang
\begin{list2}
\item Scope -- hvad skal testes
\item Hvornår skal testes -- indenfor et aftalt tidsrum
\item Hvor testes fra -- logfilerne vil afsløre IP-adresser
\item Skal være aftalt på forhånd
\item Kan overskrides delvist -- eksempelvis ved port 80 scan på samme
  subnet eller tilsvarende
\item Skal der forsøges ude af drift angreb -- DoS
\item Se endvidere slide om Rules of engagement senere   
\end{list2}
\item {\bf Sårbarhedsanalysen omfatter (targets):}
\begin{list2}
\item 192.168.1.1 -- firewall/router
\item 192.168.1.2 -- mailserver
\item 192.168.1.3 -- webserver
\item Testen udføres i tidsrummet mandag 1. til fredag 5. fra 91.102.91.16/28
\end{list2}
\end{list1}


\slide{Før konsulenten ankommer -- forberedelse}

\begin{list1}
\item Testplan med oversigt over targets og IP-adresser
\item Netværkstegninger og anden information som er aftalt oplyst
\item Hvor skal sikkerhedskonsulenten placeres ved insidetest -- ikke i serverrum, tak :-)
\item Kabling af netværksstik
\item Gæstekort -- til test over flere dage
\item Kantine, toiletter osv.
\end{list1}
\vskip 1cm
\centerline{Betragt det som en ny kollega -- med tidsbegrænset kontrakt}

\slide{Udvælgelse af systemer til test}

\hlkimage{14cm}{images/demo-netvaerk.pdf}

\begin{list1}
\item Typiske interessante mål og årsager
\begin{list2}
\item Routere på netværksvejen til kritiske systemer og netværk -
  tilgængelighed 
\item Firewall -- begrænses trafikken tilstrækkeligt
\item Mailservere -- tillades relaying udefra
\item Webservere -- kan der afvikles kode på systemet, downloades data     
\end{list2}
\end{list1}


\slide{Scannerudstyr på insidetest}

\vskip 2 cm
\begin{quote}
Scannersystemer, hardware og software kræver en del ekspertice og
opsætning. Det er tidskrævende at foretage denne opsætning og
konsulenten har på forhånd udvalgt og konfigureret udstyr til testen.  
Det skal derfor accepteres at konsulenten tilslutter eget udstyr til
de pågældende netværk og dette sker naturligvis under strenge krav til
konsulentens udstyr.  
\end{quote}
\vskip 2 cm
\centerline{\bf Det er ikke en mulighed at bruge kundens udstyr!}

\slide{Testens udførelse}

\begin{list1}
\item Testen udføres ved samarbejde mellem konsulent og virksomhed
\item Først og fremmest skal testen startes
\begin{list2}
\item Når konsulenten ankommer kontaktes kontaktpersonen
\item Konsulenten vises til rette og pakker ud/stiller op
\item Såfremt det ønskes inspiceres og godkendes udstyret
\item Konsulenten tilslutter sig netværket og test er officielt igang
\item Konsulenten verificerer adgangen til netværk og melder klar,
  begynder test
\end{list2}
\item ... tiden går ... testen udføres ... 
\item Kontaktpersonen er hele tiden til rådighed på mobiltelefon
\item Testen afsluttes og der pakkes ned i modsat rækkefølge  
\end{list1}


\slide{Afbrydelse af testen -- kompromitterede maskiner}

\begin{list1}
\item Der kan være årsager der medfører at testen skal indstilles
\item Sikkerhedskonsulenten afbryder testen
\begin{list2}
\item Det anses for uforsvarligt at fortsætte, der er fundet
  kompromitterede systemer eller beviser der kan ødelægges
\item Netværket er dårligt, mulighederne for udførelse er forringet
\end{list2}
\item Kunden ønsker at afbryde testen
\begin{list2}
\item Der opleves for store problemer under udførelsen
\item Systemnedbrud på forretningskritiske systemer
\item Andre kriser der gør det valgte tidspunkt uegnet 
\end{list2}
\item NB: Eksempler! -- man afbryder altid når kunden ønsker det!
\end{list1}

\slide{Oprydning efter testen}

\begin{list1}
\item Sikkerhedskonsulenten er ansvarlig for:
\begin{list2}
\item Fjerne data fra systemerne
\item Fjerne brugerkonti, få fjernet brugeroplysninger og
  loginmuligheder
\item Fjerne software som ikke skal benyttes mere    
\end{list2}
\item Driftsorganisationen er ansvarlig for:
\begin{list2}
\item Undersøgelse af systemerne
\item Eventuel genstart af systemer, der kan være nedsat effektivitet
\item Fjerne patchkabler for stik der er kablet speciet til konsulenten
\end{list2}
\end{list1}

\slide{Afrapportering -- resultater}

\begin{list1}
\item Hvad indeholder en sikkerhedstest rapport:  
\begin{list2}
\item Titel, indholdsfortegnelse, firmanavne -- ca. 15-30 sider for 5 hosts    
\item Fortrolighedserklæring -- det er fortrolige oplysninger
\item Executive summary -- ofte i større virksomheder   
\item Information om den udførte scanning
\item Omfang/scope
\item Gennemgang af targets -- detaljeret information og med anbefalinger
\item Konklusion -- ofte mere teknisk
\item Bilag -- detaljerede oplysninger og oversigter, checklister
\end{list2}
\item Det er organisationen der selv vælger hvilke anbefalinger der følges
\end{list1}


\slide{Rules of engagement -- regler og etik for sikkerhedstest}

\begin{list2}
\item NB: Stor forskel på Danmark og udlandet!
\item Sikkerhedskonsulenten må ikke give anledning til nye sårbarheder
  som følge af testen
\item Sikkerhedskonsulenten må ikke installere ny software på
  systemer uden forudgående aftale
\item Sikkerhedskonsulenten efterlader ikke usikre
  systemadministratorkonti eller tilsvarende efter testen
\item Sikkerhedskonsulenten tager altid kontakt til kunden ved
  høj-risiko sårbarheder  
\item Er man hyret til netværkssikkerhed kan man godt \emph{snuse}
  lidt rundt om systemerne under test -- der kan være et sårbart
  testsystem lige ved siden af
\item Solido vil ved opdagelse af åbenlyse sikkerhedsrisici
  dokumentere disse i rapporten, uanset scope for opgaven ellers
\end{list2}

\centerline{Det er en balancegang}



\slide{Konsulentens udstyr -- vil du være sikkerhedskonsulent}

\begin{list1}

\item Laptops, gerne flere, men én er nok til at lære!
\begin{list2}
\item Sikkerhedskonsulenterne bruger typisk Open Source værktøjer på Linux og
enkelte systemer med Windows -- jeg bruger helst Windows 7 i dag
\item Netværkserfaring \emph{TCP/IP protocol suite} -- TCP, UDP, ICMP osv. i detaljer
\item Programmmeringserfaring er en fordel
\item Linux/Unix kendskab er ofte en {\bfseries nødvendighed}\\
- fordi de nyeste værktøjer er skrevet til Unix i form af Linux og BSD
\item \emph{A Hands-On Introduction to Hacking
by Georgia Weidman}, June 2014\\
 \link{http://www.nostarch.com/pentesting}
\item \emph{Metasploit The Penetration Tester's Guide}
by David Kennedy, Jim O'Gorman, \\
Devon Kearns, and Mati Aharoni \link{http://nostarch.com/metasploit}
\item Metasploit Unleashed -- gratis kursus i Metasploit\\
\link{https://www.offensive-security.com/metasploit-unleashed/}
\end{list2}
\end{list1}


\slide{Hackerværktøjer}
% måske til reference afsnit?
\hlkimage{3cm}{hackers_JOLIE+1995.jpg}

\begin{list2}
\item Alle bruger nogenlunde de samme værktøjer, se også \link{http://www.sectools.org/}
\item Portscanner Nmap, Nping -- tester porte, godt til firewall admins \link{https://nmap.org}
\item Generel sårbarhedsscanner Metasploit Framework \link{https://www.metasploit.com/}
\item Specialscannere, eksempelvis web sårbarhedsscanner -- eksempelvis Nikto, Skipfish
\item Specielle scannere -- wifi Aircrack-ng, web Burpsuite \link{http://portswigger.net/burp/}
\item Wireshark avanceret netværkssniffer -- \link{https://www.wireshark.org/} 
\item og scripting, PowerShell, Unix shell, Perl, Python, Ruby, \ldots
\end{list2}

Billedet: Angelina Jolie fra Hackers 1995


\slide{Hvad skal der ske?}

\begin{list1}
\item Tænk som en hacker
\item Rekognoscering
\begin{list2}
\item ping sweep, port scan
\item OS detection -- TCP/IP eller banner grab
\item Servicescan -- rpcinfo, netbios, ...
\item telnet/netcat interaktion med services
\end{list2}
\item Udnyttelse/afprøvning: Metasploit, Nikto, exploit programs
\item Oprydning/hærdning vises måske ikke, men I bør i praksis:
\begin{list2}
\item Lav en rapport
\item Ændre, forbedre og hærde systemer
\item Gennemgå rapporten, registrer ændringer
\item Opdater programmer, konfigurationer, arkitektur, osv. 
\end{list2}
\item I skal jo også VISE andre at I gør noget ved sikkerheden.
\end{list1}


\slide{Hackerlab opsætning}

\hlkimage{10cm}{hacklab-1.png}

\begin{list2}
\item Hardware: en moderne laptop med CPU der kan bruge virtualiseting\\
Husk at slå virtualisering til i BIOS
\item Software: dit favoritoperativsystem, Windows, Mac, Linux
\item Virtualiseringssoftware: VMware, Virtual box, vælg selv
\item Hackersoftware: Kali som Virtual Machine \link{https://www.kali.org/}
\item Soft targets: Metasploitable, Windows 2000, Windows XP, ...
\end{list2}


\slide{Teknisk hvad er hacking}

\hlkimage{17cm}{buffer-overflow-3.pdf}


\slide{Internet i dag}

\hlkimage{14cm}{images/server-client.pdf}

\begin{list1}
\item Klienter og servere
\item Rødder i akademiske miljøer
\item Protokoller der er op til 20 år gamle
\item Meget lidt kryptering, mest på http til brug ved e-handel 
\end{list1}

\slide{Trinity breaking in}

\hlkimage{20cm}{trinity-nmapscreen-hd-cropscale-418x250.jpg}
Meget realistisk - sådan foregår det næsten:\\ 
\link{https://nmap.org/movies/}\\
\link{https://youtu.be/51lGCTgqE_w}



\slide{Hacking er magi}

\hlkimage{7cm}{wizard_in_blue_hat.png}

\vskip 1 cm

\centerline{Hacking ligner indimellem  magi}


\slide{Hacking er ikke magi}

\hlkimage{17cm}{ninjas.png}

\vskip 1 cm
\centerline{Hacking kræver blot lidt ninja-træning}

\slide{Hacking eksempel -- det er ikke magi}

\begin{list1}
\item MAC filtrering på trådløse netværk
\item Alle netkort har en MAC adresse -- BRÆNDT ind i kortet fra fabrikken
\item Mange trådløse Access Points kan filtrere MAC adresser
\item Kun kort som er på listen over godkendte adresser tillades adgang til netværket

\item Det virker dog ikke \smiley
\item De fleste netkort tillader at man overskriver denne adresse midlertidigt
\item og man kan aflæse de godkendte når de er aktive på netværket
\item Derudover har der ofte været fejl i implementeringen af MAC filtrering
\end{list1}

\slide{Myten om MAC filtrering}

\begin{list1}
\item Eksemplet med MAC filtrering er en af de mange myter 
\item Hvorfor sker det?
\item Marketing -- producenterne sætter store mærkater på æskerne
\item Manglende indsigt -- forbrugerne kender reelt ikke koncepterne
\item Hvad \emph{er} en MAC adresse egentlig
\item Relativt få har forudsætningerne for at gennemskue dårlig sikkerhed
\item Løsninger?

\item Udbrede viden om usikre metoder til at sikre data og computere
\item Udbrede viden om sikre metoder til at sikre data og computere
\end{list1}

\slide{MAC filtrering}

\hlkimage{15cm}{stupid-security.jpg}


\slide{OSI og Internet modellerne}

\hlkimage{14cm,angle=90}{images/compare-osi-ip.pdf}

\slide{Kali Linux the new backtrack}

\hlkimage{20cm}{kali-linux.png}

\begin{list1}
\item BackTrack -- \link{http://www.backtrack-linux.org}
\item Kali -- \link{https://www.kali.org/} 
\item Wireshark -- \link{https://www.wireshark.org} avanceret netværkssniffer
\end{list1}


\slide{Wireshark -- grafisk pakkesniffer}

\hlkimage{20cm}{images/wireshark-website.png} 

\centerline{\link{https://www.wireshark.org}}
\centerline{Både til Windows og Unix}


\slide{Brug af Wireshark}

\hlkimage{19cm}{images/wireshark-http.png}

\centerline{Læg mærke til filtermulighederne}

\slide{Network mapping}

\hlkimage{18cm}{images/network-example.pdf}

\begin{list1}
\item Ved brug af traceroute og tilsvarende programmer kan man ofte
  udlede topologien i det netværk man undersøger  
\item Levetiden (TTL) for en pakke tælles ned på hver router, sættes denne lavt
  opnår man at pakken \emph{timer ud} -- besked fra hver router på vejen
\item Default Unix er UDP pakker, Windows tracert ICMP pakker
\end{list1}


\slide{traceroute -- med UDP}

\begin{alltt}
\small # {\bfseries tcpdump -i en0 host 10.20.20.129 or host 10.0.0.11}
tcpdump: listening on en0
23:23:30.426342 10.0.0.200.33849 > router.33435: udp 12 [ttl 1]
23:23:30.426742 safri > 10.0.0.200: icmp: time exceeded in-transit
23:23:30.436069 10.0.0.200.33849 > router.33436: udp 12 [ttl 1]
23:23:30.436357 safri > 10.0.0.200: icmp: time exceeded in-transit
23:23:30.437117 10.0.0.200.33849 > router.33437: udp 12 [ttl 1]
23:23:30.437383 safri > 10.0.0.200: icmp: time exceeded in-transit
23:23:30.437574 10.0.0.200.33849 > router.33438: udp 12
23:23:30.438946 router > 10.0.0.200: icmp: router udp port 33438 unreachable
23:23:30.451319 10.0.0.200.33849 > router.33439: udp 12
23:23:30.452569 router > 10.0.0.200: icmp: router udp port 33439 unreachable
23:23:30.452813 10.0.0.200.33849 > router.33440: udp 12
23:23:30.454023 router > 10.0.0.200: icmp: router udp port 33440 unreachable
23:23:31.379102 10.0.0.200.49214 > safri.domain:  6646+ PTR? \\
200.0.0.10.in-addr.arpa. (41)
23:23:31.380410 safri.domain > 10.0.0.200.49214:  6646 NXDomain* 0/1/0 (93)
14 packets received by filter
0 packets dropped by kernel
\end{alltt}


\slide{Basal Portscanning}

\begin{list1}
\item Hvad er portscanning
\item Afprøvning af alle porte fra 0/1 og op til 65535
\item Målet er at identificere åbne porte -- sårbare services
\item Typisk TCP og UDP scanning
\item TCP scanning er ofte mere pålidelig end UDP scanning
\end{list1}

{\hlkbig TCP handshake er nemmere at identificere

UDP applikationer svarer forskelligt -- hvis overhovedet}

\slide{TCP three-way handshake}

\hlkimage{7cm}{images/tcp-three-way.pdf}

\begin{list2}
\item {\bfseries TCP SYN half-open} scans
\item Tidligere loggede systemer kun når der var etableret en fuld TCP
  forbindelse -- dette kan/kunne udnyttes til \emph{stealth}-scans
\item Hvis en maskine modtager mange SYN pakker kan dette fylde
  tabellen over connections op -- og derved afholde nye forbindelser
  fra at blive oprette -- {\bfseries SYN-flooding}
\end{list2}


\slide{Ping og port sweep}

\begin{list1}
\item scanninger på tværs af netværk kaldes for sweeps 
\item Scan et netværk efter aktive systemer med PING
\item Scan et netværk efter systemer med en bestemt port åben
\item Er som regel nemt at opdage:
  \begin{list2}
    \item konfigurer en maskine med to IP-adresser som ikke er i brug
\item hvis der kommer trafik til den ene eller anden er det portscan
\item hvis der kommer trafik til begge IP-adresser er der nok
  foretaget et sweep -- bedre hvis de to adresser ligger et stykke fra hinanden
  \end{list2}

\end{list1}

\slide{Nmap port sweep efter webservere}

\begin{alltt}\small
root@cornerstone:~#{\bfseries  nmap -p80,443 172.29.0.0/24}

Starting Nmap 6.47 ( http://nmap.org ) at 2015-02-05 07:31 CET
Nmap scan report for 172.29.0.1
Host is up (0.00016s latency).
PORT    STATE    SERVICE
{\color{darkgreen}80/tcp  open     http}
443/tcp filtered https
MAC Address: 00:50:56:C0:00:08 (VMware)

Nmap scan report for 172.29.0.138
Host is up (0.00012s latency).
PORT    STATE  SERVICE
{\color{darkgreen}80/tcp  open   http}
443/tcp closed https
MAC Address: 00:0C:29:46:22:FB (VMware)

\end{alltt}

\slide{Nmap port sweep efter SNMP port 161/UDP}

\begin{alltt}\small
root@cornerstone:~#{\bfseries nmap -sU -p 161 172.29.0.0/24}
Starting Nmap 6.47 ( http://nmap.org ) at 2015-02-05 07:30 CET
Nmap scan report for 172.29.0.1
Host is up (0.00015s latency).
PORT    STATE         SERVICE
{\color{darkgreen}161/udp open|filtered snmp}
MAC Address: 00:50:56:C0:00:08 (VMware)

Nmap scan report for 172.29.0.138
Host is up (0.00011s latency).
PORT    STATE  SERVICE
161/udp closed snmp
MAC Address: 00:0C:29:46:22:FB (VMware)
...
Nmap done: 256 IP addresses (5 hosts up) scanned in 2.18 seconds
\end{alltt}

\slide{Nmap Advanced OS detection}
\begin{alltt}\footnotesize
root@cornerstone:~#{\bfseries nmap -A -p80,443 172.29.0.0/24}
Starting Nmap 6.47 ( http://nmap.org ) at 2015-02-05 07:37 CET
Nmap scan report for 172.29.0.1
Host is up (0.00027s latency).
PORT    STATE    SERVICE VERSION
80/tcp  open     http    Apache httpd 2.2.26 ((Unix) DAV/2 mod_ssl/2.2.26 OpenSSL/0.9.8zc)
|_http-title: Site doesn't have a title (text/html).
443/tcp filtered https
MAC Address: 00:50:56:C0:00:08 (VMware)
Warning: OSScan results may be unreliable because we could not find at 
least 1 open and 1 closed port 
Device type: media device|general purpose|phone
Running: Apple iOS 6.X|4.X|5.X, Apple Mac OS X 10.7.X|10.9.X|10.8.X
OS CPE: cpe:/o:apple:iphone_os:6 cpe:/o:apple:mac_os_x:10.7 cpe:/o:apple:mac_os_x:10.9 cpe:/o:apple:mac_os_x:10.8 cpe:/o:apple:iphone_os:4 cpe:/a:apple:apple_tv:4 
cpe:/o:apple:iphone_os:5
OS details: Apple iOS 6.1.3, Apple Mac OS X 10.7.0 (Lion) - 10.9.2 (Mavericks) or iOS 4.1 - 7.1 (Darwin 10.0.0 - 14.0.0), Apple Mac OS X 10.8 - 10.8.3 (Mountain Lion) or iOS 5.1.1 - 6.1.5 (Darwin 12.0.0 - 13.0.0)
OS and Service detection performed. Please report any incorrect results at http://nmap.org/submit/ .
\end{alltt}

\begin{list2}
\item Lavniveau måde at identificere operativsystemer på, prøv også
  \verb+nmap -A+
\item Send pakker med \emph{anderledes} indhold, observer svar
\item En tidlig og detaljeret reference: \emph{ICMP Usage In Scanning} Version 3.0,
  Ofir Arkin, 2001 %\link{https://web.archive.org/web/20050210093427/http://www.sys-security.com/html/projects/icmp.html} % Original side er død
\end{list2}

\slide{Portscan med Zenmap GUI}

\hlkimage{15cm}{nmap-zenmap.png}
\centerline{Zenmap følger med i pakken når man henter Nmap \link{https://nmap.org}}

\slide{Erfaringer hidtil}

\begin{list1}
  \item Mange oplysninger
\item Kan man stykke oplysningerne sammen kan man sige en hel del om
  netværket 
\item En skabelon til registrering af maskiner er god
  \begin{list2}
    \item Svarer på ICMP: $\Box$\  echo, $\Box$\ mask, $\Box$\ time
\item Svarer på traceroute: $\Box$\ ICMP, $\Box$\ UDP
\item Åbne porte TCP og UDP: 
\item Operativsystem:
\item ... (banner information m.v.)
  \end{list2}
\item Mange små pakker kan oversvømme store forbindelser og
  give problemer for netværk
\end{list1}

% Måske shellshock og heartbleed

\slide{Heartbleed CVE-2014-0160}

\hlkimage{22cm}{heartbleed-com.png}

Source: \link{http://heartbleed.com/}

\slide{Heartbleed is yet another bug in SSL products}

\begin{alltt}
What versions of the OpenSSL are affected?
Status of different versions:

* OpenSSL 1.0.1 through 1.0.1f (inclusive) are vulnerable
* OpenSSL 1.0.1g is NOT vulnerable
* OpenSSL 1.0.0 branch is NOT vulnerable
* OpenSSL 0.9.8 branch is NOT vulnerable

Bug was introduced to OpenSSL in December 2011 and has been out
in the wild since OpenSSL release 1.0.1 on 14th of March 
2012. OpenSSL 1.0.1g released on 7th of April 2014 fixes the bug.
\end{alltt}

\vskip 1cm
\centerline{It's just a bug - but a serious one}

\slide{Heartbleed hacking}

\begin{alltt}\footnotesize
  06b0: 2D 63 61 63 68 65 0D 0A 43 61 63 68 65 2D 43 6F  -cache..Cache-Co
  06c0: 6E 74 72 6F 6C 3A 20 6E 6F 2D 63 61 63 68 65 0D  ntrol: no-cache.
  06d0: 0A 0D 0A 61 63 74 69 6F 6E 3D 67 63 5F 69 6E 73  ...action=gc_ins
  06e0: 65 72 74 5F 6F 72 64 65 72 26 62 69 6C 6C 6E 6F  ert_order&billno
  06f0: 3D 50 5A 4B 31 31 30 31 26 70 61 79 6D 65 6E 74  =PZK1101&payment
  0700: 5F 69 64 3D 31 26 63 61 72 64 5F 6E 75 6D 62 65  _id=1&{\bf card_numbe}
  0710: XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX  {\bf r=4060xxxx413xxx}
  0720: 39 36 26 63 61 72 64 5F 65 78 70 5F 6D 6F 6E 74  {\bf 96&card_exp_mont}
  0730: 68 3D 30 32 26 63 61 72 64 5F 65 78 70 5F 79 65  {\bf h=02&card_exp_ye}
  0740: 61 72 3D 31 37 26 63 61 72 64 5F 63 76 6E 3D 31  {\bf ar=17&card_cvn=1}
  0750: 30 39 F8 6C 1B E5 72 CA 61 4D 06 4E B3 54 BC DA  {\bf 09}.l..r.aM.N.T..
\end{alltt}

\begin{list2}
\item Obtained using Heartbleed proof of concepts -- Gave full credit card details
\item "Can XXX be exploited" -- yes, clearly! PoCs ARE needed\\
Without PoCs even Akamai wouldn't have repaired completely!
\item The internet was ALMOST fooled into thinking getting private keys\\
 from Heartbleed was not possible -- scary indeed.
\end{list2}

\slide{Proof of concept programs exist - god or bad?}

\centerline{Some of the tools released shortly after Heartbleed announcement}
\begin{list2}
\item \link{https://github.com/FiloSottile/Heartbleed} tool i Go\\
site \link{http://filippo.io/Heartbleed/}
\item \link{https://github.com/titanous/heartbleeder} tool i Go
\item \link{http://s3.jspenguin.org/ssltest.py} PoC
\item \link{https://gist.github.com/takeshixx/10107280} test tool med STARTTLS support
\item \link{http://possible.lv/tools/hb/} test site
\item \link{https://twitter.com/richinseattle/status/453717235379355649} Practical Heartbleed attack against session keys links til, \link{https://www.mattslifebytes.com/?p=533} og "Fully automated here "\\ \link{https://www.michael-p-davis.com/using-heartbleed-for-hijacking-user-sessions/}

\item Metasploit er også opdateret på master repo\\ \link{https://twitter.com/firefart/status/453758091658792960}\\
\link{https://github.com/rapid7/metasploit-framework/blob/master/modules/auxiliary/scanner/ssl/openssl_heartbleed.rb}
\end{list2}


\slide{Scan for Heartbleed and SSLv2/SSLv3}

\hlkimage{8cm}{nmap-sslv2.png}

\begin{list1}
\item \verb+nmap -p 443 --script ssl-heartbleed <target>+\\
\link{https://nmap.org/nsedoc/scripts/ssl-heartbleed.html}
\item \verb+masscan 0.0.0.0/0 -p0-65535  --heartbleed+\\
\link{https://github.com/robertdavidgraham/masscan}
\end{list1}

\centerline{Almost every new vulnerability will have Nmap recipe}

\slide{Compare SSL}

\begin{alltt}
  /* Read type and payload length first */
    if (1 + 2 + 16 > s->s3->rrec.length)
        return 0; /* silently discard */
    hbtype = *p++;
    n2s(p, payload);
    if (1 + 2 + payload + 16 > s->s3->rrec.length)
        return 0; /* silently discard per RFC 6520 sec. 4 */
    pl = p;
\end{alltt}

\begin{list1}
\item Ditch OpenSSL - write our own?
\item SSL implementations compared - above code from OpenSSL copied from this:\\
\link{http://tstarling.com/blog/2014/04/ssl-implementations-compared/}
\item LibreSSL announced, OpenBSD people\\
 \link{http://www.libressl.org/} and \link{http://opensslrampage.org/}
\end{list1}

\slide{Key points after heartbleed}

\hlkimage{16cm}{ssl-tls-breaks-timeline.png}
Source: picture source\\ {\footnotesize\link{https://www.duosecurity.com/blog/heartbleed-defense-in-depth-part-2}}
\begin{list2}
\item Writing SSL software and other secure crypto software is hard
\item Configuring SSL is hard\\
check you own site \link{https://www.ssllabs.com/ssltest/}
\item SSL is hard, finding bugs "all the time"
\link{http://armoredbarista.blogspot.dk/2013/01/a-brief-chronology-of-ssltls-attacks.html}
\item Rekeying is hard - slow, error prone, manual proces - Automate!
\item Proof of concept programs exist - god or bad?
\end{list2}


\slide{Simple Network Management Protocol}

\begin{list1}
\item SNMP er en protokol der supporteres af de fleste professionelle
  netværksenheder, såsom switche, routere
\item hosts -- skal slås til men følger som regel med
\item SNMP bruges til: 
  \begin{list2}
    \item \emph{network management}
    \item statistik
    \item rapportering af fejl -- SNMP traps
  \end{list2}
\item {\bfseries Sikkerheden baseres på community strings der sendes
    som klartekst ...}
\item Det er nemmere at brute-force en community string end en
  brugerid/kodeord kombination
\end{list1}

\slide{Brute force}

\begin{list1}
\item Hvad betyder bruteforcing?\\
afprøvning af alle mulighederne
\end{list1}

\begin{alltt}
\small
Hydra v2.5 (c) 2003 by van Hauser / THC <vh@thc.org>
Syntax: hydra [[[-l LOGIN|-L FILE] [-p PASS|-P FILE]] | [-C FILE]] 
[-o FILE] [-t TASKS] [-g TASKS] [-T SERVERS] [-M FILE] [-w TIME] 
[-f] [-e ns] [-s PORT] [-S] [-vV] server service [OPT]

Options:
  -S        connect via SSL
  -s PORT   if the service is on a different default port, define it here
  -l LOGIN  or -L FILE login with LOGIN name, or load several logins from FILE
  -p PASS   or -P FILE try password PASS, or load several passwords from FILE
  -e ns     additional checks, "n" for null password, "s" try login as pass
  -C FILE   colon seperated "login:pass" format, instead of -L/-P option
  -M FILE   file containing server list (parallizes attacks, see -T)
  -o FILE   write found login/password pairs to FILE instead of stdout
...  
\end{alltt}

\slide{John the Ripper}

\begin{quote}
John the Ripper is a fast password cracker, currently available for
many flavors of Unix (11 are officially supported, not counting
different architectures), Windows, DOS, BeOS, and OpenVMS. Its primary
purpose is to detect weak Unix passwords. Besides several crypt(3)
password hash types most commonly found on various Unix flavors,
supported out of the box are Kerberos AFS and Windows NT/2000/XP/2003
LM hashes, plus several more with contributed patches.   
\end{quote}

\begin{list1}
\item Unix passwords kan knækkes med alec Muffets kendte Crack program
  eller eksempelvis John the Ripper \link{http://www.openwall.com/john/}  
\item Jeg bruger selv John the Ripper
\end{list1}

\slide{Cracking passwords}

\begin{list2}
\item Hashcat is the world's fastest CPU-based password recovery tool.
\item oclHashcat-plus is a GPGPU-based multi-hash cracker using a brute-force attack (implemented as mask attack), combinator attack, dictionary attack, hybrid attack, mask attack, and rule-based attack.
\item oclHashcat-lite is a GPGPU cracker that is optimized for cracking performance. Therefore, it is limited to only doing single-hash cracking using Markov attack, Brute-Force attack and Mask attack.
\item John the Ripper password cracker old skool men stadig nyttig
\end{list2}

Source:\\
\link{https://hashcat.net/wiki/}\\
\link{http://www.openwall.com/john/}

\slide{Parallella John}

\hlkimage{20cm}{parallella-john.png}

\link{https://twitter.com/solardiz/status/492037995080712192}

Warning: FPGA hacking -- not finished part of presentation \smiley

\slide{Stacking Parallella boards}
\hlkimage{16cm}{4BoardStack.jpg}

\link{https://www.parallella.org/}


\slide{Getting to your data: Google for it}

\hlkimage{16cm}{images/googledorks-1.pdf}

\begin{list1}
\item Google as a hacker tool? oprindeligt beskrevet af Johnny Long
\item Concept named googledorks when google indexes information not supposed to be public
\link{http://www.exploit-db.com/google-dorks/} 
\end{list1}

\slide{Buffer overflows et C problem}

\begin{list1}
\item {\bfseries Et buffer overflow}
er det der sker når man skriver flere data end der er afsat plads til
i en buffer, et dataområde. Typisk vil programmet gå ned, men i visse
tilfælde kan en angriber overskrive returadresser for funktionskald og
overtage kontrollen. 
\item {\bfseries Stack protection} 
er et udtryk for de systemer der ved hjælp af operativsystemer,
programbiblioteker og lign. beskytter stakken med returadresser og
andre variable mod overskrivning gennem buffer overflows. StackGuard
og Propolice er nogle af de mest kendte.
\end{list1}

\slide{Buffer og stacks}

\hlkimage{20cm}{buffer-overflow-1.pdf}

\begin{alltt}
main(int argc, char **argv)
\{      char buf[200];
        strcpy(buf, argv[1]); 
        printf("%s\textbackslash{}n",buf);
\}
\end{alltt}


\slide{Overflow -- segmentation fault}

\hlkimage{20cm}{buffer-overflow-2.pdf}


\begin{list1}
\item Bad function overwrites return value!
\item Control return address
\item Run shellcode from buffer, or from other place
\end{list1}


\slide{Exploits -- udnyttelse af sårbarheder}

\begin{list2}
\item Exploit/exploitprogram er udnytter en sårbarhed rettet mod et specifikt system.
\item Kan være 5 linier eller flere sider ofte Perl, Python eller et C program 
\end{list2}

Eksempel demo i Perl, uddrag:
\begin{alltt}\footnotesize
$buffer = ""; 
$null = "\textbackslash{}x00"; 
$nop = "\textbackslash{}x90"; 

$nopsize = 1; 
$len = 201; // what is needed to overflow, maybe 201, maybe more!
$the_shell_pointer = 0x01101d48; // address where shellcode is 
# Fill buffer
for ($i = 1; $i < $len;$i += $nopsize) \{
    $buffer .= $nop;
\}
$address = pack('l', $the_shell_pointer);
$buffer .= $address;
exec "$program", "$buffer";
\end{alltt}


\slide{Hvordan finder man buffer overflow, og andre fejl}

\begin{list1}
\item Black box testing
\item Closed source reverse engineering
\item White box testing
\item Open source betyder man kan læse og analysere koden 
\item Source code review -- automatisk eller manuelt
\item Fejl kan findes ved at prøve sig frem -- fuzzing
\item Exploits virker typisk mod specifikke versioner af software
\end{list1}


\slide{Privilegier least privilege}

\begin{list1}
\item Hvorfor afvikle applikationer med administrationsrettigheder -
  hvis der kun skal læses fra eksempelvis en database?
\item {\bfseries Least privilege} 
betyder at man afvikler kode med det mest
restriktive sæt af privileger -- kun lige nok til at
opgaven kan udføres
\item Dette praktiseres ikke i webløsninger i Danmark -- eller meget få steder
\end{list1}

\slide{Privilegier privilege escalation}
\begin{list1}
\item {\bfseries Privilege escalation} er når man på en eller anden vis
opnår højere privileger på et system, eksempelvis som
følge af fejl i programmer der afvikles med højere
privilegier. Derfor HTTPD servere på Unix afvikles som
nobody -- ingen specielle rettigheder.
\item En angriber der kan afvikle vilkårlige kommandoer kan ofte finde
  en sårbarhed som kan udnyttes lokalt -- få rettigheder = lille skade
\end{list1}


\slide{Local vs. remote exploits}

\begin{list1} 
\item {\bfseries Local vs. remote}
angiver om et exploit er rettet mod
en sårbarhed lokalt på maskinen, eksempelvis
opnå højere privilegier, eller beregnet
til at udnytter sårbarheder over netværk
\item {\bfseries Remote root exploit} 
- den type man frygter mest, idet
det er et exploit program der når det afvikles giver
angriberen fuld kontrol, root user er administrator
på Unix, over netværket. 
\item {\bfseries Zero-day exploits} dem som ikke offentliggøres -- dem
  som hackere holder for sig selv. Dag 0 henviser til at ingen kender
  til dem før de offentliggøres og ofte er der umiddelbart ingen
  rettelser til de sårbarheder
\end{list1}




\slide{Insecure programming buffer overflows 101}

{\bfseries Opgave:} Lav et C program og oversæt det

{\bfseries Forslag til fremgangsmåde:}
\begin{list2}
\item Prøv at skrive dette program ind som \verb+demo.c+
\item Dernæst oversættes med kommandoen:
\verb+gcc -o demo demo.c+
\item start programmet med kommandoen
\verb+./demo test+ eller andre input
\end{list2}

{\bfseries Hjælp:}
\begin{alltt}
main(int argc, char **argv)
\{      char buf[10];
        strcpy(buf, argv[1]); 
        printf("%s\textbackslash{}n",buf);
\}
the_shell()
\{  system("/bin/sh");  \}
\end{alltt}


\slide{GDB GNU Debugger}

\begin{list1}
\item GNU compileren og debuggeren fungerer ok, men check andre!
\item Prøv \verb+gdb ./demo+ og kør derefter programmet fra \emph{gdb prompten}
med  \verb+run 1234+
\item Når I således ved hvor lang strengen skal være kan I fortsætte
  med \verb+nm+ kommandoen -- til at finde adressen på
  \verb+the_shell+\\
Skriv \verb+nm demo | grep shell+

\item Kunsten er således at generere en streng der er præcist så lang
  at man får lagt denne adresse ind på det \emph{rigtige sted}.
\item Perl kan erstatte AAAAA således \verb+`perl -e "print 'A'x10"`+
\end{list1}


\slide{Debugging af C med GDB}

\begin{list1}
\item Vi laver sammen en session med GDB
\item Afprøvning med diverse input
\begin{list2}
\item \verb+./demo langstrengsomgiverproblemerforprogrammethvorformon+    
\item \verb+gdb demo+ efterfulgt af run med parametre\\
\verb+run AAAAAAAAAAAAAAAAAAAAAAAAAAAAA+
\end{list2}
\end{list1}

{\bfseries Hjælp:}\\
Kompiler programmet og kald det fra kommandolinien med 
\verb+./demo 123456...7689+ indtil det dør ... derefter prøver I det
samme i GDB

Hvad sker der? Avancerede brugere kan ændre 
\verb+strcpy+ til \verb+strncpy+


\slide{GDB output}

\begin{alltt}
\small
hlk@bigfoot:demo$ gdb demo
GNU gdb 5.3-20030128 (Apple version gdb-330.1) (Fri Jul 16 21:42:28 GMT 2004)
Copyright 2003 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "powerpc-apple-darwin".
Reading symbols for shared libraries .. done
(gdb) {\bf run AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA}
Starting program: /Volumes/userdata/projects/security/exploit/demo/demo AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
Reading symbols for shared libraries . done
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA

Program received signal EXC_BAD_ACCESS, Could not access memory.
{\bf 0x41414140} in ?? ()
(gdb) 
\end{alltt}
%$

\slide{Buffer overflows}

\hlkimage{3cm}{images/shellcoders-handbook.jpg}

\begin{list1}
\item Hvis man vil lære at lave buffer overflows og exploit programmer
  er følgende dokumenter et godt sted at starte
\item \emph{Smashing The Stack For Fun And Profit} Aleph One
\item \emph{Writing Buffer Overflow Exploits with Perl -- anno 2000}
\item Følgende bog kan ligeledes anbefales:
\emph{The Shellcoder's Handbook : Discovering and Exploiting Security Holes} 
af Jack Koziol, David Litchfield, Dave Aitel, Chris Anley, Sinan
"noir" Eren, Neel Mehta, Riley Hassell, John Wiley \& Sons, 2004 
\item NB: Bogen er avanceret og således IKKE for begyndere! 
\end{list1}



\slide{Forudsætninger}

\begin{list1}
\item Bemærk: alle angreb har forudsætninger for at virke
\item Et angreb mod Telnet virker kun hvis du bruger Telnet
\item Et angreb mod Apache HTTPD virker ikke mod Microsoft IIS
\item Kan du bryde kæden af forudsætninger har du vundet!
\end{list1}

\slide{Eksempler på forudsætninger}


\begin{list1}
\item Computeren skal være tændt
\item Funktionen der misbruges skal være slået til
\item Executable stack
\item Executable heap
\item Fejl i programmet
\end{list1}

\vskip 2cm 

\centerline{\color{titlecolor}\LARGE \bf alle programmer har fejl}


\slide{Stack protection}

\begin{list1}
\item Stack protection er mere almindeligt\\
- med i OpenBSD current fra 2. dec 2002

\item Buffer overflows er almindeligt kendte
\begin{list2}    
\item Selv OpenSSH har haft buffer overflows
\item Stack protection prøver at modvirke/fjerne
  muligheden for buffer overflows. arbitrary code execution
  bliver til ude af drift for berørte services
\end{list2}

\item ProPolice\\
\link{http://www.openbsd.org}\\
\link{https://web.archive.org/web/20140604021923/http://www.research.ibm.com/trl/projects/security/ssp/} % Original side er død

\item StackGuard\\
\link{https://web.archive.org/web/20040724124002/http://www.immUnix.org/stackguard.html} % Original side er død
\end{list1}

\slide{Gode operativsystemer}

\begin{list1}
\item Nyere versioner af Microsoft Windows, Mac OS X og Linux distributionerne inkluderer:
\begin{list2}
\item Buffer overflow protection
\item Stack protection, non-executable stack
\item Heap protection, non-executable heap
\item \emph{Randomization of parameters} stack gap m.v.
\end{list2}
\item Vælg derfor hellere:
\begin{list2}
\item Windows 7/8, fremfor Windows XP
\item Mac OS X 10.9 fremfor 10.6
\item Linux sikkerhedsopdateringer, sig ja når de kommer
\end{list2}
\item Det samme gælder for serveroperativsystemer
\item NB: Meget få indlejrede systemer har beskyttelse!
\end{list1}

\slide{Defense in depth - multiple layers of security}

\hlkimage{7cm}{security-layers-1.pdf}

\centerline{Forsvar dig selv med flere lag af sikkerhed! }


\slide{Undgå standard indstillinger}

\begin{list1}
\item Når vi scanner efter services går det nemt med at finde dem
\item Giv jer selv mere tid til at omkonfigurere og opdatere ved at undgå standardindstillinger
\item Tiden der går fra en sårbarhed annonceres på bugtraq til den
  bliver udnyttet er meget kort i dag! 
\item Ved at undgå standard indstillinger kan der
  måske opnås en lidt længere frist -- inden ormene kommer
\item NB: Ingen garanti -- og det hjælper sjældent mod en dedikeret angriber
\item Dårlige passwords og konfigurationsfejl -- ofte overset
\end{list1}


\slide{Client side: Flash, PDF, Facebook}

\hlkimage{26cm}{drive-by-download-wikipedia.png}

\vskip 1cm
\centerline{Kan vi undvære Flash og PDF?}

Kilde: \link{https://en.wikipedia.org/wiki/Drive-by_download}


\slide{Flash blockers}

\hlkimage{6cm}{clicktoflash.png}

\begin{list1}
\item Safari \link{https://hoyois.github.io/safariextensions/clicktoplugin/}
\item Firefox Extension Flashblock
\item Chrome extension called FlashBlock
\item Internet Explorer 8: IE has the Flash block functionality built-in so you don't need to install any additional plugins to be able to block flash on IE 8.
\item FlashBlock for Opera 9 -- bruger nogen Opera mere?
\item FlashBlockere til iPad? iPhone? Android? -- hvorfor er det ikke default?
\end{list1}


\slide{The Exploit Database -- dagens buffer overflow}

\hlkimage{20cm}{exploit-db.png}

\centerline{\link{http://www.exploit-db.com/}}

\slide{Metasploit and Armitage Still rocking the internet}


\hlkimage{20cm}{metasploit-about.png}

\begin{list1}
\item Udviklingsværktøjerne til exploits er i dag meget raffinerede!
\item \link{http://www.metasploit.com/}
\item Armitage GUI fast and easy hacking for Metasploit\\
\link{http://www.fastandeasyhacking.com/}
\item Kursus Metasploit Unleashed\\
\link{http://www.offensive-security.com/metasploit-unleashed/Main_Page}
\item Bog: Metasploit: The Penetration Tester's Guide, No Starch Press\\
ISBN-10: 159327288X
\end{list1}

\slide{Demo: Metasploit Armitage }

\hlkimage{16cm}{armitage-overview.png}
`
\slide{CTF}

\hlkimage{8cm}{DSCF3910s.jpg}

\begin{list1}
\item Næsten hvert år afholdes en dansk CTF konkurrence 
\item I 2014 var det fredag den 28. november og hele natten til lørdag
\item Capture the Flag er en mulighed for at afprøve sine hackerskillz
\item Distribueret CTF med hold  Sjovt og lærerigt 
\end{list1}
Kilde: \link{http://prosa-ctf.the-playground.dk/}

\centerline{Get ready! Lær debuggere, Perl, Java at kende, start på at hacke}


\slide{Security devops}

\begin{list1}
\item We need devops skillz in security
\item automate, security is also big data
\item integrate tools, transfer, sort, search, pattern matching, statistics, ...
\item tools, languages, databases, protocols, data formats
\item Example introductions:
\begin{list2}
\item Seven languages/database/web frameworks in Seven Weeks
\item Elasticsearch the definitive guide\\
\link{http://www.elasticsearch.org/guide/en/elasticsearch/guide/current/index.html}
\item \link{http://www.elasticsearch.org/overview/kibana/}
\item \link{http://www.elasticsearch.org/overview/logstash/}
\end{list2}
\end{list1}

\centerline{We are all Devops now, even security people!}


\slide{Recommended Books: Get Started }


\begin{list1}

\item \emph{Network Security Through Data Analysis: Building Situational Awareness}\\
By Michael Collins, O'Reilly Media, February 2014 Pages: 348
Low page count, but high value! Recommended.
\hlkimage{8cm}{network-security-through-data-analysis.png}

\item \emph{24 Deadly Sins of Software Security} 
Michael Howard, David LeBlanc, John Viega 2. udgave, første hed 19 Deadly Sins
\hlkimage{8cm}{24-deadly.jpg}
\end{list1}


\myquestionspage

\end{document}
