\documentclass[20pt,landscape,a4paper,footrule]{foils}
\usepackage{solido-network-slides}
%\usepackage{ulem}


% Basic things that we need are below
\selectlanguage{danish}

%\externaldocument{unix-audit-security-oevelser}
\externaldocument{\jobname-exercises}

\begin{document}
% beskrivelse findes i beskrivelse.txt

% lavet med basis i advanced-unix-admin kurset!

\mytitlepage
{Introduktion til IPv6 workshop}
{August 2013}


\hlkprofil


\slide{Kursusforløb}


\begin{list1}
\item Vi skal have glæde af hinanden i følgende kursusforløb   
\begin{list2}
\item 1 dag med workshop
%\item 2 dage Apache HTTP server
\end{list2}
\item I skal udover at lære en masse om protokoller og netværk 
\item Forhåbentlig lærer i nogle gode vaner!
\item Jeres arbejde med netværk kan lettes betydeligt - hvis I starter rigtigt!
\end{list1}


\slide{Kursusmateriale}
\label{reftest}

\hlkimage{4cm}{old_book_lumen_design_st_01.png}

\begin{list1}
\item Dette materiale består af flere dele:
\begin{list2}
%\item Introduktionsmateriale med baggrundsinformation
\item Kursusmaterialet - præsentationen til undervisning - dette sæt
\item Øvelseshæfte med øvelser
\end{list2}
\item Hertil kommer diverse ressourcer fra internet og Kali Linux distribution 
\item Bemærk: kursusmaterialet er ikke en substitut for andet materiale, der er udeladt mange detaljer som forklares undervejs, eller kan slås op på internet 
\end{list1}


% lad være hvis der er 10+ deltagere
%\deltagere

%\dagsplan

\slide{Formål: TCP/IP netværk}
\hlkimage{21cm}{firewall-netvaerk-1.pdf}
\centerline{IP-baserede netværk - internet er overalt}

\slide{Formål: mere specifikt}

\hlkimage{4cm}{IPv6ready.png}

\begin{list1}
\item At introducere IP netværk med IPv6
\item Kendskab til almindeligt brugte protokoller\\
 - VLAN, DNS, ARP, NDP, TCP, UDP m.v. 
\item Kendskab til almindelige værktøjer i disse miljøer\\
 - ping, traceroute, Nping, iperf m.v. 

\item NB: ja, jeg bruger en masse Unix og applikationer på Unix\\
{\bf men de fleste af programmerne KAN installeres på Windows,\\
eller der kan findes alternativer der benytter samme protokoller!}
\end{list1}

\slide{Forudsætninger}

\begin{list1}
\item Dette er en workshop og fuldt udbytte kræver at
  deltagerne udfører praktiske øvelser
\item Kurset anvender Unix til øvelser, men forudgående Unix kendskab
er ikke nødvendigt
\item De fleste øvelser kan udføres fra en Windows PC med virtuel maskine
\item Øvelserne foregår via
\begin{list2}
\item Login til Unix maskinen
\item Direkte fra jeres systemer Windows eller Linux boot CD/Virtuel maskine
\item Via administrationsprogrammer, ofte webinterfaces
\end{list2}
\end{list1}



\slide{Kursusfaciliteter}

\begin{list1}
\item Der er opbygget et kursusnetværk med følgende primære systemer:
\begin{list2}
\item Unix server Fiona med HTTP server og værktøjer
\item Unix boot CD'er eller VMware images - jeres systemer
\item WLAN "kamenet" med kode "henrik42"
\end{list2}
\item På Fiona er oprettet kursusbrugere\\ - kursus1,
  kursus2, kursus3, ... kodeordet er {\bf kursus}
\begin{alltt}
Login: {\bf kursus1}
Password: {\bf kursus}
\end{alltt}

\item Det er en fordel at benytte hver sin bruger, så man kan gemme scripts
\item På de resterende systemer kan benyttes brugeren {\bf kursus}
\end{list1}

\begin{alltt}
Login: {\bf kursus}
Password: {\bf kursus42} el {\bf kursus}
\end{alltt}

\slide{Demo: Kali Linux the new backtrack}

\hlkimage{\linewidth-2cm}{kali-linux.png}

\begin{list1}
\item BackTrack \link{http://www.backtrack-linux.org}
\item  Kali \link{http://www.kali.org/}
\end{list1}

\slide{Hackerværktøjer}
% måske til reference afsnit?

\begin{list1}
\item Jeg benytter en del værktøjer i min dagligdag:
\begin{list2}
\item Nmap, Nping - tester porte, godt til firewall admins \link{http://nmap.org}
\item Metasploit Framework gratis på \link{http://www.metasploit.com/}
\item Wireshark avanceret netværkssniffer - \link{http://http://www.wireshark.org/} 
%\item Paros proxy \link{http://www.parosproxy.org}
\item Burpsuite \link{http://portswigger.net/burp/}
\item Skipfish \link{http://code.google.com/p/skipfish/}
\item OpenBSD operativsystem med fokus
  på sikkerhed  \link{http://www.openbsd.org} 
\end{list2}
\item Vi når ikke at gennemgå alle disse
\end{list1}

\centerline{Der er mere end 300 værktøjer til rådighed på Kali/BackTrack}

\slide{Stop - tid til check}

\begin{list1}
\item Er alle kommet
\item Har alle en PC med
\item Har alle et kabel eller trådløst netkort som virker
\item Der findes et trådløst netværk ved navn {\bf kamenet} kode {\bf henrik42}
\item Mangler der strømkabler
\item Mangler noget af ovenstående, sæt nogen igang med at finde det :-)
\end{list1}

\exercise{ex:putty-install}

\exercise{ex:winscp-install}

\exercise{ex:unix-login}


\slide{Unix starthjælp}
\begin{list1}
\item Da Unix indgår er her et lille \emph{cheat sheet} til Unix
\begin{list2}
\item DOS/Windows kommando - tilsvarende Unix, og forklaring
\item dir - ls - står for list files, viser filnavne
\item del - rm - står for remove, sletter filer
%\item ren - mv - move flytter filer til nyt navn, rename
%\item md - mkdir - make directory, lav en mappe/katalog
\item cd - cd - change directory, skifter katalog
\item type - cat - concatenate, viser indholdet af tekstfiler 
\item more - less - viser tekstfiler en side af gangen
\item attrib - chmod - change mode, ændrer rettighederne på filer 
\end{list2}
\item Prøv bare:
  \begin{list2}
    \item {\bfseries ls} list, eller long listing med {\bfseries ls -l} 
    \item {\bfseries cat /etc/hosts} viser hosts filen 
\item {\bfseries chmod +x head.sh} - sæt execute bit på en fil så den
  kan udføres som et program med kommandoen \verb+./head.sh+
  \end{list2}
\end{list1}


\slide{Agenda - dag 1 IPv6 workshop}

\begin{list1}
\item Opstart - hvad er IP og TCP/IP repetition, TCP, UDP, Subnets og CIDR
\item Basale værktøjer traceroute, ping, dig, host
\item Wireshark sniffer
\item SSL Secure Sockets Layer
\item VLAN 802.1q
\item Målinger nping, iperf, apache benchmark (ab)
\item Tuning og perfomancemålinger 
\item Plus diverse webinterfaces og administrationsværktøjer
\item Adresseplaner og Infrastrukturer i praksis - netværksdesign
\item Afslutning og opsummering på workshop
\end{list1}

% agenda slut

\slide{Status idag på internet}

\hlkimage{18cm}{ipv4-address-report-2012.png}

Kilde: \link{http://www.potaroo.net/tools/ipv4/}


\slide{Why IPv6}

\hlkimage{5cm}{ipv4-run-out.png}
	
\slide{IPv6 is coming}

\hlkimage{2cm}{IPv6ready.png}

\begin{list1}
\item An important consideration is that IPv6 is quite likely to be already running on the enterprise network, whether that implementation was planned or not. Some important characteristics of IPv6 include:
\begin{list2}
\item IPv6 has a mechanism to automatically assign addresses so that end systems can easily establish communications.
\item IPv6 has several mechanisms available to ease the integration of the protocol into the network.
\item Automatic tunneling mechanisms can take advantage of the underlying IPv4 network and connect it to the IPv6 Internet.
\end{list2}
\end{list1}

Kilde:\\
{\footnotesize\link{http://www.cisco.com/en/US/prod/collateral/iosswrel/ps6537/ps6553/white_paper_c11-629391.html}}


\slide{Implications}

\hlkimage{2cm}{IPv6ready.png}

\begin{list1}
\item For an IPv4 enterprise network, the existence of an IPv6 overlay network has several of implications:
\begin{list2}
\item The IPv4 firewalls can be bypassed by the IPv6 traffic, and leave the security door wide open.
\item Intrusion detection mechanisms not expecting IPv6 traffic may be confused and allow intrusion
\item In some cases (for example, with the IPv6 transition technology known as 6to4), an internal PC can communicate directly with another internal PC and evade all intrusion protection and detection systems (IPS/IDS). Botnet command and control channels are known to use these kind of tunnels.
\end{list2}
\end{list1}

Kilde:\\
{\footnotesize\link{http://www.cisco.com/en/US/prod/collateral/iosswrel/ps6537/ps6553/white_paper_c11-629391.html}}


\slide{IPv6 in the Nordic region}

\hlkimage{14cm}{ipv6-nordic.png}

\link{http://v6asns.ripe.net/v/6?s=_ALL;s=DK;s=SE;s=NO;s=NL}

\slide{Metasploit IPv6}

\hlkimage{21cm}{metasploit-blog-ipv6.png}

Kilde:\\
{\small \link{https://community.rapid7.com/community/metasploit/blog/2012/03/07/}}



\slide{NIST Special Publication 800 series}

\hlkimage{16cm}{nist-sp-800-119.png}

\begin{list1}
\item SP 800-119	Dec. 2010	\emph{Guidelines for the Secure Deployment of IPv6}\\
God introduktion til IPv6 og sikkerhed i forbindelse med IPv6
\end{list1}

\link{http://csrc.nist.gov/publications/PubsSPs.html}



\slide{How to use IPv6}

\begin{center}
\vskip 3 cm
\hlkbig
www.solidonetworks.com

hlk@solidonetworks.com
\end{center}

\slide{Really how to use IPv6?}

\begin{list1}
\item Get IPv6 address and routing
\item Add AAAA (quad A) records to your DNS
\item Done
\end{list1}
\vskip 1cm
\centerline{\Large www.solidonetworks.com}

\begin{alltt}
\LARGE
www     IN	A       91.102.95.20
        IN	AAAA    2a02:9d0:10::9
\end{alltt}

\slide{IPv6 business case}


\begin{list2}
\item An almost unlimited scalability with a very large IPv6 address space ($2^128$ addresses), enabling IP addresses to each and every device.

\item Address self-configuration mechanisms, easing the deployment.

\item Improved security and authentication features, such as mandatory IPSec capacities and the possibility to use of the address space to include encryption keys.

\item Peer-to-peer connectivity, solving the NAT barrier with specific and permanent IP addresses for any device and/or user of the Internet.

\item Mobility features, enabling a seamless connexion when moving from one access point to another access point on the Internet.

\item Multi cast and any cast functionalities.

\item IPv6 will provide an easier remote interaction with each and every device with a {\bfseries direct integration to the Internet.} In other words, IPv6 will make possible to move from a network of servers, to a network of things.

\end{list2}

\centerline{ Business case for IPv6 is {\bf continuity}}


{\footnotesize Partial quote from http://www.smartipv6building.org/index.php/en/ipv6-potential}


\slide{IPv6: Internet redesigned? - no!}
 
\begin{list1}
\item Preserve the good stuff
\item back to basics, internet as it used to be!
\item fate sharing - connection rely on end points, not intermediary NAT boxes
\item end-to-end transparency - you have an address and I have an address
\item Wants: bandwidth +10G, low latency/predictable latency, Quality of Service, Security
\end{list1}

\vskip 5mm
\centerline{\color{titlecolor}\LARGE \bf IPv6 is evolution, not revolution}
\vskip 5mm

Note: IPv6 was not designed to solve all problems, so don't expect it to!


\slide{Up and running with IPv6}

\begin{list1}
%\item Join the fun - join the wireless network
\item Use ping/ping6 and traceroute to test connectivity
\item Try in your browser:
\begin{list2}
\item \link{http://www.kame.net} Dancing turtle
\item \link{http://www.ripe.net} RIPE, look for address up right corner 
\item \link{http://loopsofzen.co.uk/} Play a game
\item \link{https://www.sixxs.net/} Apply for IPv6 tunnel 
\end{list2}
\item Done \smiley
\end{list1}




% days 1-5
\input{basic-tcpip-1.tex}

\slide{Deploy IPv6}

\hlkimage{10cm}{ipv6actnow.png}

\hlkimage{22cm}{ipv6_puzzle.png}

\centerline{\link{http://www.ipv6actnow.org}}


\slide{Collect information about IPv6}

\begin{list1}
\item \emph{Guidelines for the Secure Deployment of IPv6}, SP800-119, NIST\\
\link{http://csrc.nist.gov/publications/nistpubs/800-119/sp800-119.pdf}
\item \link{http://www.ripe.net}
\item \emph{Preparing an IPv6 Addressing Plan Manual}, Surfnet
\item This presentation \smiley
\vskip 1cm
\item Book: \emph{IPv6 Network Administration}
af David Malone og Niall Richard Murphy
\item Book: \emph{The Second Internet: Reinventing Computer Networks with IPv6}, Lawrence E. Hughes, October 2010,\\ \link{http://www.secondinternet.org/}
\item Book: \emph{Understanding IPv6: Your Essential Guide to IPv6 on Windows Networks}
Joseph Davies  Microsoft Press; 3 edition (June 27, 2012)
\end{list1}

\slide{Collect information about your network}

\begin{list1}
\item devices - what is a network device?
\item switches - Layer 2 does not matter much, management by RFC-1918 IPv4 is probably wise
\item routers - most important, connectivity MUST support IPv6. Check vendor home page - do NOT assume support is ready
\item Security devices: firewalls, IDS/IPS, VPN - critical and support in general poor. Some vendors such as Cisco ASA and Juniper SRX has good support

\end{list1}


\slide{Allocating IPv6 addresses} 

\begin{list1}
\item You have plenty!
\item Providers and LIRs will typically get /32
\item Providers will typically give organisations /48 or /56
\item Your /48 can be used for:
\begin{list2}
\item 65536 subnets - all host subnets are /64
\item Each subnet has $2^{64}$ addresses
\end{list2}
\end{list1}

\slide{Preparing an IPv6
Addressing Plan}

\hlkimage{20cm}{ipv6-address-plan-ripe.png}

{\footnotesize \link{http://www.ripe.net/training/material/IPv6-for-LIRs-Training-Course/IPv6_addr_plan4.pdf}}

\slide{Example adress plan input}

\hlkimage{22cm}{ipv6-linked-to-ipv4.png}

\centerline{Easy and coupled with VLAN IDs it will work \smiley}

\slide{Run IPv6 in production}

\begin{list1}
\item Make sure you establish IPv6 in {\bf production}
\item Enabling service on IPv6 without production - bad experience for users
\item Start by enabling your DNS servers for IPv6 - and DNSSEC - and DNS over TCP\\
Remember that your firewall might have problems with large DNS packets
\item Add a production IPv6 router - hardware device or generic server
\item Tunnels are OK, and SixXS consider their service production
\end{list1}





\slide{IPv6 security}

\begin{list1}
\item Yes, IPv6 software has flaws, and Type 0 routing header is deprecated
\emph{RFC 5095 - Deprecation of Type 0 Routing Headers in IPv6}
\item NOTE: a lot of problems are similar to IPv4, mac overflow in IPv4 or IPv6 is quite similar IMHO
\end{list1}

\slide{ Attack toolkits, testing devices}
\begin{list1}
\item \link{http://www.thc.org/thc-ipv6/}
\item \link{http://www.si6networks.com/research/tools.html}
\end{list1}

\slide{IPv6 hackers Mailinglist}

\begin{list1}
\item \link{http://lists.si6networks.com/pipermail/ipv6hackers/}
\item IPv6 hackers meeting, video: \link{http://www.youtube.com/user/deploy360}\\
{\footnotesize
\link{http://www.insinuator.net/2013/08/ipv6-hackers-meeting-ietf-87-in-berlin-slides/}}

\end{list1}

\slide{THC}

\begin{quote}
 A complete tool set to attack the inherent protocol weaknesses of IPV6
 and ICMP6, and includes an easy to use packet factory library.
\end{quote}


\begin{list1}

\item  Last update 2012-01-15 - opdateres løbende\\
Current public version: v1.8 - CCC Camp release
\end{list1}


\link{http://thc.org/thc-ipv6/}


\slide{THC IPv6 [0x03] The Included Tools}

\begin{list2}
\item - parasite6: icmp neighbor solitication/advertisement spoofer, puts you
   as man-in-the-middle, same as ARP mitm (and parasite)
\item - alive6: an effective alive scanng, which will detect all systems
   listening to this address
\item - dnsdict6: parallized dns ipv6 dictionary bruteforcer
\item - fake\_router6: announce yourself as a router on the network, with the
  highest priority
\item - redir6: redirect traffic to you intelligently (man-in-the-middle) with
    a clever icmp6 redirect spoofer
\item - toobig6: mtu decreaser with the same intelligence as redir6
\item - detect-new-ip6: detect new ip6 devices which join the network, you can
    run a script to automatically scan these systems etc.
\item - dos-new-ip6: detect new ip6 devices and tell them that their chosen IP
    collides on the network (DOS).
\item - trace6: very fast traceroute6 with supports ICMP6 echo request and TCP-SYN
\item - flood\_router6: flood a target with random router advertisements
\item - flood\_advertise6: flood a target with random neighbor advertisements
\item - exploit6: known ipv6 vulnerabilities to test against a target
\item - denial6: a collection of denial-of-service tests againsts a target
\item - fuzz\_ip6: fuzzer for ipv6
\item - implementation6: performs various implementation checks on ipv6
\item - implementation6d: listen daemon for implementation6 to check behind a fw
\item - fake\_mld6: announce yourself in a multicast group of your choice on the net
\item - fake\_mld26: same but for MLDv2
\item - fake\_mldrouter6: fake MLD router messages
\item - fake\_mipv6: steal a mobile IP to yours if IPSEC is not needed for authentication
\item - fake\_advertiser6: announce yourself on the network
\item - smurf6: local smurfer
\item - rsmurf6: remote smurfer, known to work only against linux at the moment
\item - sendpees6: a tool by willdamn(ad)gmail.com, which generates a neighbor
          solicitation requests with a lot of CGAs (crypto stuff ;-) to keep the CPU busy. nice.
\item         - thcping6: sends a hand crafted ping6 packet
\item         [and about 15 more tools for you to discover]

\end{list2}

\slide{Danish resources - get involved}

\hlkimage{10cm}{taskforce-logo.jpg}

\centerline{ Danish IPv6 task force - unofficial
\link{http://www.ipv6tf.dk}}

\slide{Opsummering}

\vskip 3 cm

\begin{list1}
\item Husk følgende:
\begin{list2}
\item Unix og Linux er blot eksempler - navneservice eller HTTP
  server kører fint på Windows
\item DNS er grundlaget for Internet, specielt for IPv6
\item Sikkerheden på internet er generelt dårlig, brug SSL!
\item Man skal \emph{hærde} operativsystemer \emph{før} man sætter dem på
  Internet 
\item God sikkerhed kommer fra langsigtede intiativer\\
\end{list2}
\item Jeg håber I har lært en masse om netværk og kan bruge det i praksis :-)
\end{list1}

\slide{Spørgsmål?}


\vskip 4cm

\begin{center}
\hlkbig 

\myname

\myweb
\vskip 2 cm

I er altid velkomne til at sende spørgsmål på e-mail
\end{center}


\slide{Referencer: anbefalede netværksbøger}

\begin{list2}
\item \emph{Network Warrior, 2nd Edition
Everything you need to know that wasn't on the CCNA exam}
af Gary A. Donahue
Publisher: O'Reilly Media
Released: May 2011

\item \emph{IPv6 Network Administration}
af David Malone og Niall Richard Murphy
 - god til real-life admins, typisk
O'Reilly bog

\item \emph{Understanding IPv6: Your Essential Guide to IPv6 on Windows Networks}
Joseph Davies  Microsoft Press; 3 edition (June 27, 2012)
\end{list2}


\slide{Generelle TCP/IP bøger}

\begin{list2}
\item Stevens, Comer klassiske bøger om TCP/IP
\item KAME bøgerne om IPv6 protokollerne, meget detaljerede
\item O'Reilly cookbooks: Cisco, BIND og Apache HTTPD m.fl.
\item Cisco Press og website
\item Juniper website specielt Day One booklets
\item Firewall bøger Cheswick 
\item Der findes mange gode bøger om netværk
\end{list2}

\slide{Bøger om IPv6}

\begin{list1}
\item \emph{IPv6 Essentials} af Silvia Hagen, O'Reilly 2nd edition (May 17, 2006)
	god reference om emnet - men ca. samme indhold som RFC'erne
\item \emph{IPv6 Core Protocols Implementation}
af Qing Li, Tatuya Jinmei og Keiichi Shima - detaljeret information om implementation
\item \emph{IPv6 Advanced Protocols Implementation}
af Qing Li, Jinmei Tatuya og Keiichi Shima
\item - flere andre
\end{list1}


\end{document}