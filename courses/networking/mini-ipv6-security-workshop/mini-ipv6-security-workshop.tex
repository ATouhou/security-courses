
\documentclass[20pt,landscape,a4paper,footrule]{foils}
\usepackage{solido-network-slides}
\usepackage{ulem}

% Basic things that we need are below
\selectlanguage{danish}

%\externaldocument{unix-audit-security-oevelser}
\externaldocument{\jobname-exercises}

\begin{document}
% beskrivelse findes i beskrivelse.txt

% lavet med basis i advanced-unix-admin kurset!

\mytitlepage
{IPv6 Security Workshop}
{August 2013}


\hlkprofiluk


\slide{Planen idag}
\vskip 2 cm

\hlkimage{5cm}{dont-panic.png}
\centerline{\color{titlecolor}\LARGE Don't Panic!}

\begin{list1}
\item Kl 12-15
\item Mindre foredrag mere snak
\item Mindre enetale, mere foredrag 2.0 med socialt medie, informationsdeling og interaktion
\end{list1}
\centerline{Send gerne spørgsmål senere}



\slide{Kursusmateriale}
\label{reftest}

\hlkimage{4cm}{old_book_lumen_design_st_01.png}

\begin{list1}
\item Dette materiale består af flere dele:
\begin{list2}
%\item Introduktionsmateriale med baggrundsinformation
\item Kursusmaterialet - præsentationen til undervisning - dette sæt
\item Øvelseshæfte med øvelser
\end{list2}
\item Hertil kommer diverse ressourcer fra internet
\item Boot DVD'er baseret på BackTrack Linux - image udleveres
\end{list1}


% lad være hvis der er 10+ deltagere
%\deltagere

%\dagsplan

\slide{Formål: netværkssikkerhed for TCP/IP netværk}
\hlkimage{12cm}{1969_4-node_map.jpg}
\centerline{TCP/IP-baserede netværk - internet er overalt}

\slide{Formål: mere specifikt}

\hlkimage{4cm}{IPv6ready.png}


\begin{list1}
\item At introducere TCP/IP version 6
\item Introducere specifikke sikkerhedsproblemer ved brug af IPv6
\end{list1}

\slide{Forudsætninger}

\begin{list1}
\item Dette er en workshop og fuldt udbytte kræver at
  deltagerne udfører praktiske øvelser
\item Kurset anvender Unix til øvelser, men Unix kendskab
er ikke nødvendigt
\item De fleste øvelser kan udføres fra Windows 7 
\item Øvelserne foregår via
\begin{list2}
\item Login til Unix maskinen
\item Direkte fra jeres systemer Windows eller Linux boot DVD/Virtuel server
\end{list2}
\end{list1}

\slide{Kursusfaciliteter}

\begin{list1}
\item Der er opbygget et kursusnetværk med følgende primære systemer:
\begin{list2}
\item Unix server Fiona med HTTP server og værktøjer
%\item Sun Solaris PC server ved navn Flaffy, Athlon 64 X2 med 2GB ram
\item Unix boot DVD'er eller VMware images - jeres systemer
\end{list2}
\item På Unix serveren tillades login diverse kursusbrugere - kursus1,
  kursus2, kursus3, ... kodeordet er {\bf kursus}
\begin{alltt}
Login: {\bf kursus1}
Password: {\bf kursus}
\end{alltt}

\item Det er en fordel at benytte hver sin bruger, så man kan gemme scripts
\item På de resterende systemer kan benyttes brugeren {\bf kursus}
\end{list1}

\begin{alltt}
Login: {\bf kursus}
Password: {\bf kursus42} el {\bf kursus}
\end{alltt}


\slide{Hackerværktøjer}
% måske til reference afsnit?

\begin{list1}
\item Der benyttes en del værktøjer:
\begin{list2}
\item Nmap, Nping - tester porte, godt til firewall admins \link{http://nmap.org}
\item Metasploit Framework gratis på \link{http://www.metasploit.com/}
\item Wireshark avanceret netværkssniffer - \link{http://http://www.wireshark.org/} 
%\item Paros proxy \link{http://www.parosproxy.org}
\item Burpsuite \link{http://portswigger.net/burp/}
\item Skipfish \link{http://code.google.com/p/skipfish/}
\item Apache Tomcat J2EE servlet container \link{http://tomcat.apache.org}
\item OpenBSD operativsystem med fokus
  på sikkerhed  \link{http://www.openbsd.org} 
\end{list2}
\end{list1}

\slide{BackTrack 5 og sniffer programmer}

\hlkimage{16cm}{bt5-revolution-blogpost-BTL.png}

\begin{list1}
\item Wireshark - \link{http://www.wireshark.org} avanceret netværkssniffer\\
bruger vi til at sniffe, vi bruger Wireshark til primære demo, nævner Ettercap osv.
\item BackTrack \link{http://www.backtrack-linux.org/}
BackTrack er baseret på Linux og må kopieres frit :-)
\end{list1}



\slide{Stop - tid til check}

\begin{list1}
\item Er alle kommet
\item Har alle en PC med
\item Har alle et kabel eller trådløst netkort som virker
\item Der findes et trådløst netværk ved navn {\bf kamenet}
\item Mangler der strømkabler
\item Mangler noget af ovenstående, sæt nogen igang med at finde det :-)
\end{list1}


\slide{Status idag på internet}

\hlkimage{18cm}{ipv4-address-report-2012.png}

Kilde: \link{http://www.potaroo.net/tools/ipv4/}


\slide{Why IPv6}

\hlkimage{5cm}{ipv4-run-out.png}
	

\slide{DDoS udviklingen, januar 2010 rapporten}

\hlkimage{15cm}{DDoS-2010.png}

Kilde:
\link{http://www.arbornetworks.com/report} 2009 rapporten



\slide{DDoS udviklingen, februar 2011}

\hlkimage{15cm}{ddos-2010-arbornetworks.png}

Kilde:
\link{http://www.arbornetworks.com/report} 2010 rapporten


\slide{Worldwide Infrastructure Security Report, 2010 Report}

\begin{quote}

{Key finding:\\
\bf Application-Layer DDoS Attacks Are Increasing in Sophistication and Operational Impact}\\
IDC and mobile/fixed wireless operators in particular are reporting significant outages, increased OPEX, customer churn and revenue loss due to application-layer DDoS attacks. These attacks are targeting both their customers and their own ancillary supporting services, such as DNS, Web portals, etc.\\
...\\
Conclusions\\
We further note that the fastest-growing category of ISPs-mobile and fixed wireless broadband operators-are also the least-prepared organizations in terms of network visibility, network control, and overall ability to successfully defend themselves and their customers against attack. These operators are balancing an overwhelming array of threats with conflicting budget pressures and business objectives.
\end{quote}

Mere komplekse trusler, betyder det flere firewall?


\slide{Worldwide Infrastructure Security Report 2010 Volume VI}

\begin{list2}
\item Application-Layer DDoS Attacks Are Increasing in Sophistication and Operational Impact
\item Mobile/Fixed Wireless Operators Are Facing Serious Challenges to Maintaining Availability in the Face of Attacks
\item Firewalls and IPS Devices Are Falling Short on DDoS Protection
\item DNS Has Broadly Emerged as an Attack Target and Enabler
\item {\bf Lack of Visibility into and Control over IPv6 Traffic Is a Significant Challenge}
\item Chronic Underfunding of Operational Security Teams
\item Operators Continue to Express Low Confidence in the Efficacy of Law Enforcement
\item Operators Have Little Confidence in Government Efforts to Protect Critical Infrastructure
\end{list2}

Kilde:
\link{http://www.arbornetworks.com/report} 


\slide{Worldwide Infrastructure Security Report 2011 Volume VII}

\begin{list2}
\item Ideologically-Motivated "Hactivism" and Vandalism Are the Most Readily-Identified DDoS Attack Motivations
\item 10 Gbps and Larger Flood-Based DDoS Attacks Are the "New Normal"
\item Increased Sophistication and Complexity of Application-Layer (Layer 7) DDoS Attacks and Multi-Vector DDoS Attacks Are Becoming More Common
\item Visibility and Security of Mobile and Fixed Wireless Networks Are an Ongoing Concern
\item {\bf First-Ever Reports of IPv6 DDoS Attacks "in the Wild" on Production Networks}
\item {\bf Rarity of IPv6-Enabled Attacks Indicates Low IPv6 Market Penetration and Lack of Critical Mass}
\item Stateful Firewalls, IPS and Load-Balancer Devices Continue to Fall Short on DDoS Protection Capabilities
\item The Overwhelming Majority of Network Operators Do Not Engage Law Enforcement 
\end{list2}

Kilde:
\link{http://www.arbornetworks.com/report} 



\slide{IPv6 is coming}

\hlkimage{2cm}{IPv6ready.png}

\begin{list1}
\item An important consideration is that IPv6 is quite likely to be already running on the enterprise network, whether that implementation was planned or not. Some important characteristics of IPv6 include:
\begin{list2}
\item IPv6 has a mechanism to automatically assign addresses so that end systems can easily establish communications.
\item IPv6 has several mechanisms available to ease the integration of the protocol into the network.
\item Automatic tunneling mechanisms can take advantage of the underlying IPv4 network and connect it to the IPv6 Internet.
\end{list2}
\end{list1}

Kilde:\\
{\footnotesize\link{http://www.cisco.com/en/US/prod/collateral/iosswrel/ps6537/ps6553/white_paper_c11-629391.html}}


\slide{Implications}

\hlkimage{2cm}{IPv6ready.png}

\begin{list1}
\item For an IPv4 enterprise network, the existence of an IPv6 overlay network has several of implications:
\begin{list2}
\item The IPv4 firewalls can be bypassed by the IPv6 traffic, and leave the security door wide open.
\item Intrusion detection mechanisms not expecting IPv6 traffic may be confused and allow intrusion
\item In some cases (for example, with the IPv6 transition technology known as 6to4), an internal PC can communicate directly with another internal PC and evade all intrusion protection and detection systems (IPS/IDS). Botnet command and control channels are known to use these kind of tunnels.
\end{list2}
\end{list1}

Kilde:\\
{\footnotesize\link{http://www.cisco.com/en/US/prod/collateral/iosswrel/ps6537/ps6553/white_paper_c11-629391.html}}


\slide{IPv6 in the Nordic region}

\hlkimage{14cm}{ipv6-nordic.png}

\link{http://v6asns.ripe.net/v/6?s=_ALL;s=DK;s=SE;s=NO;s=NL}

\slide{Metasploit IPv6}

\hlkimage{21cm}{metasploit-blog-ipv6.png}

Kilde:\\
{\small \link{https://community.rapid7.com/community/metasploit/blog/2012/03/07/}}


\slide{New Loki - ikke alt er layer 7}

\begin{quote}
At the beginning LOKI was made to combine some stand-alone {\bf command line tools}, like the \verb+bgp_cli+, the \verb+ospf_cli+ or the \verb+ldp_cli+ and to give them a {\bf user friendly, graphical interface}. In the meantime LOKI is more than just the combination of the single tools, it gave its modules the opportunity to base upon each other (like {\bf combining ARP-spoofing from the ARP module with some man-in-the-middle actions, rewriting MPLS-labels for example)} and even inter operate with each other. (Fremhævning: HLK)
\end{quote}

\begin{list1}
\item \link{https://www.c0decafe.de/loki.html} Loki 
\item {\small \link{http://www.packetstan.com/2011/02/running-loki-on-backtrack-4-r2.html} }
\item "Yersinia is a network tool designed to take advantage of some weakeness in different network protocols. It pretends to be a solid framework for analyzing and testing the deployed networks and systems."  \link{http://www.yersinia.net/}
\end{list1}


\slide{NIST Special Publication 800 series}

\hlkimage{16cm}{nist-sp-800-119.png}

\begin{list1}
\item SP 800-119	Dec. 2010	\emph{Guidelines for the Secure Deployment of IPv6}\\
God introduktion til IPv6 og sikkerhed i forbindelse med IPv6
\end{list1}

\link{http://csrc.nist.gov/publications/PubsSPs.html}



\slide{THC}

\begin{quote}
 A complete tool set to attack the inherent protocol weaknesses of IPV6
 and ICMP6, and includes an easy to use packet factory library.
\end{quote}


\begin{list1}

\item  Last update 2012-01-15 - opdateres løbende\\
Current public version: v1.8 - CCC Camp release
\end{list1}


\link{http://thc.org/thc-ipv6/}


\slide{THC IPv6 [0x03] The Included Tools}

\begin{list2}
\item - parasite6: icmp neighbor solitication/advertisement spoofer, puts you
   as man-in-the-middle, same as ARP mitm (and parasite)
\item - alive6: an effective alive scanng, which will detect all systems
   listening to this address
\item - dnsdict6: parallized dns ipv6 dictionary bruteforcer
\item - fake\_router6: announce yourself as a router on the network, with the
  highest priority
\item - redir6: redirect traffic to you intelligently (man-in-the-middle) with
    a clever icmp6 redirect spoofer
\item - toobig6: mtu decreaser with the same intelligence as redir6
\item - detect-new-ip6: detect new ip6 devices which join the network, you can
    run a script to automatically scan these systems etc.
\item - dos-new-ip6: detect new ip6 devices and tell them that their chosen IP
    collides on the network (DOS).
\item - trace6: very fast traceroute6 with supports ICMP6 echo request and TCP-SYN
\item - flood\_router6: flood a target with random router advertisements
\item - flood\_advertise6: flood a target with random neighbor advertisements
\item - exploit6: known ipv6 vulnerabilities to test against a target
\item - denial6: a collection of denial-of-service tests againsts a target
\item - fuzz\_ip6: fuzzer for ipv6
\item - implementation6: performs various implementation checks on ipv6
\item - implementation6d: listen daemon for implementation6 to check behind a fw
\item - fake\_mld6: announce yourself in a multicast group of your choice on the net
\item - fake\_mld26: same but for MLDv2
\item - fake\_mldrouter6: fake MLD router messages
\item - fake\_mipv6: steal a mobile IP to yours if IPSEC is not needed for authentication
\item - fake\_advertiser6: announce yourself on the network
\item - smurf6: local smurfer
\item - rsmurf6: remote smurfer, known to work only against linux at the moment
\item - sendpees6: a tool by willdamn(ad)gmail.com, which generates a neighbor
          solicitation requests with a lot of CGAs (crypto stuff ;-) to keep the CPU busy. nice.
\item         - thcping6: sends a hand crafted ping6 packet
\item         [and about 15 more tools for you to discover]

\end{list2}


\slide{How to use IPv6}

\begin{center}
\vskip 3 cm
\hlkbig
www.solidonetworks.com

hlk@solidonetworks.com
\end{center}

\slide{Really how to use IPv6?}

\begin{list1}
\item Get IPv6 address and routing
\item Add AAAA (quad A) records to your DNS
\item Done
\end{list1}
\vskip 1cm
\centerline{\Large www.solidonetworks.com}

\begin{alltt}
\LARGE
www     IN	A       91.102.95.20
        IN	AAAA    2a02:9d0:10::9
\end{alltt}

\slide{IPv6 Status Denmark}

\begin{list1}
\item IT- og Telestyrelsen are becoming more active
\item Unofficial IPv6 task force at \link{http://www.ipv6tf.dk/}
\item Other initiatives \link{http://world-ipv6-day.dk/}
\item Major providers are ready on back bones
\item Internet Providers are increasingly becoming ready
\end{list1}



\slide{Collect information about IPv6}

\begin{list1}
\item \emph{Guidelines for the Secure Deployment of IPv6}, SP800-119, NIST\\
\link{http://csrc.nist.gov/publications/nistpubs/800-119/sp800-119.pdf}
\item \emph{The Second Internet: Reinventing Computer Networks with IPv6}, Lawrence E. Hughes, October 2010,\\ \link{http://www.secondinternet.org/}
\item \emph{IPv6 Network Administration}
af David Malone og Niall Richard Murphy
\item \link{http://www.ripe.net}
\item This presentation \smiley
\end{list1}

\slide{Allocating IPv6 addresses} 

\begin{list1}
\item You have plenty!
\item Providers and LIRs will typically get /32
\item Providers will typically give organisations /48 or /56
\item Your /48 can be used for:
\begin{list2}
\item 65536 subnets - all host subnets are /64
\item Each subnet has $2^{64}$ addresses
\end{list2}
\end{list1}

\slide{Preparing an IPv6
Addressing Plan}

\hlkimage{20cm}{ipv6-address-plan-ripe.png}

{\footnotesize \link{http://www.ripe.net/training/material/IPv6-for-LIRs-Training-Course/IPv6_addr_plan4.pdf}}

\slide{Example adress plan input}

\hlkimage{22cm}{ipv6-linked-to-ipv4.png}

\centerline{Easy and coupled with VLAN IDs it will work \smiley}

\slide{Run IPv6 in production}

\begin{list1}
\item Make sure you establish IPv6 in {\bf production}
\item Enabling service on IPv6 without production - bad experience for users
\item Start by enabling your DNS servers for IPv6 - and DNSSEC - and DNS over TCP\\
Remember that your firewall might have problems with large DNS packets
\item Add a production IPv6 router - hardware device or generic server
\item Tunnels are OK, and SixXS consider their service production
\end{list1}

\slide{IPv6 business case}


\begin{list2}
\item An almost unlimited scalability with a very large IPv6 address space ($2^128$ addresses), enabling IP addresses to each and every device.

\item Address self-configuration mechanisms, easing the deployment.

\item Improved security and authentication features, such as mandatory IPSec capacities and the possibility to use of the address space to include encryption keys.

\item Peer-to-peer connectivity, solving the NAT barrier with specific and permanent IP addresses for any device and/or user of the Internet.

\item Mobility features, enabling a seamless connexion when moving from one access point to another access point on the Internet.

\item Multi cast and any cast functionalities.

\item IPv6 will provide an easier remote interaction with each and every device with a {\bfseries direct integration to the Internet.} In other words, IPv6 will make possible to move from a network of servers, to a network of things.

\end{list2}

\centerline{ Business case for IPv6 is {\bf continuity}}


{\footnotesize Partial quote from http://www.smartipv6building.org/index.php/en/ipv6-potential}


\slide{IPv6: Internet redesigned? - no!}
 
\begin{list1}
\item Preserve the good stuff
\item back to basics, internet as it used to be!
\item fate sharing - connection rely on end points, not intermediary NAT boxes
\item end-to-end transparency - you have an address and I have an address
\item Wants: bandwidth +10G, low latency/predictable latency, Quality of Service, Security
\end{list1}

\vskip 5mm
\centerline{\color{titlecolor}\LARGE \bf IPv6 is evolution, not revolution}
\vskip 5mm

Note: IPv6 was not designed to solve all problems, so don't expect it to!


\slide{Up and running with IPv6}

\begin{list1}
%\item Join the fun - join the wireless network
\item Use ping/ping6 and traceroute to test connectivity
\item Try in your browser:
\begin{list2}
\item \link{http://www.kame.net} Dancing turtle
\item \link{http://www.ripe.net} RIPE, look for address up right corner 
\item \link{http://loopsofzen.co.uk/} Play a game
\item \link{https://www.sixxs.net/} Apply for IPv6 tunnel 
\end{list2}
\item Done \smiley
\end{list1}



% workshop start

\slide{Unix starthjælp}
\begin{list1}
\item Da Unix indgår er her et lille \emph{cheat sheet} til Unix
\begin{list2}
\item DOS/Windows kommando - tilsvarende Unix, og forklaring
\item dir - ls - står for list files, viser filnavne
\item del - rm - står for remove, sletter filer
%\item ren - mv - move flytter filer til nyt navn, rename
%\item md - mkdir - make directory, lav en mappe/katalog
\item cd - cd - change directory, skifter katalog
\item type - cat - concatenate, viser indholdet af tekstfiler 
\item more - less - viser tekstfiler en side af gangen
\item attrib - chmod - change mode, ændrer rettighederne på filer 
\end{list2}
\item Prøv bare:
  \begin{list2}
    \item {\bfseries ls} list, eller long listing med {\bfseries ls -l} 
    \item {\bfseries cat /etc/hosts} viser hosts filen 
\item {\bfseries chmod +x head.sh} - sæt execute bit på en fil så den
  kan udføres som et program med kommandoen \verb+./head.sh+
  \end{list2}
\end{list1}

\slide{Aftale om test af netværk}

{\bfseries Straffelovens paragraf 263 Stk. 2. Med bøde eller fængsel
  indtil 6 måneder 
straffes den, som uberettiget skaffer sig adgang til en andens
oplysninger eller programmer, der er bestemt til at bruges i et anlæg
til elektronisk databehandling.}

Hacking kan betyde:
\begin{list2}
\item At man skal betale erstatning til personer eller virksomheder
\item At man får konfiskeret sit udstyr af politiet
\item At man, hvis man er over 15 år og bliver dømt for hacking, kan
  få en bøde - eller fængselsstraf i alvorlige tilfælde 
\item At man, hvis man er over 15 år og bliver dømt for hacking, får
en plettet straffeattest. Det kan give problemer, hvis man skal finde
et job eller hvis man skal rejse til visse lande, fx USA og
Australien
\item Frit efter: \link{http://www.stophacking.dk} lavet af Det
  Kriminalpræventive Råd 
\item Frygten for terror har forstærket ovenstående - så lad være!
\end{list2}


\slide{Agenda Basale IPv6 begreber}

\begin{list1}
\item Opstart - hvad er IP og TCP/IP repetition, TCP, UDP, Subnets og CIDR
\item Basale værktøjer traceroute, ping, dig, host
\item Wireshark sniffer
\item VLAN 802.1q
\item THC IPv6 attack toolkit
\end{list1}


% days 1-5
\input{basic-tcpip-1.tex}



\slide{Opsummering}

\vskip 3 cm

\begin{list1}
\item Husk følgende:
\begin{list2}
\item Unix og Linux er blot eksempler - navneservice eller HTTP
  server kører fint på Windows
\item DNS er grundlaget for Internet
\item Sikkerheden på internet er generelt dårlig, brug SSL!
\item Procedurerne og vedligeholdelse er essentiel for alle
  operativsystemer! 
\item Man skal \emph{hærde} operativsystemer \emph{før} man sætter dem på
  Internet 
\item Husk: IT-sikkerhed er ikke kun netværkssikkerhed!
\item God sikkerhed kommer fra langsigtede intiativer\\
\end{list2}
\item Jeg håber I har lært en masse om netværk og kan bruge det i praksis :-)
\end{list1}

\slide{Spørgsmål?}


\vskip 4cm

\begin{center}
\hlkbig 

\myname

\myweb
\vskip 2 cm

I er altid velkomne til at sende spørgsmål på e-mail
\end{center}

\slide{Danish resources - get involved}

\hlkimage{10cm}{taskforce-logo.jpg}

\centerline{ Danish IPv6 task force - unofficial
\link{http://www.ipv6tf.dk}}


\slide{VikingScan.org - free portscanning}

\hlkimage{18cm}{vikingscan.png}
%\vskip 1cm 
%\centerline{\link{http://www.vikingscan.org}}


\slide{PROSA CTF}

\hlkimage{10cm}{DSCF3910s.jpg}

\begin{list1}
\item PROSA afholdt fredag 17. september - til lørdag 18. september Capture the Flag 
\item Distribueret CTF med 6 hold og arrangørerne i Aalborg
\item Sjovt og lærerigt - gentages helt sikkert
\end{list1}
Kilde: \link{http://prosa-ctf.the-playground.dk/}



\slide{Referencer: netværksbøger}

\begin{list2}
\item O'Reilly Network Warrior - god allround bog, men også Cisco centrisk
\item Stevens, Comer klassiske bøger om TCP/IP
\item TCP/IP bogen på dansk måske
\item O'Reilly IPv6 Network Administration  
\item KAME bøgerne om IPv6 protokollerne, meget detaljerede
\item O'Reilly cookbooks: Cisco, BIND og Apache HTTPD m.fl.
\item Cisco Press og website
\item Juniper website
\item Firewall bøger Cheswick 
\item Der findes mange gode bøger om netværk
\end{list2}

\slide{Bøger om IPv6}

\begin{list1}
\item \emph{IPv6 Network Administration}
af David Malone og Niall Richard Murphy
 - god til real-life admins, typisk
O'Reilly bog
\item \emph{IPv6 Essentials} af Silvia Hagen, O'Reilly 2nd edition (May 17, 2006)
	god reference om emnet
\item \emph{IPv6 Core Protocols Implementation}
af Qing Li, Tatuya Jinmei og Keiichi Shima
\item \emph{IPv6 Advanced Protocols Implementation}
af Qing Li, Jinmei Tatuya og Keiichi Shima
\item - flere andre
\end{list1}


\end{document}
\input{references.tex}

